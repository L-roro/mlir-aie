XILINX_LOC=/proj/xbuilds/2024.2_INT_daily_latest/installs/lin64/Vitis/2024.2
SHELL=/bin/csh
MYXILINX_VER=2024.2
HISTCONTROL=ignoreboth:erasedups
TERM_PROGRAM_VERSION=3.4
GROUP=newhiredefaultgrp
MACHTYPE=x86_64
TMUX=/tmp/tmux-50093633/default,1112987,0
AIETOOLS_ROOT=/proj/xbuilds/2024.2_INT_daily_latest/installs/lin64/Vitis/2024.2/aietools
XILINX_XRT=/opt/xilinx/xrt
n_aie_cols=8
PWD=/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array
LOGNAME=lromeror
NPU2=1
XDG_SESSION_TYPE=tty
MLIR_AIE_INSTALL_DIR=/scratch/luisr/mlir-aie/install
N=4352
M=4352
K=4352
n=32
m=32
k=32
HOME=/home/lromeror
LANG=en_US.UTF-8
PEANO_INSTALL_DIR=/scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie
VIRTUAL_ENV=/scratch/luisr/mlir-aie/ironenv
OSTYPE=linux
SSH_CONNECTION=172.21.39.59 58906 172.20.10.58 22
XDG_SESSION_CLASS=user
PYTHONPATH=/scratch/luisr/mlir-aie/install/python:/opt/xilinx/xrt/python:/scratch/luisr/mlir-aie/install/python:/opt/xilinx/xrt/python
TERM=tmux-256color
HOST=xcoradaie213
USER=lromeror
use_chess=0
TMUX_PANE=%0
emulate_bfloat16_mmul_with_bfp16=1
SHLVL=3
XDG_SESSION_ID=1130
VIRTUAL_ENV_PROMPT=(ironenv) 
LM_LICENSE_FILE=2100@aiengine
LD_LIBRARY_PATH=/scratch/luisr/mlir-aie/install/lib:/opt/xilinx/xrt/lib:/scratch/luisr/mlir-aie/install/lib:/opt/xilinx/xrt/lib
XDG_RUNTIME_DIR=/run/user/50093633
MYXILINX_BASE=/proj/xbuilds/2024.2_INT_daily_latest
dtype_out=f32
SSH_CLIENT=172.21.39.59 58906 22
NLSPATH=/usr/share/locale/%L/LC_MESSAGES/%N.cat:/usr/share/locale/%l/LC_MESSAGES/%N.cat
VENDOR=unknown
PATH=/scratch/luisr/mlir-aie/install/bin:/scratch/luisr/mlir-aie/ironenv/bin:/opt/xilinx/xrt/bin:/scratch/luisr/mlir-aie/install/bin:/scratch/luisr/mlir-aie/ironenv/bin:/opt/xilinx/xrt/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin:/proj/xbuilds/2024.2_INT_daily_latest/installs/lin64/Vitis/2024.2/aietools/bin:/proj/xbuilds/2024.2_INT_daily_latest/installs/lin64/Vitis/2024.2/bin:/proj/xbuilds/2024.2_INT_daily_latest/installs/lin64/Vitis/2024.2/aietools/bin:/proj/xbuilds/2024.2_INT_daily_latest/installs/lin64/Vitis/2024.2/bin
dtype_in=bf16
DBUS_SESSION_BUS_ADDRESS=unix:path=/run/user/50093633/bus
SSH_TTY=/dev/pts/2
HOSTTYPE=x86_64-linux
REMOTEHOST=172.21.39.59
OLDPWD=/scratch/luisr/mlir-aie
runargs=--iters 20 --warmup 10
TERM_PROGRAM=tmux
_=/usr/bin/env
##===- Makefile -----------------------------------------------------------===##
# 
# This file licensed under the Apache License v2.0 with LLVM Exceptions.
# See https://llvm.org/LICENSE.txt for license information.
# SPDX-License-Identifier: Apache-2.0 WITH LLVM-exception
#
# Copyright (C) 2025, Advanced Micro Devices, Inc.
# 
##===----------------------------------------------------------------------===##
srcdir := $(shell dirname $(realpath $(firstword $(MAKEFILE_LIST))))
subdir=whole_array
targetname=whole_array


# M, K, N: final GEMM dimensions
M?=512
K?=512
N?=512

# m, k, n: single AIE core GEMM dimensions
m?=32
k?=32
n?=32

n_aie_cols?=4
b_col_maj?=0

kernels=mm_${m}x${k}x${n}
aieargs+=-m $m -k $k -n $n --n-aie-cols ${n_aie_cols} --b-col-maj ${b_col_maj}
runargs+=--b_col_maj ${b_col_maj}
target_suffix=${M}x${K}x${N}_${m}x${k}x${n}_${n_aie_cols}c
use_placed?=0
use_iron?=0

# set this flag to 1 for linear buffer allocation
# else, 0 for bank-aware
use_linear_buf_alloc?=1

ifeq (${use_linear_buf_alloc}, 1)
buffer_aloc_flag=basic-sequential
else
buffer_aloc_flag=bank-aware
endif

ifeq (${use_placed}, 1)
aie_py_src=${targetname}_placed.py
ifeq (${use_iron}, 1)
$(error Cannot specify both placed design and IRON)
endif
endif

ifeq (${use_iron}, 1)
aie_py_src=${targetname}_iron.py
endif

KERNEL_DEFINES=-D${dtype_in}_${dtype_out}_ONLY -DDIM_M=${m} -DDIM_K=${k} -DDIM_N=${n}
ifeq (${b_col_maj}, 1)
	KERNEL_DEFINES+=-DB_COL_MAJ
endif

include ${srcdir}/../makefile-common

build/mm_${m}x${k}x${n}.o: ${kernels_dir}/mm.cc
	mkdir -p ${@D}
	cd ${@D} && ${KERNEL_CC} ${KERNEL_CFLAGS} ${KERNEL_DEFINES} -c $< -o ${@F}
rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=float -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.3s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 32 -k 32 -n 32 --n-aie-cols 8 --b-col-maj 0 --dev npu2 -M 256 -K 256 -N 256 --dtype_in bf16 --dtype_out f32 --emulate-bf16-mmul-with-bfp16 true --trace_size 0 > build/aie_256x256x256_32x32x32_8c.mlir
mkdir -p build
cd build && /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie/bin/clang++ -O2 -std=c++20 --target=aie2p-none-unknown-elf -Wno-parentheses -Wno-attributes -Wno-macro-redefined -Wno-empty-body -DNDEBUG -I /scratch/luisr/mlir-aie/install/include  -Dbf16_f32_ONLY -DDIM_M=32 -DDIM_K=32 -DDIM_N=32 -DAIE_API_EMULATE_BFLOAT16_MMUL_WITH_BFP16 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_32x32x32.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_256x256x256_32x32x32_8c.xclbin \
			--no-xchesscc --no-xbridge --peano /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie \
			--aie-generate-npu-insts --npu-insts-name=insts_256x256x256_32x32x32_8c.txt ../build/aie_256x256x256_32x32x32_8c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_256x256x256_32x32x32_8c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_256x256x256_32x32x32_8c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_256x256x256_32x32x32_8c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_256x256x256_32x32x32_8c.xclbin -i build/insts_256x256x256_32x32x32_8c.txt -k MLIR_AIE -M 256 -K 256 -N 256 --iters 20 --warmup 10 --b_col_maj 0

Avg NPU matmul time: 549.65us.
Avg NPU gflops: 61.0469

Min NPU matmul time: 145us.
Max NPU gflops: 231.41

Max NPU matmul time: 939us.
Min NPU gflops: 35.7342

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=float -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.2s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 32 -k 32 -n 32 --n-aie-cols 8 --b-col-maj 0 --dev npu2 -M 256 -K 256 -N 1280 --dtype_in bf16 --dtype_out f32 --emulate-bf16-mmul-with-bfp16 true --trace_size 0 > build/aie_256x256x1280_32x32x32_8c.mlir
mkdir -p build
cd build && /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie/bin/clang++ -O2 -std=c++20 --target=aie2p-none-unknown-elf -Wno-parentheses -Wno-attributes -Wno-macro-redefined -Wno-empty-body -DNDEBUG -I /scratch/luisr/mlir-aie/install/include  -Dbf16_f32_ONLY -DDIM_M=32 -DDIM_K=32 -DDIM_N=32 -DAIE_API_EMULATE_BFLOAT16_MMUL_WITH_BFP16 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_32x32x32.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_256x256x1280_32x32x32_8c.xclbin \
			--no-xchesscc --no-xbridge --peano /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie \
			--aie-generate-npu-insts --npu-insts-name=insts_256x256x1280_32x32x32_8c.txt ../build/aie_256x256x1280_32x32x32_8c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_256x256x1280_32x32x32_8c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_256x256x1280_32x32x32_8c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_256x256x1280_32x32x32_8c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_256x256x1280_32x32x32_8c.xclbin -i build/insts_256x256x1280_32x32x32_8c.txt -k MLIR_AIE -M 256 -K 256 -N 1280 --iters 20 --warmup 10 --b_col_maj 0

Avg NPU matmul time: 1087.25us.
Avg NPU gflops: 154.309

Min NPU matmul time: 193us.
Max NPU gflops: 869.286

Max NPU matmul time: 4016us.
Min NPU gflops: 41.7759

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=float -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.3s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 32 -k 32 -n 32 --n-aie-cols 8 --b-col-maj 0 --dev npu2 -M 256 -K 256 -N 2304 --dtype_in bf16 --dtype_out f32 --emulate-bf16-mmul-with-bfp16 true --trace_size 0 > build/aie_256x256x2304_32x32x32_8c.mlir
mkdir -p build
cd build && /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie/bin/clang++ -O2 -std=c++20 --target=aie2p-none-unknown-elf -Wno-parentheses -Wno-attributes -Wno-macro-redefined -Wno-empty-body -DNDEBUG -I /scratch/luisr/mlir-aie/install/include  -Dbf16_f32_ONLY -DDIM_M=32 -DDIM_K=32 -DDIM_N=32 -DAIE_API_EMULATE_BFLOAT16_MMUL_WITH_BFP16 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_32x32x32.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_256x256x2304_32x32x32_8c.xclbin \
			--no-xchesscc --no-xbridge --peano /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie \
			--aie-generate-npu-insts --npu-insts-name=insts_256x256x2304_32x32x32_8c.txt ../build/aie_256x256x2304_32x32x32_8c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_256x256x2304_32x32x32_8c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_256x256x2304_32x32x32_8c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_256x256x2304_32x32x32_8c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_256x256x2304_32x32x32_8c.xclbin -i build/insts_256x256x2304_32x32x32_8c.txt -k MLIR_AIE -M 256 -K 256 -N 2304 --iters 20 --warmup 10 --b_col_maj 0

Avg NPU matmul time: 1349.75us.
Avg NPU gflops: 223.738

Min NPU matmul time: 258us.
Max NPU gflops: 1170.5

Max NPU matmul time: 4097us.
Min NPU gflops: 73.71

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=float -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.3s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 32 -k 32 -n 32 --n-aie-cols 8 --b-col-maj 0 --dev npu2 -M 256 -K 256 -N 3328 --dtype_in bf16 --dtype_out f32 --emulate-bf16-mmul-with-bfp16 true --trace_size 0 > build/aie_256x256x3328_32x32x32_8c.mlir
mkdir -p build
cd build && /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie/bin/clang++ -O2 -std=c++20 --target=aie2p-none-unknown-elf -Wno-parentheses -Wno-attributes -Wno-macro-redefined -Wno-empty-body -DNDEBUG -I /scratch/luisr/mlir-aie/install/include  -Dbf16_f32_ONLY -DDIM_M=32 -DDIM_K=32 -DDIM_N=32 -DAIE_API_EMULATE_BFLOAT16_MMUL_WITH_BFP16 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_32x32x32.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_256x256x3328_32x32x32_8c.xclbin \
			--no-xchesscc --no-xbridge --peano /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie \
			--aie-generate-npu-insts --npu-insts-name=insts_256x256x3328_32x32x32_8c.txt ../build/aie_256x256x3328_32x32x32_8c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_256x256x3328_32x32x32_8c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_256x256x3328_32x32x32_8c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_256x256x3328_32x32x32_8c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_256x256x3328_32x32x32_8c.xclbin -i build/insts_256x256x3328_32x32x32_8c.txt -k MLIR_AIE -M 256 -K 256 -N 3328 --iters 20 --warmup 10 --b_col_maj 0

Avg NPU matmul time: 1487.6us.
Avg NPU gflops: 293.229

Min NPU matmul time: 357us.
Max NPU gflops: 1221.87

Max NPU matmul time: 4174us.
Min NPU gflops: 104.506

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=float -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.2s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 32 -k 32 -n 32 --n-aie-cols 8 --b-col-maj 0 --dev npu2 -M 256 -K 256 -N 4352 --dtype_in bf16 --dtype_out f32 --emulate-bf16-mmul-with-bfp16 true --trace_size 0 > build/aie_256x256x4352_32x32x32_8c.mlir
mkdir -p build
cd build && /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie/bin/clang++ -O2 -std=c++20 --target=aie2p-none-unknown-elf -Wno-parentheses -Wno-attributes -Wno-macro-redefined -Wno-empty-body -DNDEBUG -I /scratch/luisr/mlir-aie/install/include  -Dbf16_f32_ONLY -DDIM_M=32 -DDIM_K=32 -DDIM_N=32 -DAIE_API_EMULATE_BFLOAT16_MMUL_WITH_BFP16 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_32x32x32.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_256x256x4352_32x32x32_8c.xclbin \
			--no-xchesscc --no-xbridge --peano /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie \
			--aie-generate-npu-insts --npu-insts-name=insts_256x256x4352_32x32x32_8c.txt ../build/aie_256x256x4352_32x32x32_8c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_256x256x4352_32x32x32_8c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_256x256x4352_32x32x32_8c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_256x256x4352_32x32x32_8c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_256x256x4352_32x32x32_8c.xclbin -i build/insts_256x256x4352_32x32x32_8c.txt -k MLIR_AIE -M 256 -K 256 -N 4352 --iters 20 --warmup 10 --b_col_maj 0

Avg NPU matmul time: 1921.6us.
Avg NPU gflops: 296.849

Min NPU matmul time: 439us.
Max NPU gflops: 1299.37

Max NPU matmul time: 4132us.
Min NPU gflops: 138.051

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=float -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.3s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 32 -k 32 -n 32 --n-aie-cols 8 --b-col-maj 0 --dev npu2 -M 256 -K 1280 -N 256 --dtype_in bf16 --dtype_out f32 --emulate-bf16-mmul-with-bfp16 true --trace_size 0 > build/aie_256x1280x256_32x32x32_8c.mlir
mkdir -p build
cd build && /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie/bin/clang++ -O2 -std=c++20 --target=aie2p-none-unknown-elf -Wno-parentheses -Wno-attributes -Wno-macro-redefined -Wno-empty-body -DNDEBUG -I /scratch/luisr/mlir-aie/install/include  -Dbf16_f32_ONLY -DDIM_M=32 -DDIM_K=32 -DDIM_N=32 -DAIE_API_EMULATE_BFLOAT16_MMUL_WITH_BFP16 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_32x32x32.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_256x1280x256_32x32x32_8c.xclbin \
			--no-xchesscc --no-xbridge --peano /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie \
			--aie-generate-npu-insts --npu-insts-name=insts_256x1280x256_32x32x32_8c.txt ../build/aie_256x1280x256_32x32x32_8c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_256x1280x256_32x32x32_8c.mlir.prj/aie_cdo_elfs.bin
rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=float -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.2s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 32 -k 32 -n 32 --n-aie-cols 8 --b-col-maj 0 --dev npu2 -M 256 -K 1280 -N 1280 --dtype_in bf16 --dtype_out f32 --emulate-bf16-mmul-with-bfp16 true --trace_size 0 > build/aie_256x1280x1280_32x32x32_8c.mlir
mkdir -p build
cd build && /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie/bin/clang++ -O2 -std=c++20 --target=aie2p-none-unknown-elf -Wno-parentheses -Wno-attributes -Wno-macro-redefined -Wno-empty-body -DNDEBUG -I /scratch/luisr/mlir-aie/install/include  -Dbf16_f32_ONLY -DDIM_M=32 -DDIM_K=32 -DDIM_N=32 -DAIE_API_EMULATE_BFLOAT16_MMUL_WITH_BFP16 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_32x32x32.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_256x1280x1280_32x32x32_8c.xclbin \
			--no-xchesscc --no-xbridge --peano /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie \
			--aie-generate-npu-insts --npu-insts-name=insts_256x1280x1280_32x32x32_8c.txt ../build/aie_256x1280x1280_32x32x32_8c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_256x1280x1280_32x32x32_8c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_256x1280x1280_32x32x32_8c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_256x1280x1280_32x32x32_8c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_256x1280x1280_32x32x32_8c.xclbin -i build/insts_256x1280x1280_32x32x32_8c.txt -k MLIR_AIE -M 256 -K 1280 -N 1280 --iters 20 --warmup 10 --b_col_maj 0

Avg NPU matmul time: 2298us.
Avg NPU gflops: 365.04

Min NPU matmul time: 528us.
Max NPU gflops: 1588.75

Max NPU matmul time: 4194us.
Min NPU gflops: 200.014

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=float -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.3s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 32 -k 32 -n 32 --n-aie-cols 8 --b-col-maj 0 --dev npu2 -M 256 -K 1280 -N 2304 --dtype_in bf16 --dtype_out f32 --emulate-bf16-mmul-with-bfp16 true --trace_size 0 > build/aie_256x1280x2304_32x32x32_8c.mlir
mkdir -p build
cd build && /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie/bin/clang++ -O2 -std=c++20 --target=aie2p-none-unknown-elf -Wno-parentheses -Wno-attributes -Wno-macro-redefined -Wno-empty-body -DNDEBUG -I /scratch/luisr/mlir-aie/install/include  -Dbf16_f32_ONLY -DDIM_M=32 -DDIM_K=32 -DDIM_N=32 -DAIE_API_EMULATE_BFLOAT16_MMUL_WITH_BFP16 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_32x32x32.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_256x1280x2304_32x32x32_8c.xclbin \
			--no-xchesscc --no-xbridge --peano /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie \
			--aie-generate-npu-insts --npu-insts-name=insts_256x1280x2304_32x32x32_8c.txt ../build/aie_256x1280x2304_32x32x32_8c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_256x1280x2304_32x32x32_8c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_256x1280x2304_32x32x32_8c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_256x1280x2304_32x32x32_8c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_256x1280x2304_32x32x32_8c.xclbin -i build/insts_256x1280x2304_32x32x32_8c.txt -k MLIR_AIE -M 256 -K 1280 -N 2304 --iters 20 --warmup 10 --b_col_maj 0

Avg NPU matmul time: 4103.15us.
Avg NPU gflops: 367.998

Min NPU matmul time: 1151us.
Max NPU gflops: 1311.86

Max NPU matmul time: 4636us.
Min NPU gflops: 325.701

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=float -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.3s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 32 -k 32 -n 32 --n-aie-cols 8 --b-col-maj 0 --dev npu2 -M 256 -K 1280 -N 3328 --dtype_in bf16 --dtype_out f32 --emulate-bf16-mmul-with-bfp16 true --trace_size 0 > build/aie_256x1280x3328_32x32x32_8c.mlir
mkdir -p build
cd build && /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie/bin/clang++ -O2 -std=c++20 --target=aie2p-none-unknown-elf -Wno-parentheses -Wno-attributes -Wno-macro-redefined -Wno-empty-body -DNDEBUG -I /scratch/luisr/mlir-aie/install/include  -Dbf16_f32_ONLY -DDIM_M=32 -DDIM_K=32 -DDIM_N=32 -DAIE_API_EMULATE_BFLOAT16_MMUL_WITH_BFP16 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_32x32x32.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_256x1280x3328_32x32x32_8c.xclbin \
			--no-xchesscc --no-xbridge --peano /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie \
			--aie-generate-npu-insts --npu-insts-name=insts_256x1280x3328_32x32x32_8c.txt ../build/aie_256x1280x3328_32x32x32_8c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_256x1280x3328_32x32x32_8c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_256x1280x3328_32x32x32_8c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_256x1280x3328_32x32x32_8c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_256x1280x3328_32x32x32_8c.xclbin -i build/insts_256x1280x3328_32x32x32_8c.txt -k MLIR_AIE -M 256 -K 1280 -N 3328 --iters 20 --warmup 10 --b_col_maj 0





















Avg NPU matmul time: 1694.15us.
Avg NPU gflops: 1287.39

Min NPU matmul time: 1356us.
Max NPU gflops: 1608.44

Max NPU matmul time: 2100us.
Min NPU gflops: 1038.59

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=float -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.2s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 32 -k 32 -n 32 --n-aie-cols 8 --b-col-maj 0 --dev npu2 -M 256 -K 1280 -N 4352 --dtype_in bf16 --dtype_out f32 --emulate-bf16-mmul-with-bfp16 true --trace_size 0 > build/aie_256x1280x4352_32x32x32_8c.mlir
mkdir -p build
cd build && /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie/bin/clang++ -O2 -std=c++20 --target=aie2p-none-unknown-elf -Wno-parentheses -Wno-attributes -Wno-macro-redefined -Wno-empty-body -DNDEBUG -I /scratch/luisr/mlir-aie/install/include  -Dbf16_f32_ONLY -DDIM_M=32 -DDIM_K=32 -DDIM_N=32 -DAIE_API_EMULATE_BFLOAT16_MMUL_WITH_BFP16 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_32x32x32.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_256x1280x4352_32x32x32_8c.xclbin \
			--no-xchesscc --no-xbridge --peano /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie \
			--aie-generate-npu-insts --npu-insts-name=insts_256x1280x4352_32x32x32_8c.txt ../build/aie_256x1280x4352_32x32x32_8c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_256x1280x4352_32x32x32_8c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_256x1280x4352_32x32x32_8c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_256x1280x4352_32x32x32_8c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_256x1280x4352_32x32x32_8c.xclbin -i build/insts_256x1280x4352_32x32x32_8c.txt -k MLIR_AIE -M 256 -K 1280 -N 4352 --iters 20 --warmup 10 --b_col_maj 0





















Avg NPU matmul time: 2130.45us.
Avg NPU gflops: 1338.74

Min NPU matmul time: 1741us.
Max NPU gflops: 1638.21

Max NPU matmul time: 2901us.
Min NPU gflops: 983.153

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=float -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.3s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 32 -k 32 -n 32 --n-aie-cols 8 --b-col-maj 0 --dev npu2 -M 256 -K 2304 -N 256 --dtype_in bf16 --dtype_out f32 --emulate-bf16-mmul-with-bfp16 true --trace_size 0 > build/aie_256x2304x256_32x32x32_8c.mlir
mkdir -p build
cd build && /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie/bin/clang++ -O2 -std=c++20 --target=aie2p-none-unknown-elf -Wno-parentheses -Wno-attributes -Wno-macro-redefined -Wno-empty-body -DNDEBUG -I /scratch/luisr/mlir-aie/install/include  -Dbf16_f32_ONLY -DDIM_M=32 -DDIM_K=32 -DDIM_N=32 -DAIE_API_EMULATE_BFLOAT16_MMUL_WITH_BFP16 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_32x32x32.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_256x2304x256_32x32x32_8c.xclbin \
			--no-xchesscc --no-xbridge --peano /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie \
			--aie-generate-npu-insts --npu-insts-name=insts_256x2304x256_32x32x32_8c.txt ../build/aie_256x2304x256_32x32x32_8c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_256x2304x256_32x32x32_8c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_256x2304x256_32x32x32_8c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_256x2304x256_32x32x32_8c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_256x2304x256_32x32x32_8c.xclbin -i build/insts_256x2304x256_32x32x32_8c.txt -k MLIR_AIE -M 256 -K 2304 -N 256 --iters 20 --warmup 10 --b_col_maj 0

Avg NPU matmul time: 1221.3us.
Avg NPU gflops: 247.269

Min NPU matmul time: 243us.
Max NPU gflops: 1242.76

Max NPU matmul time: 3961us.
Min NPU gflops: 76.2408

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=float -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.3s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 32 -k 32 -n 32 --n-aie-cols 8 --b-col-maj 0 --dev npu2 -M 256 -K 2304 -N 1280 --dtype_in bf16 --dtype_out f32 --emulate-bf16-mmul-with-bfp16 true --trace_size 0 > build/aie_256x2304x1280_32x32x32_8c.mlir
mkdir -p build
cd build && /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie/bin/clang++ -O2 -std=c++20 --target=aie2p-none-unknown-elf -Wno-parentheses -Wno-attributes -Wno-macro-redefined -Wno-empty-body -DNDEBUG -I /scratch/luisr/mlir-aie/install/include  -Dbf16_f32_ONLY -DDIM_M=32 -DDIM_K=32 -DDIM_N=32 -DAIE_API_EMULATE_BFLOAT16_MMUL_WITH_BFP16 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_32x32x32.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_256x2304x1280_32x32x32_8c.xclbin \
			--no-xchesscc --no-xbridge --peano /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie \
			--aie-generate-npu-insts --npu-insts-name=insts_256x2304x1280_32x32x32_8c.txt ../build/aie_256x2304x1280_32x32x32_8c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_256x2304x1280_32x32x32_8c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_256x2304x1280_32x32x32_8c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_256x2304x1280_32x32x32_8c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_256x2304x1280_32x32x32_8c.xclbin -i build/insts_256x2304x1280_32x32x32_8c.txt -k MLIR_AIE -M 256 -K 2304 -N 1280 --iters 20 --warmup 10 --b_col_maj 0

Avg NPU matmul time: 4232.35us.
Avg NPU gflops: 356.764

Min NPU matmul time: 1499us.
Max NPU gflops: 1007.3

Max NPU matmul time: 4788us.
Min NPU gflops: 315.361

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=float -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.2s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 32 -k 32 -n 32 --n-aie-cols 8 --b-col-maj 0 --dev npu2 -M 256 -K 2304 -N 2304 --dtype_in bf16 --dtype_out f32 --emulate-bf16-mmul-with-bfp16 true --trace_size 0 > build/aie_256x2304x2304_32x32x32_8c.mlir
mkdir -p build
cd build && /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie/bin/clang++ -O2 -std=c++20 --target=aie2p-none-unknown-elf -Wno-parentheses -Wno-attributes -Wno-macro-redefined -Wno-empty-body -DNDEBUG -I /scratch/luisr/mlir-aie/install/include  -Dbf16_f32_ONLY -DDIM_M=32 -DDIM_K=32 -DDIM_N=32 -DAIE_API_EMULATE_BFLOAT16_MMUL_WITH_BFP16 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_32x32x32.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_256x2304x2304_32x32x32_8c.xclbin \
			--no-xchesscc --no-xbridge --peano /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie \
			--aie-generate-npu-insts --npu-insts-name=insts_256x2304x2304_32x32x32_8c.txt ../build/aie_256x2304x2304_32x32x32_8c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_256x2304x2304_32x32x32_8c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_256x2304x2304_32x32x32_8c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_256x2304x2304_32x32x32_8c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_256x2304x2304_32x32x32_8c.xclbin -i build/insts_256x2304x2304_32x32x32_8c.txt -k MLIR_AIE -M 256 -K 2304 -N 2304 --iters 20 --warmup 10 --b_col_maj 0





















Avg NPU matmul time: 2133.05us.
Avg NPU gflops: 1274.19

Min NPU matmul time: 1598us.
Max NPU gflops: 1700.82

Max NPU matmul time: 4318us.
Min NPU gflops: 629.437

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=float -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.2s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 32 -k 32 -n 32 --n-aie-cols 8 --b-col-maj 0 --dev npu2 -M 256 -K 2304 -N 3328 --dtype_in bf16 --dtype_out f32 --emulate-bf16-mmul-with-bfp16 true --trace_size 0 > build/aie_256x2304x3328_32x32x32_8c.mlir
mkdir -p build
cd build && /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie/bin/clang++ -O2 -std=c++20 --target=aie2p-none-unknown-elf -Wno-parentheses -Wno-attributes -Wno-macro-redefined -Wno-empty-body -DNDEBUG -I /scratch/luisr/mlir-aie/install/include  -Dbf16_f32_ONLY -DDIM_M=32 -DDIM_K=32 -DDIM_N=32 -DAIE_API_EMULATE_BFLOAT16_MMUL_WITH_BFP16 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_32x32x32.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_256x2304x3328_32x32x32_8c.xclbin \
			--no-xchesscc --no-xbridge --peano /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie \
			--aie-generate-npu-insts --npu-insts-name=insts_256x2304x3328_32x32x32_8c.txt ../build/aie_256x2304x3328_32x32x32_8c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_256x2304x3328_32x32x32_8c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_256x2304x3328_32x32x32_8c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_256x2304x3328_32x32x32_8c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_256x2304x3328_32x32x32_8c.xclbin -i build/insts_256x2304x3328_32x32x32_8c.txt -k MLIR_AIE -M 256 -K 2304 -N 3328 --iters 20 --warmup 10 --b_col_maj 0





















Avg NPU matmul time: 3019.65us.
Avg NPU gflops: 1300.11

Min NPU matmul time: 2259us.
Max NPU gflops: 1737.88

Max NPU matmul time: 6831us.
Min NPU gflops: 574.714

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=float -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.3s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 32 -k 32 -n 32 --n-aie-cols 8 --b-col-maj 0 --dev npu2 -M 256 -K 2304 -N 4352 --dtype_in bf16 --dtype_out f32 --emulate-bf16-mmul-with-bfp16 true --trace_size 0 > build/aie_256x2304x4352_32x32x32_8c.mlir
mkdir -p build
cd build && /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie/bin/clang++ -O2 -std=c++20 --target=aie2p-none-unknown-elf -Wno-parentheses -Wno-attributes -Wno-macro-redefined -Wno-empty-body -DNDEBUG -I /scratch/luisr/mlir-aie/install/include  -Dbf16_f32_ONLY -DDIM_M=32 -DDIM_K=32 -DDIM_N=32 -DAIE_API_EMULATE_BFLOAT16_MMUL_WITH_BFP16 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_32x32x32.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_256x2304x4352_32x32x32_8c.xclbin \
			--no-xchesscc --no-xbridge --peano /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie \
			--aie-generate-npu-insts --npu-insts-name=insts_256x2304x4352_32x32x32_8c.txt ../build/aie_256x2304x4352_32x32x32_8c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_256x2304x4352_32x32x32_8c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_256x2304x4352_32x32x32_8c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_256x2304x4352_32x32x32_8c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_256x2304x4352_32x32x32_8c.xclbin -i build/insts_256x2304x4352_32x32x32_8c.txt -k MLIR_AIE -M 256 -K 2304 -N 4352 --iters 20 --warmup 10 --b_col_maj 0





















Avg NPU matmul time: 3891us.
Avg NPU gflops: 1319.41

Min NPU matmul time: 3188us.
Max NPU gflops: 1610.36

Max NPU matmul time: 7515us.
Min NPU gflops: 683.144

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=float -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.3s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 32 -k 32 -n 32 --n-aie-cols 8 --b-col-maj 0 --dev npu2 -M 256 -K 3328 -N 256 --dtype_in bf16 --dtype_out f32 --emulate-bf16-mmul-with-bfp16 true --trace_size 0 > build/aie_256x3328x256_32x32x32_8c.mlir
mkdir -p build
cd build && /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie/bin/clang++ -O2 -std=c++20 --target=aie2p-none-unknown-elf -Wno-parentheses -Wno-attributes -Wno-macro-redefined -Wno-empty-body -DNDEBUG -I /scratch/luisr/mlir-aie/install/include  -Dbf16_f32_ONLY -DDIM_M=32 -DDIM_K=32 -DDIM_N=32 -DAIE_API_EMULATE_BFLOAT16_MMUL_WITH_BFP16 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_32x32x32.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_256x3328x256_32x32x32_8c.xclbin \
			--no-xchesscc --no-xbridge --peano /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie \
			--aie-generate-npu-insts --npu-insts-name=insts_256x3328x256_32x32x32_8c.txt ../build/aie_256x3328x256_32x32x32_8c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_256x3328x256_32x32x32_8c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_256x3328x256_32x32x32_8c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_256x3328x256_32x32x32_8c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_256x3328x256_32x32x32_8c.xclbin -i build/insts_256x3328x256_32x32x32_8c.txt -k MLIR_AIE -M 256 -K 3328 -N 256 --iters 20 --warmup 10 --b_col_maj 0

Avg NPU matmul time: 1551.85us.
Avg NPU gflops: 281.089

Min NPU matmul time: 306us.
Max NPU gflops: 1425.52

Max NPU matmul time: 4519us.
Min NPU gflops: 96.5275

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=float -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.3s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 32 -k 32 -n 32 --n-aie-cols 8 --b-col-maj 0 --dev npu2 -M 256 -K 3328 -N 1280 --dtype_in bf16 --dtype_out f32 --emulate-bf16-mmul-with-bfp16 true --trace_size 0 > build/aie_256x3328x1280_32x32x32_8c.mlir
mkdir -p build
cd build && /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie/bin/clang++ -O2 -std=c++20 --target=aie2p-none-unknown-elf -Wno-parentheses -Wno-attributes -Wno-macro-redefined -Wno-empty-body -DNDEBUG -I /scratch/luisr/mlir-aie/install/include  -Dbf16_f32_ONLY -DDIM_M=32 -DDIM_K=32 -DDIM_N=32 -DAIE_API_EMULATE_BFLOAT16_MMUL_WITH_BFP16 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_32x32x32.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_256x3328x1280_32x32x32_8c.xclbin \
			--no-xchesscc --no-xbridge --peano /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie \
			--aie-generate-npu-insts --npu-insts-name=insts_256x3328x1280_32x32x32_8c.txt ../build/aie_256x3328x1280_32x32x32_8c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_256x3328x1280_32x32x32_8c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_256x3328x1280_32x32x32_8c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_256x3328x1280_32x32x32_8c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_256x3328x1280_32x32x32_8c.xclbin -i build/insts_256x3328x1280_32x32x32_8c.txt -k MLIR_AIE -M 256 -K 3328 -N 1280 --iters 20 --warmup 10 --b_col_maj 0





















Avg NPU matmul time: 1814.4us.
Avg NPU gflops: 1202.07

Min NPU matmul time: 1245us.
Max NPU gflops: 1751.84

Max NPU matmul time: 2151us.
Min NPU gflops: 1013.96

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=float -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.3s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 32 -k 32 -n 32 --n-aie-cols 8 --b-col-maj 0 --dev npu2 -M 256 -K 3328 -N 2304 --dtype_in bf16 --dtype_out f32 --emulate-bf16-mmul-with-bfp16 true --trace_size 0 > build/aie_256x3328x2304_32x32x32_8c.mlir
mkdir -p build
cd build && /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie/bin/clang++ -O2 -std=c++20 --target=aie2p-none-unknown-elf -Wno-parentheses -Wno-attributes -Wno-macro-redefined -Wno-empty-body -DNDEBUG -I /scratch/luisr/mlir-aie/install/include  -Dbf16_f32_ONLY -DDIM_M=32 -DDIM_K=32 -DDIM_N=32 -DAIE_API_EMULATE_BFLOAT16_MMUL_WITH_BFP16 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_32x32x32.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_256x3328x2304_32x32x32_8c.xclbin \
			--no-xchesscc --no-xbridge --peano /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie \
			--aie-generate-npu-insts --npu-insts-name=insts_256x3328x2304_32x32x32_8c.txt ../build/aie_256x3328x2304_32x32x32_8c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_256x3328x2304_32x32x32_8c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_256x3328x2304_32x32x32_8c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_256x3328x2304_32x32x32_8c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_256x3328x2304_32x32x32_8c.xclbin -i build/insts_256x3328x2304_32x32x32_8c.txt -k MLIR_AIE -M 256 -K 3328 -N 2304 --iters 20 --warmup 10 --b_col_maj 0





















Avg NPU matmul time: 3391.8us.
Avg NPU gflops: 1157.46

Min NPU matmul time: 2597us.
Max NPU gflops: 1511.69

Max NPU matmul time: 6776us.
Min NPU gflops: 579.378

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=float -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.3s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 32 -k 32 -n 32 --n-aie-cols 8 --b-col-maj 0 --dev npu2 -M 256 -K 3328 -N 3328 --dtype_in bf16 --dtype_out f32 --emulate-bf16-mmul-with-bfp16 true --trace_size 0 > build/aie_256x3328x3328_32x32x32_8c.mlir
mkdir -p build
cd build && /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie/bin/clang++ -O2 -std=c++20 --target=aie2p-none-unknown-elf -Wno-parentheses -Wno-attributes -Wno-macro-redefined -Wno-empty-body -DNDEBUG -I /scratch/luisr/mlir-aie/install/include  -Dbf16_f32_ONLY -DDIM_M=32 -DDIM_K=32 -DDIM_N=32 -DAIE_API_EMULATE_BFLOAT16_MMUL_WITH_BFP16 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_32x32x32.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_256x3328x3328_32x32x32_8c.xclbin \
			--no-xchesscc --no-xbridge --peano /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie \
			--aie-generate-npu-insts --npu-insts-name=insts_256x3328x3328_32x32x32_8c.txt ../build/aie_256x3328x3328_32x32x32_8c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_256x3328x3328_32x32x32_8c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_256x3328x3328_32x32x32_8c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_256x3328x3328_32x32x32_8c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_256x3328x3328_32x32x32_8c.xclbin -i build/insts_256x3328x3328_32x32x32_8c.txt -k MLIR_AIE -M 256 -K 3328 -N 3328 --iters 20 --warmup 10 --b_col_maj 0





















Avg NPU matmul time: 4256.1us.
Avg NPU gflops: 1332.37

Min NPU matmul time: 3519us.
Max NPU gflops: 1611.45

Max NPU matmul time: 6660us.
Min NPU gflops: 851.456

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=float -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.3s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 32 -k 32 -n 32 --n-aie-cols 8 --b-col-maj 0 --dev npu2 -M 256 -K 3328 -N 4352 --dtype_in bf16 --dtype_out f32 --emulate-bf16-mmul-with-bfp16 true --trace_size 0 > build/aie_256x3328x4352_32x32x32_8c.mlir
mkdir -p build
cd build && /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie/bin/clang++ -O2 -std=c++20 --target=aie2p-none-unknown-elf -Wno-parentheses -Wno-attributes -Wno-macro-redefined -Wno-empty-body -DNDEBUG -I /scratch/luisr/mlir-aie/install/include  -Dbf16_f32_ONLY -DDIM_M=32 -DDIM_K=32 -DDIM_N=32 -DAIE_API_EMULATE_BFLOAT16_MMUL_WITH_BFP16 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_32x32x32.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_256x3328x4352_32x32x32_8c.xclbin \
			--no-xchesscc --no-xbridge --peano /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie \
			--aie-generate-npu-insts --npu-insts-name=insts_256x3328x4352_32x32x32_8c.txt ../build/aie_256x3328x4352_32x32x32_8c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_256x3328x4352_32x32x32_8c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_256x3328x4352_32x32x32_8c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_256x3328x4352_32x32x32_8c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_256x3328x4352_32x32x32_8c.xclbin -i build/insts_256x3328x4352_32x32x32_8c.txt -k MLIR_AIE -M 256 -K 3328 -N 4352 --iters 20 --warmup 10 --b_col_maj 0





















Avg NPU matmul time: 5400.3us.
Avg NPU gflops: 1373.17

Min NPU matmul time: 4371us.
Max NPU gflops: 1696.53

Max NPU matmul time: 7835us.
Min NPU gflops: 946.462

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=float -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.2s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 32 -k 32 -n 32 --n-aie-cols 8 --b-col-maj 0 --dev npu2 -M 256 -K 4352 -N 256 --dtype_in bf16 --dtype_out f32 --emulate-bf16-mmul-with-bfp16 true --trace_size 0 > build/aie_256x4352x256_32x32x32_8c.mlir
mkdir -p build
cd build && /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie/bin/clang++ -O2 -std=c++20 --target=aie2p-none-unknown-elf -Wno-parentheses -Wno-attributes -Wno-macro-redefined -Wno-empty-body -DNDEBUG -I /scratch/luisr/mlir-aie/install/include  -Dbf16_f32_ONLY -DDIM_M=32 -DDIM_K=32 -DDIM_N=32 -DAIE_API_EMULATE_BFLOAT16_MMUL_WITH_BFP16 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_32x32x32.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_256x4352x256_32x32x32_8c.xclbin \
			--no-xchesscc --no-xbridge --peano /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie \
			--aie-generate-npu-insts --npu-insts-name=insts_256x4352x256_32x32x32_8c.txt ../build/aie_256x4352x256_32x32x32_8c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_256x4352x256_32x32x32_8c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_256x4352x256_32x32x32_8c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_256x4352x256_32x32x32_8c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_256x4352x256_32x32x32_8c.xclbin -i build/insts_256x4352x256_32x32x32_8c.txt -k MLIR_AIE -M 256 -K 4352 -N 256 --iters 20 --warmup 10 --b_col_maj 0

Avg NPU matmul time: 1882.4us.
Avg NPU gflops: 303.031

Min NPU matmul time: 335us.
Max NPU gflops: 1702.76

Max NPU matmul time: 4159us.
Min NPU gflops: 137.154

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=float -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.3s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 32 -k 32 -n 32 --n-aie-cols 8 --b-col-maj 0 --dev npu2 -M 256 -K 4352 -N 1280 --dtype_in bf16 --dtype_out f32 --emulate-bf16-mmul-with-bfp16 true --trace_size 0 > build/aie_256x4352x1280_32x32x32_8c.mlir
mkdir -p build
cd build && /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie/bin/clang++ -O2 -std=c++20 --target=aie2p-none-unknown-elf -Wno-parentheses -Wno-attributes -Wno-macro-redefined -Wno-empty-body -DNDEBUG -I /scratch/luisr/mlir-aie/install/include  -Dbf16_f32_ONLY -DDIM_M=32 -DDIM_K=32 -DDIM_N=32 -DAIE_API_EMULATE_BFLOAT16_MMUL_WITH_BFP16 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_32x32x32.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_256x4352x1280_32x32x32_8c.xclbin \
			--no-xchesscc --no-xbridge --peano /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie \
			--aie-generate-npu-insts --npu-insts-name=insts_256x4352x1280_32x32x32_8c.txt ../build/aie_256x4352x1280_32x32x32_8c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_256x4352x1280_32x32x32_8c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_256x4352x1280_32x32x32_8c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_256x4352x1280_32x32x32_8c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_256x4352x1280_32x32x32_8c.xclbin -i build/insts_256x4352x1280_32x32x32_8c.txt -k MLIR_AIE -M 256 -K 4352 -N 1280 --iters 20 --warmup 10 --b_col_maj 0





















Avg NPU matmul time: 2512.65us.
Avg NPU gflops: 1135.11

Min NPU matmul time: 1882us.
Max NPU gflops: 1515.48

Max NPU matmul time: 4405us.
Min NPU gflops: 647.475

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=float -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.3s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 32 -k 32 -n 32 --n-aie-cols 8 --b-col-maj 0 --dev npu2 -M 256 -K 4352 -N 2304 --dtype_in bf16 --dtype_out f32 --emulate-bf16-mmul-with-bfp16 true --trace_size 0 > build/aie_256x4352x2304_32x32x32_8c.mlir
mkdir -p build
cd build && /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie/bin/clang++ -O2 -std=c++20 --target=aie2p-none-unknown-elf -Wno-parentheses -Wno-attributes -Wno-macro-redefined -Wno-empty-body -DNDEBUG -I /scratch/luisr/mlir-aie/install/include  -Dbf16_f32_ONLY -DDIM_M=32 -DDIM_K=32 -DDIM_N=32 -DAIE_API_EMULATE_BFLOAT16_MMUL_WITH_BFP16 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_32x32x32.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_256x4352x2304_32x32x32_8c.xclbin \
			--no-xchesscc --no-xbridge --peano /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie \
			--aie-generate-npu-insts --npu-insts-name=insts_256x4352x2304_32x32x32_8c.txt ../build/aie_256x4352x2304_32x32x32_8c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_256x4352x2304_32x32x32_8c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_256x4352x2304_32x32x32_8c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_256x4352x2304_32x32x32_8c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_256x4352x2304_32x32x32_8c.xclbin -i build/insts_256x4352x2304_32x32x32_8c.txt -k MLIR_AIE -M 256 -K 4352 -N 2304 --iters 20 --warmup 10 --b_col_maj 0





















Avg NPU matmul time: 3697.1us.
Avg NPU gflops: 1388.61

Min NPU matmul time: 2831us.
Max NPU gflops: 1813.43

Max NPU matmul time: 6818us.
Min NPU gflops: 752.982

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=float -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.3s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 32 -k 32 -n 32 --n-aie-cols 8 --b-col-maj 0 --dev npu2 -M 256 -K 4352 -N 3328 --dtype_in bf16 --dtype_out f32 --emulate-bf16-mmul-with-bfp16 true --trace_size 0 > build/aie_256x4352x3328_32x32x32_8c.mlir
mkdir -p build
cd build && /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie/bin/clang++ -O2 -std=c++20 --target=aie2p-none-unknown-elf -Wno-parentheses -Wno-attributes -Wno-macro-redefined -Wno-empty-body -DNDEBUG -I /scratch/luisr/mlir-aie/install/include  -Dbf16_f32_ONLY -DDIM_M=32 -DDIM_K=32 -DDIM_N=32 -DAIE_API_EMULATE_BFLOAT16_MMUL_WITH_BFP16 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_32x32x32.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_256x4352x3328_32x32x32_8c.xclbin \
			--no-xchesscc --no-xbridge --peano /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie \
			--aie-generate-npu-insts --npu-insts-name=insts_256x4352x3328_32x32x32_8c.txt ../build/aie_256x4352x3328_32x32x32_8c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_256x4352x3328_32x32x32_8c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_256x4352x3328_32x32x32_8c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_256x4352x3328_32x32x32_8c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_256x4352x3328_32x32x32_8c.xclbin -i build/insts_256x4352x3328_32x32x32_8c.txt -k MLIR_AIE -M 256 -K 4352 -N 3328 --iters 20 --warmup 10 --b_col_maj 0





















Avg NPU matmul time: 5368.25us.
Avg NPU gflops: 1381.37

Min NPU matmul time: 4316us.
Max NPU gflops: 1718.15

Max NPU matmul time: 7992us.
Min NPU gflops: 927.869

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=float -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.2s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 32 -k 32 -n 32 --n-aie-cols 8 --b-col-maj 0 --dev npu2 -M 256 -K 4352 -N 4352 --dtype_in bf16 --dtype_out f32 --emulate-bf16-mmul-with-bfp16 true --trace_size 0 > build/aie_256x4352x4352_32x32x32_8c.mlir
mkdir -p build
cd build && /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie/bin/clang++ -O2 -std=c++20 --target=aie2p-none-unknown-elf -Wno-parentheses -Wno-attributes -Wno-macro-redefined -Wno-empty-body -DNDEBUG -I /scratch/luisr/mlir-aie/install/include  -Dbf16_f32_ONLY -DDIM_M=32 -DDIM_K=32 -DDIM_N=32 -DAIE_API_EMULATE_BFLOAT16_MMUL_WITH_BFP16 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_32x32x32.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_256x4352x4352_32x32x32_8c.xclbin \
			--no-xchesscc --no-xbridge --peano /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie \
			--aie-generate-npu-insts --npu-insts-name=insts_256x4352x4352_32x32x32_8c.txt ../build/aie_256x4352x4352_32x32x32_8c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_256x4352x4352_32x32x32_8c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_256x4352x4352_32x32x32_8c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_256x4352x4352_32x32x32_8c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_256x4352x4352_32x32x32_8c.xclbin -i build/insts_256x4352x4352_32x32x32_8c.txt -k MLIR_AIE -M 256 -K 4352 -N 4352 --iters 20 --warmup 10 --b_col_maj 0





















Avg NPU matmul time: 8960.25us.
Avg NPU gflops: 1082.25

Min NPU matmul time: 6252us.
Max NPU gflops: 1551.06

Max NPU matmul time: 9448us.
Min NPU gflops: 1026.38

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=float -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.3s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 32 -k 32 -n 32 --n-aie-cols 8 --b-col-maj 0 --dev npu2 -M 1280 -K 256 -N 256 --dtype_in bf16 --dtype_out f32 --emulate-bf16-mmul-with-bfp16 true --trace_size 0 > build/aie_1280x256x256_32x32x32_8c.mlir
mkdir -p build
cd build && /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie/bin/clang++ -O2 -std=c++20 --target=aie2p-none-unknown-elf -Wno-parentheses -Wno-attributes -Wno-macro-redefined -Wno-empty-body -DNDEBUG -I /scratch/luisr/mlir-aie/install/include  -Dbf16_f32_ONLY -DDIM_M=32 -DDIM_K=32 -DDIM_N=32 -DAIE_API_EMULATE_BFLOAT16_MMUL_WITH_BFP16 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_32x32x32.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_1280x256x256_32x32x32_8c.xclbin \
			--no-xchesscc --no-xbridge --peano /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie \
			--aie-generate-npu-insts --npu-insts-name=insts_1280x256x256_32x32x32_8c.txt ../build/aie_1280x256x256_32x32x32_8c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_1280x256x256_32x32x32_8c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_1280x256x256_32x32x32_8c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_1280x256x256_32x32x32_8c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_1280x256x256_32x32x32_8c.xclbin -i build/insts_1280x256x256_32x32x32_8c.txt -k MLIR_AIE -M 1280 -K 256 -N 256 --iters 20 --warmup 10 --b_col_maj 0

Avg NPU matmul time: 915.45us.
Avg NPU gflops: 183.267

Min NPU matmul time: 190us.
Max NPU gflops: 883.011

Max NPU matmul time: 3739us.
Min NPU gflops: 44.8709

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=float -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.3s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 32 -k 32 -n 32 --n-aie-cols 8 --b-col-maj 0 --dev npu2 -M 1280 -K 256 -N 1280 --dtype_in bf16 --dtype_out f32 --emulate-bf16-mmul-with-bfp16 true --trace_size 0 > build/aie_1280x256x1280_32x32x32_8c.mlir
mkdir -p build
cd build && /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie/bin/clang++ -O2 -std=c++20 --target=aie2p-none-unknown-elf -Wno-parentheses -Wno-attributes -Wno-macro-redefined -Wno-empty-body -DNDEBUG -I /scratch/luisr/mlir-aie/install/include  -Dbf16_f32_ONLY -DDIM_M=32 -DDIM_K=32 -DDIM_N=32 -DAIE_API_EMULATE_BFLOAT16_MMUL_WITH_BFP16 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_32x32x32.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_1280x256x1280_32x32x32_8c.xclbin \
			--no-xchesscc --no-xbridge --peano /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie \
			--aie-generate-npu-insts --npu-insts-name=insts_1280x256x1280_32x32x32_8c.txt ../build/aie_1280x256x1280_32x32x32_8c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_1280x256x1280_32x32x32_8c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_1280x256x1280_32x32x32_8c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_1280x256x1280_32x32x32_8c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_1280x256x1280_32x32x32_8c.xclbin -i build/insts_1280x256x1280_32x32x32_8c.txt -k MLIR_AIE -M 1280 -K 256 -N 1280 --iters 20 --warmup 10 --b_col_maj 0

Avg NPU matmul time: 2504.6us.
Avg NPU gflops: 334.928

Min NPU matmul time: 584us.
Max NPU gflops: 1436.41

Max NPU matmul time: 4717us.
Min NPU gflops: 177.838

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=float -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.2s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 32 -k 32 -n 32 --n-aie-cols 8 --b-col-maj 0 --dev npu2 -M 1280 -K 256 -N 2304 --dtype_in bf16 --dtype_out f32 --emulate-bf16-mmul-with-bfp16 true --trace_size 0 > build/aie_1280x256x2304_32x32x32_8c.mlir
mkdir -p build
cd build && /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie/bin/clang++ -O2 -std=c++20 --target=aie2p-none-unknown-elf -Wno-parentheses -Wno-attributes -Wno-macro-redefined -Wno-empty-body -DNDEBUG -I /scratch/luisr/mlir-aie/install/include  -Dbf16_f32_ONLY -DDIM_M=32 -DDIM_K=32 -DDIM_N=32 -DAIE_API_EMULATE_BFLOAT16_MMUL_WITH_BFP16 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_32x32x32.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_1280x256x2304_32x32x32_8c.xclbin \
			--no-xchesscc --no-xbridge --peano /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie \
			--aie-generate-npu-insts --npu-insts-name=insts_1280x256x2304_32x32x32_8c.txt ../build/aie_1280x256x2304_32x32x32_8c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_1280x256x2304_32x32x32_8c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_1280x256x2304_32x32x32_8c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_1280x256x2304_32x32x32_8c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_1280x256x2304_32x32x32_8c.xclbin -i build/insts_1280x256x2304_32x32x32_8c.txt -k MLIR_AIE -M 1280 -K 256 -N 2304 --iters 20 --warmup 10 --b_col_maj 0

Avg NPU matmul time: 4310.9us.
Avg NPU gflops: 350.263

Min NPU matmul time: 932us.
Max NPU gflops: 1620.12

Max NPU matmul time: 4972us.
Min NPU gflops: 303.691

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=float -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.3s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 32 -k 32 -n 32 --n-aie-cols 8 --b-col-maj 0 --dev npu2 -M 1280 -K 256 -N 3328 --dtype_in bf16 --dtype_out f32 --emulate-bf16-mmul-with-bfp16 true --trace_size 0 > build/aie_1280x256x3328_32x32x32_8c.mlir
mkdir -p build
cd build && /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie/bin/clang++ -O2 -std=c++20 --target=aie2p-none-unknown-elf -Wno-parentheses -Wno-attributes -Wno-macro-redefined -Wno-empty-body -DNDEBUG -I /scratch/luisr/mlir-aie/install/include  -Dbf16_f32_ONLY -DDIM_M=32 -DDIM_K=32 -DDIM_N=32 -DAIE_API_EMULATE_BFLOAT16_MMUL_WITH_BFP16 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_32x32x32.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_1280x256x3328_32x32x32_8c.xclbin \
			--no-xchesscc --no-xbridge --peano /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie \
			--aie-generate-npu-insts --npu-insts-name=insts_1280x256x3328_32x32x32_8c.txt ../build/aie_1280x256x3328_32x32x32_8c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_1280x256x3328_32x32x32_8c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_1280x256x3328_32x32x32_8c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_1280x256x3328_32x32x32_8c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_1280x256x3328_32x32x32_8c.xclbin -i build/insts_1280x256x3328_32x32x32_8c.txt -k MLIR_AIE -M 1280 -K 256 -N 3328 --iters 20 --warmup 10 --b_col_maj 0





















Avg NPU matmul time: 1841.95us.
Avg NPU gflops: 1184.09

Min NPU matmul time: 1637us.
Max NPU gflops: 1332.34

Max NPU matmul time: 2497us.
Min NPU gflops: 873.463

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=float -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.3s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 32 -k 32 -n 32 --n-aie-cols 8 --b-col-maj 0 --dev npu2 -M 1280 -K 256 -N 4352 --dtype_in bf16 --dtype_out f32 --emulate-bf16-mmul-with-bfp16 true --trace_size 0 > build/aie_1280x256x4352_32x32x32_8c.mlir
mkdir -p build
cd build && /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie/bin/clang++ -O2 -std=c++20 --target=aie2p-none-unknown-elf -Wno-parentheses -Wno-attributes -Wno-macro-redefined -Wno-empty-body -DNDEBUG -I /scratch/luisr/mlir-aie/install/include  -Dbf16_f32_ONLY -DDIM_M=32 -DDIM_K=32 -DDIM_N=32 -DAIE_API_EMULATE_BFLOAT16_MMUL_WITH_BFP16 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_32x32x32.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_1280x256x4352_32x32x32_8c.xclbin \
			--no-xchesscc --no-xbridge --peano /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie \
			--aie-generate-npu-insts --npu-insts-name=insts_1280x256x4352_32x32x32_8c.txt ../build/aie_1280x256x4352_32x32x32_8c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_1280x256x4352_32x32x32_8c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_1280x256x4352_32x32x32_8c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_1280x256x4352_32x32x32_8c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_1280x256x4352_32x32x32_8c.xclbin -i build/insts_1280x256x4352_32x32x32_8c.txt -k MLIR_AIE -M 1280 -K 256 -N 4352 --iters 20 --warmup 10 --b_col_maj 0





















Avg NPU matmul time: 2270.3us.
Avg NPU gflops: 1256.28

Min NPU matmul time: 1971us.
Max NPU gflops: 1447.05

Max NPU matmul time: 2982us.
Min NPU gflops: 956.448

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=float -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.2s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 32 -k 32 -n 32 --n-aie-cols 8 --b-col-maj 0 --dev npu2 -M 1280 -K 1280 -N 256 --dtype_in bf16 --dtype_out f32 --emulate-bf16-mmul-with-bfp16 true --trace_size 0 > build/aie_1280x1280x256_32x32x32_8c.mlir
mkdir -p build
cd build && /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie/bin/clang++ -O2 -std=c++20 --target=aie2p-none-unknown-elf -Wno-parentheses -Wno-attributes -Wno-macro-redefined -Wno-empty-body -DNDEBUG -I /scratch/luisr/mlir-aie/install/include  -Dbf16_f32_ONLY -DDIM_M=32 -DDIM_K=32 -DDIM_N=32 -DAIE_API_EMULATE_BFLOAT16_MMUL_WITH_BFP16 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_32x32x32.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_1280x1280x256_32x32x32_8c.xclbin \
			--no-xchesscc --no-xbridge --peano /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie \
			--aie-generate-npu-insts --npu-insts-name=insts_1280x1280x256_32x32x32_8c.txt ../build/aie_1280x1280x256_32x32x32_8c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_1280x1280x256_32x32x32_8c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_1280x1280x256_32x32x32_8c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_1280x1280x256_32x32x32_8c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_1280x1280x256_32x32x32_8c.xclbin -i build/insts_1280x1280x256_32x32x32_8c.txt -k MLIR_AIE -M 1280 -K 1280 -N 256 --iters 20 --warmup 10 --b_col_maj 0

Avg NPU matmul time: 2183.8us.
Avg NPU gflops: 384.129

Min NPU matmul time: 512us.
Max NPU gflops: 1638.4

Max NPU matmul time: 4650us.
Min NPU gflops: 180.4

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=float -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.3s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 32 -k 32 -n 32 --n-aie-cols 8 --b-col-maj 0 --dev npu2 -M 1280 -K 1280 -N 1280 --dtype_in bf16 --dtype_out f32 --emulate-bf16-mmul-with-bfp16 true --trace_size 0 > build/aie_1280x1280x1280_32x32x32_8c.mlir
mkdir -p build
cd build && /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie/bin/clang++ -O2 -std=c++20 --target=aie2p-none-unknown-elf -Wno-parentheses -Wno-attributes -Wno-macro-redefined -Wno-empty-body -DNDEBUG -I /scratch/luisr/mlir-aie/install/include  -Dbf16_f32_ONLY -DDIM_M=32 -DDIM_K=32 -DDIM_N=32 -DAIE_API_EMULATE_BFLOAT16_MMUL_WITH_BFP16 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_32x32x32.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_1280x1280x1280_32x32x32_8c.xclbin \
			--no-xchesscc --no-xbridge --peano /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie \
			--aie-generate-npu-insts --npu-insts-name=insts_1280x1280x1280_32x32x32_8c.txt ../build/aie_1280x1280x1280_32x32x32_8c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_1280x1280x1280_32x32x32_8c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_1280x1280x1280_32x32x32_8c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_1280x1280x1280_32x32x32_8c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_1280x1280x1280_32x32x32_8c.xclbin -i build/insts_1280x1280x1280_32x32x32_8c.txt -k MLIR_AIE -M 1280 -K 1280 -N 1280 --iters 20 --warmup 10 --b_col_maj 0





















Avg NPU matmul time: 2875.1us.
Avg NPU gflops: 1458.84

Min NPU matmul time: 2183us.
Max NPU gflops: 1921.35

Max NPU matmul time: 3297us.
Min NPU gflops: 1272.16

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=float -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.3s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 32 -k 32 -n 32 --n-aie-cols 8 --b-col-maj 0 --dev npu2 -M 1280 -K 1280 -N 2304 --dtype_in bf16 --dtype_out f32 --emulate-bf16-mmul-with-bfp16 true --trace_size 0 > build/aie_1280x1280x2304_32x32x32_8c.mlir
mkdir -p build
cd build && /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie/bin/clang++ -O2 -std=c++20 --target=aie2p-none-unknown-elf -Wno-parentheses -Wno-attributes -Wno-macro-redefined -Wno-empty-body -DNDEBUG -I /scratch/luisr/mlir-aie/install/include  -Dbf16_f32_ONLY -DDIM_M=32 -DDIM_K=32 -DDIM_N=32 -DAIE_API_EMULATE_BFLOAT16_MMUL_WITH_BFP16 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_32x32x32.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_1280x1280x2304_32x32x32_8c.xclbin \
			--no-xchesscc --no-xbridge --peano /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie \
			--aie-generate-npu-insts --npu-insts-name=insts_1280x1280x2304_32x32x32_8c.txt ../build/aie_1280x1280x2304_32x32x32_8c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_1280x1280x2304_32x32x32_8c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_1280x1280x2304_32x32x32_8c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_1280x1280x2304_32x32x32_8c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_1280x1280x2304_32x32x32_8c.xclbin -i build/insts_1280x1280x2304_32x32x32_8c.txt -k MLIR_AIE -M 1280 -K 1280 -N 2304 --iters 20 --warmup 10 --b_col_maj 0





















Avg NPU matmul time: 5160.3us.
Avg NPU gflops: 1463.04

Min NPU matmul time: 4269us.
Max NPU gflops: 1768.5

Max NPU matmul time: 8411us.
Min NPU gflops: 897.604

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=float -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.3s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 32 -k 32 -n 32 --n-aie-cols 8 --b-col-maj 0 --dev npu2 -M 1280 -K 1280 -N 3328 --dtype_in bf16 --dtype_out f32 --emulate-bf16-mmul-with-bfp16 true --trace_size 0 > build/aie_1280x1280x3328_32x32x32_8c.mlir
mkdir -p build
cd build && /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie/bin/clang++ -O2 -std=c++20 --target=aie2p-none-unknown-elf -Wno-parentheses -Wno-attributes -Wno-macro-redefined -Wno-empty-body -DNDEBUG -I /scratch/luisr/mlir-aie/install/include  -Dbf16_f32_ONLY -DDIM_M=32 -DDIM_K=32 -DDIM_N=32 -DAIE_API_EMULATE_BFLOAT16_MMUL_WITH_BFP16 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_32x32x32.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_1280x1280x3328_32x32x32_8c.xclbin \
			--no-xchesscc --no-xbridge --peano /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie \
			--aie-generate-npu-insts --npu-insts-name=insts_1280x1280x3328_32x32x32_8c.txt ../build/aie_1280x1280x3328_32x32x32_8c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_1280x1280x3328_32x32x32_8c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_1280x1280x3328_32x32x32_8c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_1280x1280x3328_32x32x32_8c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_1280x1280x3328_32x32x32_8c.xclbin -i build/insts_1280x1280x3328_32x32x32_8c.txt -k MLIR_AIE -M 1280 -K 1280 -N 3328 --iters 20 --warmup 10 --b_col_maj 0





















Avg NPU matmul time: 6846.65us.
Avg NPU gflops: 1592.78

Min NPU matmul time: 6167us.
Max NPU gflops: 1768.31

Max NPU matmul time: 10147us.
Min NPU gflops: 1074.72

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=float -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.3s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 32 -k 32 -n 32 --n-aie-cols 8 --b-col-maj 0 --dev npu2 -M 1280 -K 1280 -N 4352 --dtype_in bf16 --dtype_out f32 --emulate-bf16-mmul-with-bfp16 true --trace_size 0 > build/aie_1280x1280x4352_32x32x32_8c.mlir
mkdir -p build
cd build && /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie/bin/clang++ -O2 -std=c++20 --target=aie2p-none-unknown-elf -Wno-parentheses -Wno-attributes -Wno-macro-redefined -Wno-empty-body -DNDEBUG -I /scratch/luisr/mlir-aie/install/include  -Dbf16_f32_ONLY -DDIM_M=32 -DDIM_K=32 -DDIM_N=32 -DAIE_API_EMULATE_BFLOAT16_MMUL_WITH_BFP16 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_32x32x32.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_1280x1280x4352_32x32x32_8c.xclbin \
			--no-xchesscc --no-xbridge --peano /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie \
			--aie-generate-npu-insts --npu-insts-name=insts_1280x1280x4352_32x32x32_8c.txt ../build/aie_1280x1280x4352_32x32x32_8c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_1280x1280x4352_32x32x32_8c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_1280x1280x4352_32x32x32_8c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_1280x1280x4352_32x32x32_8c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_1280x1280x4352_32x32x32_8c.xclbin -i build/insts_1280x1280x4352_32x32x32_8c.txt -k MLIR_AIE -M 1280 -K 1280 -N 4352 --iters 20 --warmup 10 --b_col_maj 0





















Avg NPU matmul time: 8645.2us.
Avg NPU gflops: 1649.54

Min NPU matmul time: 8124us.
Max NPU gflops: 1755.37

Max NPU matmul time: 11805us.
Min NPU gflops: 1208.02

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=float -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.3s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 32 -k 32 -n 32 --n-aie-cols 8 --b-col-maj 0 --dev npu2 -M 1280 -K 2304 -N 256 --dtype_in bf16 --dtype_out f32 --emulate-bf16-mmul-with-bfp16 true --trace_size 0 > build/aie_1280x2304x256_32x32x32_8c.mlir
mkdir -p build
cd build && /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie/bin/clang++ -O2 -std=c++20 --target=aie2p-none-unknown-elf -Wno-parentheses -Wno-attributes -Wno-macro-redefined -Wno-empty-body -DNDEBUG -I /scratch/luisr/mlir-aie/install/include  -Dbf16_f32_ONLY -DDIM_M=32 -DDIM_K=32 -DDIM_N=32 -DAIE_API_EMULATE_BFLOAT16_MMUL_WITH_BFP16 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_32x32x32.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_1280x2304x256_32x32x32_8c.xclbin \
			--no-xchesscc --no-xbridge --peano /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie \
			--aie-generate-npu-insts --npu-insts-name=insts_1280x2304x256_32x32x32_8c.txt ../build/aie_1280x2304x256_32x32x32_8c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_1280x2304x256_32x32x32_8c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_1280x2304x256_32x32x32_8c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_1280x2304x256_32x32x32_8c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_1280x2304x256_32x32x32_8c.xclbin -i build/insts_1280x2304x256_32x32x32_8c.txt -k MLIR_AIE -M 1280 -K 2304 -N 256 --iters 20 --warmup 10 --b_col_maj 0

Avg NPU matmul time: 4014.7us.
Avg NPU gflops: 376.105

Min NPU matmul time: 770us.
Max NPU gflops: 1960.97

Max NPU matmul time: 4869us.
Min NPU gflops: 310.115

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=float -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.3s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 32 -k 32 -n 32 --n-aie-cols 8 --b-col-maj 0 --dev npu2 -M 1280 -K 2304 -N 1280 --dtype_in bf16 --dtype_out f32 --emulate-bf16-mmul-with-bfp16 true --trace_size 0 > build/aie_1280x2304x1280_32x32x32_8c.mlir
mkdir -p build
cd build && /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie/bin/clang++ -O2 -std=c++20 --target=aie2p-none-unknown-elf -Wno-parentheses -Wno-attributes -Wno-macro-redefined -Wno-empty-body -DNDEBUG -I /scratch/luisr/mlir-aie/install/include  -Dbf16_f32_ONLY -DDIM_M=32 -DDIM_K=32 -DDIM_N=32 -DAIE_API_EMULATE_BFLOAT16_MMUL_WITH_BFP16 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_32x32x32.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_1280x2304x1280_32x32x32_8c.xclbin \
			--no-xchesscc --no-xbridge --peano /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie \
			--aie-generate-npu-insts --npu-insts-name=insts_1280x2304x1280_32x32x32_8c.txt ../build/aie_1280x2304x1280_32x32x32_8c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_1280x2304x1280_32x32x32_8c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_1280x2304x1280_32x32x32_8c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_1280x2304x1280_32x32x32_8c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_1280x2304x1280_32x32x32_8c.xclbin -i build/insts_1280x2304x1280_32x32x32_8c.txt -k MLIR_AIE -M 1280 -K 2304 -N 1280 --iters 20 --warmup 10 --b_col_maj 0





















Avg NPU matmul time: 4985.9us.
Avg NPU gflops: 1514.22

Min NPU matmul time: 3986us.
Max NPU gflops: 1894.07

Max NPU matmul time: 8373us.
Min NPU gflops: 901.678

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=float -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.3s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 32 -k 32 -n 32 --n-aie-cols 8 --b-col-maj 0 --dev npu2 -M 1280 -K 2304 -N 2304 --dtype_in bf16 --dtype_out f32 --emulate-bf16-mmul-with-bfp16 true --trace_size 0 > build/aie_1280x2304x2304_32x32x32_8c.mlir
mkdir -p build
cd build && /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie/bin/clang++ -O2 -std=c++20 --target=aie2p-none-unknown-elf -Wno-parentheses -Wno-attributes -Wno-macro-redefined -Wno-empty-body -DNDEBUG -I /scratch/luisr/mlir-aie/install/include  -Dbf16_f32_ONLY -DDIM_M=32 -DDIM_K=32 -DDIM_N=32 -DAIE_API_EMULATE_BFLOAT16_MMUL_WITH_BFP16 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_32x32x32.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_1280x2304x2304_32x32x32_8c.xclbin \
			--no-xchesscc --no-xbridge --peano /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie \
			--aie-generate-npu-insts --npu-insts-name=insts_1280x2304x2304_32x32x32_8c.txt ../build/aie_1280x2304x2304_32x32x32_8c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_1280x2304x2304_32x32x32_8c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_1280x2304x2304_32x32x32_8c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_1280x2304x2304_32x32x32_8c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_1280x2304x2304_32x32x32_8c.xclbin -i build/insts_1280x2304x2304_32x32x32_8c.txt -k MLIR_AIE -M 1280 -K 2304 -N 2304 --iters 20 --warmup 10 --b_col_maj 0





















Avg NPU matmul time: 8325.8us.
Avg NPU gflops: 1632.22

Min NPU matmul time: 7313us.
Max NPU gflops: 1858.27

Max NPU matmul time: 10420us.
Min NPU gflops: 1304.18

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=float -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.3s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 32 -k 32 -n 32 --n-aie-cols 8 --b-col-maj 0 --dev npu2 -M 1280 -K 2304 -N 3328 --dtype_in bf16 --dtype_out f32 --emulate-bf16-mmul-with-bfp16 true --trace_size 0 > build/aie_1280x2304x3328_32x32x32_8c.mlir
mkdir -p build
cd build && /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie/bin/clang++ -O2 -std=c++20 --target=aie2p-none-unknown-elf -Wno-parentheses -Wno-attributes -Wno-macro-redefined -Wno-empty-body -DNDEBUG -I /scratch/luisr/mlir-aie/install/include  -Dbf16_f32_ONLY -DDIM_M=32 -DDIM_K=32 -DDIM_N=32 -DAIE_API_EMULATE_BFLOAT16_MMUL_WITH_BFP16 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_32x32x32.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_1280x2304x3328_32x32x32_8c.xclbin \
			--no-xchesscc --no-xbridge --peano /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie \
			--aie-generate-npu-insts --npu-insts-name=insts_1280x2304x3328_32x32x32_8c.txt ../build/aie_1280x2304x3328_32x32x32_8c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_1280x2304x3328_32x32x32_8c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_1280x2304x3328_32x32x32_8c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_1280x2304x3328_32x32x32_8c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_1280x2304x3328_32x32x32_8c.xclbin -i build/insts_1280x2304x3328_32x32x32_8c.txt -k MLIR_AIE -M 1280 -K 2304 -N 3328 --iters 20 --warmup 10 --b_col_maj 0





















Avg NPU matmul time: 11483.7us.
Avg NPU gflops: 1709.33

Min NPU matmul time: 10484us.
Max NPU gflops: 1872.31

Max NPU matmul time: 13864us.
Min NPU gflops: 1415.85

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=float -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.3s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 32 -k 32 -n 32 --n-aie-cols 8 --b-col-maj 0 --dev npu2 -M 1280 -K 2304 -N 4352 --dtype_in bf16 --dtype_out f32 --emulate-bf16-mmul-with-bfp16 true --trace_size 0 > build/aie_1280x2304x4352_32x32x32_8c.mlir
mkdir -p build
cd build && /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie/bin/clang++ -O2 -std=c++20 --target=aie2p-none-unknown-elf -Wno-parentheses -Wno-attributes -Wno-macro-redefined -Wno-empty-body -DNDEBUG -I /scratch/luisr/mlir-aie/install/include  -Dbf16_f32_ONLY -DDIM_M=32 -DDIM_K=32 -DDIM_N=32 -DAIE_API_EMULATE_BFLOAT16_MMUL_WITH_BFP16 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_32x32x32.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_1280x2304x4352_32x32x32_8c.xclbin \
			--no-xchesscc --no-xbridge --peano /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie \
			--aie-generate-npu-insts --npu-insts-name=insts_1280x2304x4352_32x32x32_8c.txt ../build/aie_1280x2304x4352_32x32x32_8c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_1280x2304x4352_32x32x32_8c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_1280x2304x4352_32x32x32_8c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_1280x2304x4352_32x32x32_8c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_1280x2304x4352_32x32x32_8c.xclbin -i build/insts_1280x2304x4352_32x32x32_8c.txt -k MLIR_AIE -M 1280 -K 2304 -N 4352 --iters 20 --warmup 10 --b_col_maj 0





















Avg NPU matmul time: 15000.5us.
Avg NPU gflops: 1711.22

Min NPU matmul time: 14017us.
Max NPU gflops: 1831.29

Max NPU matmul time: 17928us.
Min NPU gflops: 1431.79

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=float -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.3s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 32 -k 32 -n 32 --n-aie-cols 8 --b-col-maj 0 --dev npu2 -M 1280 -K 3328 -N 256 --dtype_in bf16 --dtype_out f32 --emulate-bf16-mmul-with-bfp16 true --trace_size 0 > build/aie_1280x3328x256_32x32x32_8c.mlir
mkdir -p build
cd build && /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie/bin/clang++ -O2 -std=c++20 --target=aie2p-none-unknown-elf -Wno-parentheses -Wno-attributes -Wno-macro-redefined -Wno-empty-body -DNDEBUG -I /scratch/luisr/mlir-aie/install/include  -Dbf16_f32_ONLY -DDIM_M=32 -DDIM_K=32 -DDIM_N=32 -DAIE_API_EMULATE_BFLOAT16_MMUL_WITH_BFP16 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_32x32x32.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_1280x3328x256_32x32x32_8c.xclbin \
			--no-xchesscc --no-xbridge --peano /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie \
			--aie-generate-npu-insts --npu-insts-name=insts_1280x3328x256_32x32x32_8c.txt ../build/aie_1280x3328x256_32x32x32_8c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_1280x3328x256_32x32x32_8c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_1280x3328x256_32x32x32_8c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_1280x3328x256_32x32x32_8c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_1280x3328x256_32x32x32_8c.xclbin -i build/insts_1280x3328x256_32x32x32_8c.txt -k MLIR_AIE -M 1280 -K 3328 -N 256 --iters 20 --warmup 10 --b_col_maj 0





















Avg NPU matmul time: 1768.8us.
Avg NPU gflops: 1233.06

Min NPU matmul time: 1065us.
Max NPU gflops: 2047.92

Max NPU matmul time: 2548us.
Min NPU gflops: 855.98

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=float -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.3s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 32 -k 32 -n 32 --n-aie-cols 8 --b-col-maj 0 --dev npu2 -M 1280 -K 3328 -N 1280 --dtype_in bf16 --dtype_out f32 --emulate-bf16-mmul-with-bfp16 true --trace_size 0 > build/aie_1280x3328x1280_32x32x32_8c.mlir
mkdir -p build
cd build && /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie/bin/clang++ -O2 -std=c++20 --target=aie2p-none-unknown-elf -Wno-parentheses -Wno-attributes -Wno-macro-redefined -Wno-empty-body -DNDEBUG -I /scratch/luisr/mlir-aie/install/include  -Dbf16_f32_ONLY -DDIM_M=32 -DDIM_K=32 -DDIM_N=32 -DAIE_API_EMULATE_BFLOAT16_MMUL_WITH_BFP16 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_32x32x32.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_1280x3328x1280_32x32x32_8c.xclbin \
			--no-xchesscc --no-xbridge --peano /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie \
			--aie-generate-npu-insts --npu-insts-name=insts_1280x3328x1280_32x32x32_8c.txt ../build/aie_1280x3328x1280_32x32x32_8c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_1280x3328x1280_32x32x32_8c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_1280x3328x1280_32x32x32_8c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_1280x3328x1280_32x32x32_8c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_1280x3328x1280_32x32x32_8c.xclbin -i build/insts_1280x3328x1280_32x32x32_8c.txt -k MLIR_AIE -M 1280 -K 3328 -N 1280 --iters 20 --warmup 10 --b_col_maj 0





















Avg NPU matmul time: 7684.1us.
Avg NPU gflops: 1419.19

Min NPU matmul time: 6229us.
Max NPU gflops: 1750.71

Max NPU matmul time: 9571us.
Min NPU gflops: 1139.4

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=float -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.2s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 32 -k 32 -n 32 --n-aie-cols 8 --b-col-maj 0 --dev npu2 -M 1280 -K 3328 -N 2304 --dtype_in bf16 --dtype_out f32 --emulate-bf16-mmul-with-bfp16 true --trace_size 0 > build/aie_1280x3328x2304_32x32x32_8c.mlir
mkdir -p build
cd build && /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie/bin/clang++ -O2 -std=c++20 --target=aie2p-none-unknown-elf -Wno-parentheses -Wno-attributes -Wno-macro-redefined -Wno-empty-body -DNDEBUG -I /scratch/luisr/mlir-aie/install/include  -Dbf16_f32_ONLY -DDIM_M=32 -DDIM_K=32 -DDIM_N=32 -DAIE_API_EMULATE_BFLOAT16_MMUL_WITH_BFP16 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_32x32x32.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_1280x3328x2304_32x32x32_8c.xclbin \
			--no-xchesscc --no-xbridge --peano /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie \
			--aie-generate-npu-insts --npu-insts-name=insts_1280x3328x2304_32x32x32_8c.txt ../build/aie_1280x3328x2304_32x32x32_8c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_1280x3328x2304_32x32x32_8c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_1280x3328x2304_32x32x32_8c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_1280x3328x2304_32x32x32_8c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_1280x3328x2304_32x32x32_8c.xclbin -i build/insts_1280x3328x2304_32x32x32_8c.txt -k MLIR_AIE -M 1280 -K 3328 -N 2304 --iters 20 --warmup 10 --b_col_maj 0





















Avg NPU matmul time: 11417.8us.
Avg NPU gflops: 1719.18

Min NPU matmul time: 10763us.
Max NPU gflops: 1823.78

Max NPU matmul time: 14048us.
Min NPU gflops: 1397.31

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=float -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.2s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 32 -k 32 -n 32 --n-aie-cols 8 --b-col-maj 0 --dev npu2 -M 1280 -K 3328 -N 3328 --dtype_in bf16 --dtype_out f32 --emulate-bf16-mmul-with-bfp16 true --trace_size 0 > build/aie_1280x3328x3328_32x32x32_8c.mlir
mkdir -p build
cd build && /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie/bin/clang++ -O2 -std=c++20 --target=aie2p-none-unknown-elf -Wno-parentheses -Wno-attributes -Wno-macro-redefined -Wno-empty-body -DNDEBUG -I /scratch/luisr/mlir-aie/install/include  -Dbf16_f32_ONLY -DDIM_M=32 -DDIM_K=32 -DDIM_N=32 -DAIE_API_EMULATE_BFLOAT16_MMUL_WITH_BFP16 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_32x32x32.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_1280x3328x3328_32x32x32_8c.xclbin \
			--no-xchesscc --no-xbridge --peano /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie \
			--aie-generate-npu-insts --npu-insts-name=insts_1280x3328x3328_32x32x32_8c.txt ../build/aie_1280x3328x3328_32x32x32_8c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_1280x3328x3328_32x32x32_8c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_1280x3328x3328_32x32x32_8c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_1280x3328x3328_32x32x32_8c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_1280x3328x3328_32x32x32_8c.xclbin -i build/insts_1280x3328x3328_32x32x32_8c.txt -k MLIR_AIE -M 1280 -K 3328 -N 3328 --iters 20 --warmup 10 --b_col_maj 0





















Avg NPU matmul time: 16450.4us.
Avg NPU gflops: 1723.57

Min NPU matmul time: 15238us.
Max NPU gflops: 1860.71

Max NPU matmul time: 19764us.
Min NPU gflops: 1434.6

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=float -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.3s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 32 -k 32 -n 32 --n-aie-cols 8 --b-col-maj 0 --dev npu2 -M 1280 -K 3328 -N 4352 --dtype_in bf16 --dtype_out f32 --emulate-bf16-mmul-with-bfp16 true --trace_size 0 > build/aie_1280x3328x4352_32x32x32_8c.mlir
mkdir -p build
cd build && /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie/bin/clang++ -O2 -std=c++20 --target=aie2p-none-unknown-elf -Wno-parentheses -Wno-attributes -Wno-macro-redefined -Wno-empty-body -DNDEBUG -I /scratch/luisr/mlir-aie/install/include  -Dbf16_f32_ONLY -DDIM_M=32 -DDIM_K=32 -DDIM_N=32 -DAIE_API_EMULATE_BFLOAT16_MMUL_WITH_BFP16 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_32x32x32.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_1280x3328x4352_32x32x32_8c.xclbin \
			--no-xchesscc --no-xbridge --peano /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie \
			--aie-generate-npu-insts --npu-insts-name=insts_1280x3328x4352_32x32x32_8c.txt ../build/aie_1280x3328x4352_32x32x32_8c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_1280x3328x4352_32x32x32_8c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_1280x3328x4352_32x32x32_8c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_1280x3328x4352_32x32x32_8c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_1280x3328x4352_32x32x32_8c.xclbin -i build/insts_1280x3328x4352_32x32x32_8c.txt -k MLIR_AIE -M 1280 -K 3328 -N 4352 --iters 20 --warmup 10 --b_col_maj 0





















Avg NPU matmul time: 21643.9us.
Avg NPU gflops: 1713.07

Min NPU matmul time: 19557us.
Max NPU gflops: 1895.88

Max NPU matmul time: 24811us.
Min NPU gflops: 1494.4

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=float -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.3s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 32 -k 32 -n 32 --n-aie-cols 8 --b-col-maj 0 --dev npu2 -M 1280 -K 4352 -N 256 --dtype_in bf16 --dtype_out f32 --emulate-bf16-mmul-with-bfp16 true --trace_size 0 > build/aie_1280x4352x256_32x32x32_8c.mlir
mkdir -p build
cd build && /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie/bin/clang++ -O2 -std=c++20 --target=aie2p-none-unknown-elf -Wno-parentheses -Wno-attributes -Wno-macro-redefined -Wno-empty-body -DNDEBUG -I /scratch/luisr/mlir-aie/install/include  -Dbf16_f32_ONLY -DDIM_M=32 -DDIM_K=32 -DDIM_N=32 -DAIE_API_EMULATE_BFLOAT16_MMUL_WITH_BFP16 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_32x32x32.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_1280x4352x256_32x32x32_8c.xclbin \
			--no-xchesscc --no-xbridge --peano /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie \
			--aie-generate-npu-insts --npu-insts-name=insts_1280x4352x256_32x32x32_8c.txt ../build/aie_1280x4352x256_32x32x32_8c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_1280x4352x256_32x32x32_8c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_1280x4352x256_32x32x32_8c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_1280x4352x256_32x32x32_8c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_1280x4352x256_32x32x32_8c.xclbin -i build/insts_1280x4352x256_32x32x32_8c.txt -k MLIR_AIE -M 1280 -K 4352 -N 256 --iters 20 --warmup 10 --b_col_maj 0





















Avg NPU matmul time: 2269.9us.
Avg NPU gflops: 1256.5

Min NPU matmul time: 1666us.
Max NPU gflops: 1711.96

Max NPU matmul time: 4900us.
Min NPU gflops: 582.067

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=float -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.3s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 32 -k 32 -n 32 --n-aie-cols 8 --b-col-maj 0 --dev npu2 -M 1280 -K 4352 -N 1280 --dtype_in bf16 --dtype_out f32 --emulate-bf16-mmul-with-bfp16 true --trace_size 0 > build/aie_1280x4352x1280_32x32x32_8c.mlir
mkdir -p build
cd build && /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie/bin/clang++ -O2 -std=c++20 --target=aie2p-none-unknown-elf -Wno-parentheses -Wno-attributes -Wno-macro-redefined -Wno-empty-body -DNDEBUG -I /scratch/luisr/mlir-aie/install/include  -Dbf16_f32_ONLY -DDIM_M=32 -DDIM_K=32 -DDIM_N=32 -DAIE_API_EMULATE_BFLOAT16_MMUL_WITH_BFP16 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_32x32x32.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_1280x4352x1280_32x32x32_8c.xclbin \
			--no-xchesscc --no-xbridge --peano /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie \
			--aie-generate-npu-insts --npu-insts-name=insts_1280x4352x1280_32x32x32_8c.txt ../build/aie_1280x4352x1280_32x32x32_8c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_1280x4352x1280_32x32x32_8c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_1280x4352x1280_32x32x32_8c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_1280x4352x1280_32x32x32_8c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_1280x4352x1280_32x32x32_8c.xclbin -i build/insts_1280x4352x1280_32x32x32_8c.txt -k MLIR_AIE -M 1280 -K 4352 -N 1280 --iters 20 --warmup 10 --b_col_maj 0





















Avg NPU matmul time: 9071.15us.
Avg NPU gflops: 1572.09

Min NPU matmul time: 7424us.
Max NPU gflops: 1920.88

Max NPU matmul time: 11530us.
Min NPU gflops: 1236.83

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=float -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.3s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 32 -k 32 -n 32 --n-aie-cols 8 --b-col-maj 0 --dev npu2 -M 1280 -K 4352 -N 2304 --dtype_in bf16 --dtype_out f32 --emulate-bf16-mmul-with-bfp16 true --trace_size 0 > build/aie_1280x4352x2304_32x32x32_8c.mlir
mkdir -p build
cd build && /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie/bin/clang++ -O2 -std=c++20 --target=aie2p-none-unknown-elf -Wno-parentheses -Wno-attributes -Wno-macro-redefined -Wno-empty-body -DNDEBUG -I /scratch/luisr/mlir-aie/install/include  -Dbf16_f32_ONLY -DDIM_M=32 -DDIM_K=32 -DDIM_N=32 -DAIE_API_EMULATE_BFLOAT16_MMUL_WITH_BFP16 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_32x32x32.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_1280x4352x2304_32x32x32_8c.xclbin \
			--no-xchesscc --no-xbridge --peano /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie \
			--aie-generate-npu-insts --npu-insts-name=insts_1280x4352x2304_32x32x32_8c.txt ../build/aie_1280x4352x2304_32x32x32_8c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_1280x4352x2304_32x32x32_8c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_1280x4352x2304_32x32x32_8c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_1280x4352x2304_32x32x32_8c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_1280x4352x2304_32x32x32_8c.xclbin -i build/insts_1280x4352x2304_32x32x32_8c.txt -k MLIR_AIE -M 1280 -K 4352 -N 2304 --iters 20 --warmup 10 --b_col_maj 0





















Avg NPU matmul time: 14510us.
Avg NPU gflops: 1769.07

Min NPU matmul time: 13522us.
Max NPU gflops: 1898.32

Max NPU matmul time: 16998us.
Min NPU gflops: 1510.13

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=float -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.3s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 32 -k 32 -n 32 --n-aie-cols 8 --b-col-maj 0 --dev npu2 -M 1280 -K 4352 -N 3328 --dtype_in bf16 --dtype_out f32 --emulate-bf16-mmul-with-bfp16 true --trace_size 0 > build/aie_1280x4352x3328_32x32x32_8c.mlir
mkdir -p build
cd build && /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie/bin/clang++ -O2 -std=c++20 --target=aie2p-none-unknown-elf -Wno-parentheses -Wno-attributes -Wno-macro-redefined -Wno-empty-body -DNDEBUG -I /scratch/luisr/mlir-aie/install/include  -Dbf16_f32_ONLY -DDIM_M=32 -DDIM_K=32 -DDIM_N=32 -DAIE_API_EMULATE_BFLOAT16_MMUL_WITH_BFP16 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_32x32x32.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_1280x4352x3328_32x32x32_8c.xclbin \
			--no-xchesscc --no-xbridge --peano /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie \
			--aie-generate-npu-insts --npu-insts-name=insts_1280x4352x3328_32x32x32_8c.txt ../build/aie_1280x4352x3328_32x32x32_8c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_1280x4352x3328_32x32x32_8c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_1280x4352x3328_32x32x32_8c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_1280x4352x3328_32x32x32_8c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_1280x4352x3328_32x32x32_8c.xclbin -i build/insts_1280x4352x3328_32x32x32_8c.txt -k MLIR_AIE -M 1280 -K 4352 -N 3328 --iters 20 --warmup 10 --b_col_maj 0





















Avg NPU matmul time: 21089.8us.
Avg NPU gflops: 1758.08

Min NPU matmul time: 19577us.
Max NPU gflops: 1893.94

Max NPU matmul time: 23477us.
Min NPU gflops: 1579.32

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=float -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.3s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 32 -k 32 -n 32 --n-aie-cols 8 --b-col-maj 0 --dev npu2 -M 1280 -K 4352 -N 4352 --dtype_in bf16 --dtype_out f32 --emulate-bf16-mmul-with-bfp16 true --trace_size 0 > build/aie_1280x4352x4352_32x32x32_8c.mlir
mkdir -p build
cd build && /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie/bin/clang++ -O2 -std=c++20 --target=aie2p-none-unknown-elf -Wno-parentheses -Wno-attributes -Wno-macro-redefined -Wno-empty-body -DNDEBUG -I /scratch/luisr/mlir-aie/install/include  -Dbf16_f32_ONLY -DDIM_M=32 -DDIM_K=32 -DDIM_N=32 -DAIE_API_EMULATE_BFLOAT16_MMUL_WITH_BFP16 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_32x32x32.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_1280x4352x4352_32x32x32_8c.xclbin \
			--no-xchesscc --no-xbridge --peano /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie \
			--aie-generate-npu-insts --npu-insts-name=insts_1280x4352x4352_32x32x32_8c.txt ../build/aie_1280x4352x4352_32x32x32_8c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_1280x4352x4352_32x32x32_8c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_1280x4352x4352_32x32x32_8c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_1280x4352x4352_32x32x32_8c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_1280x4352x4352_32x32x32_8c.xclbin -i build/insts_1280x4352x4352_32x32x32_8c.txt -k MLIR_AIE -M 1280 -K 4352 -N 4352 --iters 20 --warmup 10 --b_col_maj 0





















Avg NPU matmul time: 30004.3us.
Avg NPU gflops: 1615.97

Min NPU matmul time: 26708us.
Max NPU gflops: 1815.42

Max NPU matmul time: 31513us.
Min NPU gflops: 1538.61

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=float -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.3s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 32 -k 32 -n 32 --n-aie-cols 8 --b-col-maj 0 --dev npu2 -M 2304 -K 256 -N 256 --dtype_in bf16 --dtype_out f32 --emulate-bf16-mmul-with-bfp16 true --trace_size 0 > build/aie_2304x256x256_32x32x32_8c.mlir
mkdir -p build
cd build && /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie/bin/clang++ -O2 -std=c++20 --target=aie2p-none-unknown-elf -Wno-parentheses -Wno-attributes -Wno-macro-redefined -Wno-empty-body -DNDEBUG -I /scratch/luisr/mlir-aie/install/include  -Dbf16_f32_ONLY -DDIM_M=32 -DDIM_K=32 -DDIM_N=32 -DAIE_API_EMULATE_BFLOAT16_MMUL_WITH_BFP16 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_32x32x32.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_2304x256x256_32x32x32_8c.xclbin \
			--no-xchesscc --no-xbridge --peano /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie \
			--aie-generate-npu-insts --npu-insts-name=insts_2304x256x256_32x32x32_8c.txt ../build/aie_2304x256x256_32x32x32_8c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_2304x256x256_32x32x32_8c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_2304x256x256_32x32x32_8c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_2304x256x256_32x32x32_8c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_2304x256x256_32x32x32_8c.xclbin -i build/insts_2304x256x256_32x32x32_8c.txt -k MLIR_AIE -M 2304 -K 256 -N 256 --iters 20 --warmup 10 --b_col_maj 0

Avg NPU matmul time: 1297.3us.
Avg NPU gflops: 232.783

Min NPU matmul time: 259us.
Max NPU gflops: 1165.98

Max NPU matmul time: 3672us.
Min NPU gflops: 82.2413

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=float -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.2s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 32 -k 32 -n 32 --n-aie-cols 8 --b-col-maj 0 --dev npu2 -M 2304 -K 256 -N 1280 --dtype_in bf16 --dtype_out f32 --emulate-bf16-mmul-with-bfp16 true --trace_size 0 > build/aie_2304x256x1280_32x32x32_8c.mlir
mkdir -p build
cd build && /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie/bin/clang++ -O2 -std=c++20 --target=aie2p-none-unknown-elf -Wno-parentheses -Wno-attributes -Wno-macro-redefined -Wno-empty-body -DNDEBUG -I /scratch/luisr/mlir-aie/install/include  -Dbf16_f32_ONLY -DDIM_M=32 -DDIM_K=32 -DDIM_N=32 -DAIE_API_EMULATE_BFLOAT16_MMUL_WITH_BFP16 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_32x32x32.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_2304x256x1280_32x32x32_8c.xclbin \
			--no-xchesscc --no-xbridge --peano /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie \
			--aie-generate-npu-insts --npu-insts-name=insts_2304x256x1280_32x32x32_8c.txt ../build/aie_2304x256x1280_32x32x32_8c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_2304x256x1280_32x32x32_8c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_2304x256x1280_32x32x32_8c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_2304x256x1280_32x32x32_8c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_2304x256x1280_32x32x32_8c.xclbin -i build/insts_2304x256x1280_32x32x32_8c.txt -k MLIR_AIE -M 2304 -K 256 -N 1280 --iters 20 --warmup 10 --b_col_maj 0

Avg NPU matmul time: 4281.5us.
Avg NPU gflops: 352.668

Min NPU matmul time: 1546us.
Max NPU gflops: 976.681

Max NPU matmul time: 4646us.
Min NPU gflops: 325

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=float -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.4s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 32 -k 32 -n 32 --n-aie-cols 8 --b-col-maj 0 --dev npu2 -M 2304 -K 256 -N 2304 --dtype_in bf16 --dtype_out f32 --emulate-bf16-mmul-with-bfp16 true --trace_size 0 > build/aie_2304x256x2304_32x32x32_8c.mlir
mkdir -p build
cd build && /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie/bin/clang++ -O2 -std=c++20 --target=aie2p-none-unknown-elf -Wno-parentheses -Wno-attributes -Wno-macro-redefined -Wno-empty-body -DNDEBUG -I /scratch/luisr/mlir-aie/install/include  -Dbf16_f32_ONLY -DDIM_M=32 -DDIM_K=32 -DDIM_N=32 -DAIE_API_EMULATE_BFLOAT16_MMUL_WITH_BFP16 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_32x32x32.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_2304x256x2304_32x32x32_8c.xclbin \
			--no-xchesscc --no-xbridge --peano /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie \
			--aie-generate-npu-insts --npu-insts-name=insts_2304x256x2304_32x32x32_8c.txt ../build/aie_2304x256x2304_32x32x32_8c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_2304x256x2304_32x32x32_8c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_2304x256x2304_32x32x32_8c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_2304x256x2304_32x32x32_8c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_2304x256x2304_32x32x32_8c.xclbin -i build/insts_2304x256x2304_32x32x32_8c.txt -k MLIR_AIE -M 2304 -K 256 -N 2304 --iters 20 --warmup 10 --b_col_maj 0





















Avg NPU matmul time: 2434.35us.
Avg NPU gflops: 1116.48

Min NPU matmul time: 1582us.
Max NPU gflops: 1718.02

Max NPU matmul time: 3254us.
Min NPU gflops: 835.252

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=float -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.2s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 32 -k 32 -n 32 --n-aie-cols 8 --b-col-maj 0 --dev npu2 -M 2304 -K 256 -N 3328 --dtype_in bf16 --dtype_out f32 --emulate-bf16-mmul-with-bfp16 true --trace_size 0 > build/aie_2304x256x3328_32x32x32_8c.mlir
mkdir -p build
cd build && /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie/bin/clang++ -O2 -std=c++20 --target=aie2p-none-unknown-elf -Wno-parentheses -Wno-attributes -Wno-macro-redefined -Wno-empty-body -DNDEBUG -I /scratch/luisr/mlir-aie/install/include  -Dbf16_f32_ONLY -DDIM_M=32 -DDIM_K=32 -DDIM_N=32 -DAIE_API_EMULATE_BFLOAT16_MMUL_WITH_BFP16 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_32x32x32.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_2304x256x3328_32x32x32_8c.xclbin \
			--no-xchesscc --no-xbridge --peano /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie \
			--aie-generate-npu-insts --npu-insts-name=insts_2304x256x3328_32x32x32_8c.txt ../build/aie_2304x256x3328_32x32x32_8c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_2304x256x3328_32x32x32_8c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_2304x256x3328_32x32x32_8c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_2304x256x3328_32x32x32_8c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_2304x256x3328_32x32x32_8c.xclbin -i build/insts_2304x256x3328_32x32x32_8c.txt -k MLIR_AIE -M 2304 -K 256 -N 3328 --iters 20 --warmup 10 --b_col_maj 0





















Avg NPU matmul time: 3092.5us.
Avg NPU gflops: 1269.48

Min NPU matmul time: 2789us.
Max NPU gflops: 1407.63

Max NPU matmul time: 3337us.
Min NPU gflops: 1176.47

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=float -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.3s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 32 -k 32 -n 32 --n-aie-cols 8 --b-col-maj 0 --dev npu2 -M 2304 -K 256 -N 4352 --dtype_in bf16 --dtype_out f32 --emulate-bf16-mmul-with-bfp16 true --trace_size 0 > build/aie_2304x256x4352_32x32x32_8c.mlir
mkdir -p build
cd build && /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie/bin/clang++ -O2 -std=c++20 --target=aie2p-none-unknown-elf -Wno-parentheses -Wno-attributes -Wno-macro-redefined -Wno-empty-body -DNDEBUG -I /scratch/luisr/mlir-aie/install/include  -Dbf16_f32_ONLY -DDIM_M=32 -DDIM_K=32 -DDIM_N=32 -DAIE_API_EMULATE_BFLOAT16_MMUL_WITH_BFP16 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_32x32x32.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_2304x256x4352_32x32x32_8c.xclbin \
			--no-xchesscc --no-xbridge --peano /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie \
			--aie-generate-npu-insts --npu-insts-name=insts_2304x256x4352_32x32x32_8c.txt ../build/aie_2304x256x4352_32x32x32_8c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_2304x256x4352_32x32x32_8c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_2304x256x4352_32x32x32_8c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_2304x256x4352_32x32x32_8c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_2304x256x4352_32x32x32_8c.xclbin -i build/insts_2304x256x4352_32x32x32_8c.txt -k MLIR_AIE -M 2304 -K 256 -N 4352 --iters 20 --warmup 10 --b_col_maj 0





















Avg NPU matmul time: 3823.55us.
Avg NPU gflops: 1342.69

Min NPU matmul time: 3393us.
Max NPU gflops: 1513.06

Max NPU matmul time: 4215us.
Min NPU gflops: 1217.99

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=float -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.3s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 32 -k 32 -n 32 --n-aie-cols 8 --b-col-maj 0 --dev npu2 -M 2304 -K 1280 -N 256 --dtype_in bf16 --dtype_out f32 --emulate-bf16-mmul-with-bfp16 true --trace_size 0 > build/aie_2304x1280x256_32x32x32_8c.mlir
mkdir -p build
cd build && /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie/bin/clang++ -O2 -std=c++20 --target=aie2p-none-unknown-elf -Wno-parentheses -Wno-attributes -Wno-macro-redefined -Wno-empty-body -DNDEBUG -I /scratch/luisr/mlir-aie/install/include  -Dbf16_f32_ONLY -DDIM_M=32 -DDIM_K=32 -DDIM_N=32 -DAIE_API_EMULATE_BFLOAT16_MMUL_WITH_BFP16 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_32x32x32.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_2304x1280x256_32x32x32_8c.xclbin \
			--no-xchesscc --no-xbridge --peano /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie \
			--aie-generate-npu-insts --npu-insts-name=insts_2304x1280x256_32x32x32_8c.txt ../build/aie_2304x1280x256_32x32x32_8c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_2304x1280x256_32x32x32_8c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_2304x1280x256_32x32x32_8c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_2304x1280x256_32x32x32_8c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_2304x1280x256_32x32x32_8c.xclbin -i build/insts_2304x1280x256_32x32x32_8c.txt -k MLIR_AIE -M 2304 -K 1280 -N 256 --iters 20 --warmup 10 --b_col_maj 0

Avg NPU matmul time: 4186.75us.
Avg NPU gflops: 360.65

Min NPU matmul time: 779us.
Max NPU gflops: 1938.32

Max NPU matmul time: 4920us.
Min NPU gflops: 306.9

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=float -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.3s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 32 -k 32 -n 32 --n-aie-cols 8 --b-col-maj 0 --dev npu2 -M 2304 -K 1280 -N 1280 --dtype_in bf16 --dtype_out f32 --emulate-bf16-mmul-with-bfp16 true --trace_size 0 > build/aie_2304x1280x1280_32x32x32_8c.mlir
mkdir -p build
cd build && /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie/bin/clang++ -O2 -std=c++20 --target=aie2p-none-unknown-elf -Wno-parentheses -Wno-attributes -Wno-macro-redefined -Wno-empty-body -DNDEBUG -I /scratch/luisr/mlir-aie/install/include  -Dbf16_f32_ONLY -DDIM_M=32 -DDIM_K=32 -DDIM_N=32 -DAIE_API_EMULATE_BFLOAT16_MMUL_WITH_BFP16 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_32x32x32.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_2304x1280x1280_32x32x32_8c.xclbin \
			--no-xchesscc --no-xbridge --peano /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie \
			--aie-generate-npu-insts --npu-insts-name=insts_2304x1280x1280_32x32x32_8c.txt ../build/aie_2304x1280x1280_32x32x32_8c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_2304x1280x1280_32x32x32_8c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_2304x1280x1280_32x32x32_8c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_2304x1280x1280_32x32x32_8c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_2304x1280x1280_32x32x32_8c.xclbin -i build/insts_2304x1280x1280_32x32x32_8c.txt -k MLIR_AIE -M 2304 -K 1280 -N 1280 --iters 20 --warmup 10 --b_col_maj 0





















Avg NPU matmul time: 4513.45us.
Avg NPU gflops: 1672.72

Min NPU matmul time: 3914us.
Max NPU gflops: 1928.91

Max NPU matmul time: 5209us.
Min NPU gflops: 1449.37

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=float -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.3s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 32 -k 32 -n 32 --n-aie-cols 8 --b-col-maj 0 --dev npu2 -M 2304 -K 1280 -N 2304 --dtype_in bf16 --dtype_out f32 --emulate-bf16-mmul-with-bfp16 true --trace_size 0 > build/aie_2304x1280x2304_32x32x32_8c.mlir
mkdir -p build
cd build && /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie/bin/clang++ -O2 -std=c++20 --target=aie2p-none-unknown-elf -Wno-parentheses -Wno-attributes -Wno-macro-redefined -Wno-empty-body -DNDEBUG -I /scratch/luisr/mlir-aie/install/include  -Dbf16_f32_ONLY -DDIM_M=32 -DDIM_K=32 -DDIM_N=32 -DAIE_API_EMULATE_BFLOAT16_MMUL_WITH_BFP16 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_32x32x32.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_2304x1280x2304_32x32x32_8c.xclbin \
			--no-xchesscc --no-xbridge --peano /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie \
			--aie-generate-npu-insts --npu-insts-name=insts_2304x1280x2304_32x32x32_8c.txt ../build/aie_2304x1280x2304_32x32x32_8c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_2304x1280x2304_32x32x32_8c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_2304x1280x2304_32x32x32_8c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_2304x1280x2304_32x32x32_8c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_2304x1280x2304_32x32x32_8c.xclbin -i build/insts_2304x1280x2304_32x32x32_8c.txt -k MLIR_AIE -M 2304 -K 1280 -N 2304 --iters 20 --warmup 10 --b_col_maj 0





















Avg NPU matmul time: 8062.5us.
Avg NPU gflops: 1685.52

Min NPU matmul time: 7408us.
Max NPU gflops: 1834.44

Max NPU matmul time: 9036us.
Min NPU gflops: 1503.93

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=float -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.3s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 32 -k 32 -n 32 --n-aie-cols 8 --b-col-maj 0 --dev npu2 -M 2304 -K 1280 -N 3328 --dtype_in bf16 --dtype_out f32 --emulate-bf16-mmul-with-bfp16 true --trace_size 0 > build/aie_2304x1280x3328_32x32x32_8c.mlir
mkdir -p build
cd build && /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie/bin/clang++ -O2 -std=c++20 --target=aie2p-none-unknown-elf -Wno-parentheses -Wno-attributes -Wno-macro-redefined -Wno-empty-body -DNDEBUG -I /scratch/luisr/mlir-aie/install/include  -Dbf16_f32_ONLY -DDIM_M=32 -DDIM_K=32 -DDIM_N=32 -DAIE_API_EMULATE_BFLOAT16_MMUL_WITH_BFP16 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_32x32x32.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_2304x1280x3328_32x32x32_8c.xclbin \
			--no-xchesscc --no-xbridge --peano /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie \
			--aie-generate-npu-insts --npu-insts-name=insts_2304x1280x3328_32x32x32_8c.txt ../build/aie_2304x1280x3328_32x32x32_8c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_2304x1280x3328_32x32x32_8c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_2304x1280x3328_32x32x32_8c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_2304x1280x3328_32x32x32_8c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_2304x1280x3328_32x32x32_8c.xclbin -i build/insts_2304x1280x3328_32x32x32_8c.txt -k MLIR_AIE -M 2304 -K 1280 -N 3328 --iters 20 --warmup 10 --b_col_maj 0





















Avg NPU matmul time: 11717.9us.
Avg NPU gflops: 1675.16

Min NPU matmul time: 11212us.
Max NPU gflops: 1750.74

Max NPU matmul time: 14528us.
Min NPU gflops: 1351.14

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=float -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.3s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 32 -k 32 -n 32 --n-aie-cols 8 --b-col-maj 0 --dev npu2 -M 2304 -K 1280 -N 4352 --dtype_in bf16 --dtype_out f32 --emulate-bf16-mmul-with-bfp16 true --trace_size 0 > build/aie_2304x1280x4352_32x32x32_8c.mlir
mkdir -p build
cd build && /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie/bin/clang++ -O2 -std=c++20 --target=aie2p-none-unknown-elf -Wno-parentheses -Wno-attributes -Wno-macro-redefined -Wno-empty-body -DNDEBUG -I /scratch/luisr/mlir-aie/install/include  -Dbf16_f32_ONLY -DDIM_M=32 -DDIM_K=32 -DDIM_N=32 -DAIE_API_EMULATE_BFLOAT16_MMUL_WITH_BFP16 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_32x32x32.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_2304x1280x4352_32x32x32_8c.xclbin \
			--no-xchesscc --no-xbridge --peano /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie \
			--aie-generate-npu-insts --npu-insts-name=insts_2304x1280x4352_32x32x32_8c.txt ../build/aie_2304x1280x4352_32x32x32_8c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_2304x1280x4352_32x32x32_8c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_2304x1280x4352_32x32x32_8c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_2304x1280x4352_32x32x32_8c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_2304x1280x4352_32x32x32_8c.xclbin -i build/insts_2304x1280x4352_32x32x32_8c.txt -k MLIR_AIE -M 2304 -K 1280 -N 4352 --iters 20 --warmup 10 --b_col_maj 0





















Avg NPU matmul time: 15455.8us.
Avg NPU gflops: 1660.81

Min NPU matmul time: 14327us.
Max NPU gflops: 1791.66

Max NPU matmul time: 19436us.
Min NPU gflops: 1320.7

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=float -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.3s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 32 -k 32 -n 32 --n-aie-cols 8 --b-col-maj 0 --dev npu2 -M 2304 -K 2304 -N 256 --dtype_in bf16 --dtype_out f32 --emulate-bf16-mmul-with-bfp16 true --trace_size 0 > build/aie_2304x2304x256_32x32x32_8c.mlir
mkdir -p build
cd build && /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie/bin/clang++ -O2 -std=c++20 --target=aie2p-none-unknown-elf -Wno-parentheses -Wno-attributes -Wno-macro-redefined -Wno-empty-body -DNDEBUG -I /scratch/luisr/mlir-aie/install/include  -Dbf16_f32_ONLY -DDIM_M=32 -DDIM_K=32 -DDIM_N=32 -DAIE_API_EMULATE_BFLOAT16_MMUL_WITH_BFP16 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_32x32x32.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_2304x2304x256_32x32x32_8c.xclbin \
			--no-xchesscc --no-xbridge --peano /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie \
			--aie-generate-npu-insts --npu-insts-name=insts_2304x2304x256_32x32x32_8c.txt ../build/aie_2304x2304x256_32x32x32_8c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_2304x2304x256_32x32x32_8c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_2304x2304x256_32x32x32_8c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_2304x2304x256_32x32x32_8c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_2304x2304x256_32x32x32_8c.xclbin -i build/insts_2304x2304x256_32x32x32_8c.txt -k MLIR_AIE -M 2304 -K 2304 -N 256 --iters 20 --warmup 10 --b_col_maj 0





















Avg NPU matmul time: 1893.8us.
Avg NPU gflops: 1435.16

Min NPU matmul time: 1445us.
Max NPU gflops: 1880.91

Max NPU matmul time: 4455us.
Min NPU gflops: 610.081

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=float -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.3s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 32 -k 32 -n 32 --n-aie-cols 8 --b-col-maj 0 --dev npu2 -M 2304 -K 2304 -N 1280 --dtype_in bf16 --dtype_out f32 --emulate-bf16-mmul-with-bfp16 true --trace_size 0 > build/aie_2304x2304x1280_32x32x32_8c.mlir
mkdir -p build
cd build && /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie/bin/clang++ -O2 -std=c++20 --target=aie2p-none-unknown-elf -Wno-parentheses -Wno-attributes -Wno-macro-redefined -Wno-empty-body -DNDEBUG -I /scratch/luisr/mlir-aie/install/include  -Dbf16_f32_ONLY -DDIM_M=32 -DDIM_K=32 -DDIM_N=32 -DAIE_API_EMULATE_BFLOAT16_MMUL_WITH_BFP16 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_32x32x32.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_2304x2304x1280_32x32x32_8c.xclbin \
			--no-xchesscc --no-xbridge --peano /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie \
			--aie-generate-npu-insts --npu-insts-name=insts_2304x2304x1280_32x32x32_8c.txt ../build/aie_2304x2304x1280_32x32x32_8c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_2304x2304x1280_32x32x32_8c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_2304x2304x1280_32x32x32_8c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_2304x2304x1280_32x32x32_8c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_2304x2304x1280_32x32x32_8c.xclbin -i build/insts_2304x2304x1280_32x32x32_8c.txt -k MLIR_AIE -M 2304 -K 2304 -N 1280 --iters 20 --warmup 10 --b_col_maj 0





















Avg NPU matmul time: 8172.9us.
Avg NPU gflops: 1662.76

Min NPU matmul time: 7122us.
Max NPU gflops: 1908.11

Max NPU matmul time: 10621us.
Min NPU gflops: 1279.5

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=float -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.2s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 32 -k 32 -n 32 --n-aie-cols 8 --b-col-maj 0 --dev npu2 -M 2304 -K 2304 -N 2304 --dtype_in bf16 --dtype_out f32 --emulate-bf16-mmul-with-bfp16 true --trace_size 0 > build/aie_2304x2304x2304_32x32x32_8c.mlir
mkdir -p build
cd build && /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie/bin/clang++ -O2 -std=c++20 --target=aie2p-none-unknown-elf -Wno-parentheses -Wno-attributes -Wno-macro-redefined -Wno-empty-body -DNDEBUG -I /scratch/luisr/mlir-aie/install/include  -Dbf16_f32_ONLY -DDIM_M=32 -DDIM_K=32 -DDIM_N=32 -DAIE_API_EMULATE_BFLOAT16_MMUL_WITH_BFP16 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_32x32x32.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_2304x2304x2304_32x32x32_8c.xclbin \
			--no-xchesscc --no-xbridge --peano /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie \
			--aie-generate-npu-insts --npu-insts-name=insts_2304x2304x2304_32x32x32_8c.txt ../build/aie_2304x2304x2304_32x32x32_8c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_2304x2304x2304_32x32x32_8c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_2304x2304x2304_32x32x32_8c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_2304x2304x2304_32x32x32_8c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_2304x2304x2304_32x32x32_8c.xclbin -i build/insts_2304x2304x2304_32x32x32_8c.txt -k MLIR_AIE -M 2304 -K 2304 -N 2304 --iters 20 --warmup 10 --b_col_maj 0





















Avg NPU matmul time: 14073.8us.
Avg NPU gflops: 1738.07

Min NPU matmul time: 13074us.
Max NPU gflops: 1870.98

Max NPU matmul time: 17258us.
Min NPU gflops: 1417.38

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=float -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.3s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 32 -k 32 -n 32 --n-aie-cols 8 --b-col-maj 0 --dev npu2 -M 2304 -K 2304 -N 3328 --dtype_in bf16 --dtype_out f32 --emulate-bf16-mmul-with-bfp16 true --trace_size 0 > build/aie_2304x2304x3328_32x32x32_8c.mlir
mkdir -p build
cd build && /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie/bin/clang++ -O2 -std=c++20 --target=aie2p-none-unknown-elf -Wno-parentheses -Wno-attributes -Wno-macro-redefined -Wno-empty-body -DNDEBUG -I /scratch/luisr/mlir-aie/install/include  -Dbf16_f32_ONLY -DDIM_M=32 -DDIM_K=32 -DDIM_N=32 -DAIE_API_EMULATE_BFLOAT16_MMUL_WITH_BFP16 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_32x32x32.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_2304x2304x3328_32x32x32_8c.xclbin \
			--no-xchesscc --no-xbridge --peano /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie \
			--aie-generate-npu-insts --npu-insts-name=insts_2304x2304x3328_32x32x32_8c.txt ../build/aie_2304x2304x3328_32x32x32_8c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_2304x2304x3328_32x32x32_8c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_2304x2304x3328_32x32x32_8c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_2304x2304x3328_32x32x32_8c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_2304x2304x3328_32x32x32_8c.xclbin -i build/insts_2304x2304x3328_32x32x32_8c.txt -k MLIR_AIE -M 2304 -K 2304 -N 3328 --iters 20 --warmup 10 --b_col_maj 0





















Avg NPU matmul time: 20119.9us.
Avg NPU gflops: 1756.11

Min NPU matmul time: 18917us.
Max NPU gflops: 1867.78

Max NPU matmul time: 23192us.
Min NPU gflops: 1523.49

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=float -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.3s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 32 -k 32 -n 32 --n-aie-cols 8 --b-col-maj 0 --dev npu2 -M 2304 -K 2304 -N 4352 --dtype_in bf16 --dtype_out f32 --emulate-bf16-mmul-with-bfp16 true --trace_size 0 > build/aie_2304x2304x4352_32x32x32_8c.mlir
mkdir -p build
cd build && /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie/bin/clang++ -O2 -std=c++20 --target=aie2p-none-unknown-elf -Wno-parentheses -Wno-attributes -Wno-macro-redefined -Wno-empty-body -DNDEBUG -I /scratch/luisr/mlir-aie/install/include  -Dbf16_f32_ONLY -DDIM_M=32 -DDIM_K=32 -DDIM_N=32 -DAIE_API_EMULATE_BFLOAT16_MMUL_WITH_BFP16 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_32x32x32.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_2304x2304x4352_32x32x32_8c.xclbin \
			--no-xchesscc --no-xbridge --peano /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie \
			--aie-generate-npu-insts --npu-insts-name=insts_2304x2304x4352_32x32x32_8c.txt ../build/aie_2304x2304x4352_32x32x32_8c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_2304x2304x4352_32x32x32_8c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_2304x2304x4352_32x32x32_8c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_2304x2304x4352_32x32x32_8c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_2304x2304x4352_32x32x32_8c.xclbin -i build/insts_2304x2304x4352_32x32x32_8c.txt -k MLIR_AIE -M 2304 -K 2304 -N 4352 --iters 20 --warmup 10 --b_col_maj 0





















Avg NPU matmul time: 26428us.
Avg NPU gflops: 1748.31

Min NPU matmul time: 24930us.
Max NPU gflops: 1853.37

Max NPU matmul time: 29342us.
Min NPU gflops: 1574.69

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=float -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.3s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 32 -k 32 -n 32 --n-aie-cols 8 --b-col-maj 0 --dev npu2 -M 2304 -K 3328 -N 256 --dtype_in bf16 --dtype_out f32 --emulate-bf16-mmul-with-bfp16 true --trace_size 0 > build/aie_2304x3328x256_32x32x32_8c.mlir
mkdir -p build
cd build && /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie/bin/clang++ -O2 -std=c++20 --target=aie2p-none-unknown-elf -Wno-parentheses -Wno-attributes -Wno-macro-redefined -Wno-empty-body -DNDEBUG -I /scratch/luisr/mlir-aie/install/include  -Dbf16_f32_ONLY -DDIM_M=32 -DDIM_K=32 -DDIM_N=32 -DAIE_API_EMULATE_BFLOAT16_MMUL_WITH_BFP16 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_32x32x32.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_2304x3328x256_32x32x32_8c.xclbin \
			--no-xchesscc --no-xbridge --peano /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie \
			--aie-generate-npu-insts --npu-insts-name=insts_2304x3328x256_32x32x32_8c.txt ../build/aie_2304x3328x256_32x32x32_8c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_2304x3328x256_32x32x32_8c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_2304x3328x256_32x32x32_8c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_2304x3328x256_32x32x32_8c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_2304x3328x256_32x32x32_8c.xclbin -i build/insts_2304x3328x256_32x32x32_8c.txt -k MLIR_AIE -M 2304 -K 3328 -N 256 --iters 20 --warmup 10 --b_col_maj 0





















Avg NPU matmul time: 2666.55us.
Avg NPU gflops: 1472.27

Min NPU matmul time: 1954us.
Max NPU gflops: 2009.14

Max NPU matmul time: 6047us.
Min NPU gflops: 649.226

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=float -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.2s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 32 -k 32 -n 32 --n-aie-cols 8 --b-col-maj 0 --dev npu2 -M 2304 -K 3328 -N 1280 --dtype_in bf16 --dtype_out f32 --emulate-bf16-mmul-with-bfp16 true --trace_size 0 > build/aie_2304x3328x1280_32x32x32_8c.mlir
mkdir -p build
cd build && /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie/bin/clang++ -O2 -std=c++20 --target=aie2p-none-unknown-elf -Wno-parentheses -Wno-attributes -Wno-macro-redefined -Wno-empty-body -DNDEBUG -I /scratch/luisr/mlir-aie/install/include  -Dbf16_f32_ONLY -DDIM_M=32 -DDIM_K=32 -DDIM_N=32 -DAIE_API_EMULATE_BFLOAT16_MMUL_WITH_BFP16 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_32x32x32.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_2304x3328x1280_32x32x32_8c.xclbin \
			--no-xchesscc --no-xbridge --peano /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie \
			--aie-generate-npu-insts --npu-insts-name=insts_2304x3328x1280_32x32x32_8c.txt ../build/aie_2304x3328x1280_32x32x32_8c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_2304x3328x1280_32x32x32_8c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_2304x3328x1280_32x32x32_8c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_2304x3328x1280_32x32x32_8c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_2304x3328x1280_32x32x32_8c.xclbin -i build/insts_2304x3328x1280_32x32x32_8c.txt -k MLIR_AIE -M 2304 -K 3328 -N 1280 --iters 20 --warmup 10 --b_col_maj 0





















Avg NPU matmul time: 10721.6us.
Avg NPU gflops: 1830.82

Min NPU matmul time: 10097us.
Max NPU gflops: 1944.08

Max NPU matmul time: 13835us.
Min NPU gflops: 1418.82

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=float -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.3s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 32 -k 32 -n 32 --n-aie-cols 8 --b-col-maj 0 --dev npu2 -M 2304 -K 3328 -N 2304 --dtype_in bf16 --dtype_out f32 --emulate-bf16-mmul-with-bfp16 true --trace_size 0 > build/aie_2304x3328x2304_32x32x32_8c.mlir
mkdir -p build
cd build && /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie/bin/clang++ -O2 -std=c++20 --target=aie2p-none-unknown-elf -Wno-parentheses -Wno-attributes -Wno-macro-redefined -Wno-empty-body -DNDEBUG -I /scratch/luisr/mlir-aie/install/include  -Dbf16_f32_ONLY -DDIM_M=32 -DDIM_K=32 -DDIM_N=32 -DAIE_API_EMULATE_BFLOAT16_MMUL_WITH_BFP16 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_32x32x32.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_2304x3328x2304_32x32x32_8c.xclbin \
			--no-xchesscc --no-xbridge --peano /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie \
			--aie-generate-npu-insts --npu-insts-name=insts_2304x3328x2304_32x32x32_8c.txt ../build/aie_2304x3328x2304_32x32x32_8c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_2304x3328x2304_32x32x32_8c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_2304x3328x2304_32x32x32_8c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_2304x3328x2304_32x32x32_8c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_2304x3328x2304_32x32x32_8c.xclbin -i build/insts_2304x3328x2304_32x32x32_8c.txt -k MLIR_AIE -M 2304 -K 3328 -N 2304 --iters 20 --warmup 10 --b_col_maj 0





















Avg NPU matmul time: 19683.9us.
Avg NPU gflops: 1795.01

Min NPU matmul time: 18441us.
Max NPU gflops: 1915.99

Max NPU matmul time: 22762us.
Min NPU gflops: 1552.27

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=float -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.3s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 32 -k 32 -n 32 --n-aie-cols 8 --b-col-maj 0 --dev npu2 -M 2304 -K 3328 -N 3328 --dtype_in bf16 --dtype_out f32 --emulate-bf16-mmul-with-bfp16 true --trace_size 0 > build/aie_2304x3328x3328_32x32x32_8c.mlir
mkdir -p build
cd build && /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie/bin/clang++ -O2 -std=c++20 --target=aie2p-none-unknown-elf -Wno-parentheses -Wno-attributes -Wno-macro-redefined -Wno-empty-body -DNDEBUG -I /scratch/luisr/mlir-aie/install/include  -Dbf16_f32_ONLY -DDIM_M=32 -DDIM_K=32 -DDIM_N=32 -DAIE_API_EMULATE_BFLOAT16_MMUL_WITH_BFP16 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_32x32x32.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_2304x3328x3328_32x32x32_8c.xclbin \
			--no-xchesscc --no-xbridge --peano /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie \
			--aie-generate-npu-insts --npu-insts-name=insts_2304x3328x3328_32x32x32_8c.txt ../build/aie_2304x3328x3328_32x32x32_8c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_2304x3328x3328_32x32x32_8c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_2304x3328x3328_32x32x32_8c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_2304x3328x3328_32x32x32_8c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_2304x3328x3328_32x32x32_8c.xclbin -i build/insts_2304x3328x3328_32x32x32_8c.txt -k MLIR_AIE -M 2304 -K 3328 -N 3328 --iters 20 --warmup 10 --b_col_maj 0





















Avg NPU matmul time: 28311.4us.
Avg NPU gflops: 1802.67

Min NPU matmul time: 26866us.
Max NPU gflops: 1899.66

Max NPU matmul time: 30676us.
Min NPU gflops: 1663.72

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=float -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.2s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 32 -k 32 -n 32 --n-aie-cols 8 --b-col-maj 0 --dev npu2 -M 2304 -K 3328 -N 4352 --dtype_in bf16 --dtype_out f32 --emulate-bf16-mmul-with-bfp16 true --trace_size 0 > build/aie_2304x3328x4352_32x32x32_8c.mlir
mkdir -p build
cd build && /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie/bin/clang++ -O2 -std=c++20 --target=aie2p-none-unknown-elf -Wno-parentheses -Wno-attributes -Wno-macro-redefined -Wno-empty-body -DNDEBUG -I /scratch/luisr/mlir-aie/install/include  -Dbf16_f32_ONLY -DDIM_M=32 -DDIM_K=32 -DDIM_N=32 -DAIE_API_EMULATE_BFLOAT16_MMUL_WITH_BFP16 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_32x32x32.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_2304x3328x4352_32x32x32_8c.xclbin \
			--no-xchesscc --no-xbridge --peano /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie \
			--aie-generate-npu-insts --npu-insts-name=insts_2304x3328x4352_32x32x32_8c.txt ../build/aie_2304x3328x4352_32x32x32_8c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_2304x3328x4352_32x32x32_8c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_2304x3328x4352_32x32x32_8c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_2304x3328x4352_32x32x32_8c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_2304x3328x4352_32x32x32_8c.xclbin -i build/insts_2304x3328x4352_32x32x32_8c.txt -k MLIR_AIE -M 2304 -K 3328 -N 4352 --iters 20 --warmup 10 --b_col_maj 0





















Avg NPU matmul time: 37294.4us.
Avg NPU gflops: 1789.54

Min NPU matmul time: 35577us.
Max NPU gflops: 1875.92

Max NPU matmul time: 40689us.
Min NPU gflops: 1640.24

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=float -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.3s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 32 -k 32 -n 32 --n-aie-cols 8 --b-col-maj 0 --dev npu2 -M 2304 -K 4352 -N 256 --dtype_in bf16 --dtype_out f32 --emulate-bf16-mmul-with-bfp16 true --trace_size 0 > build/aie_2304x4352x256_32x32x32_8c.mlir
mkdir -p build
cd build && /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie/bin/clang++ -O2 -std=c++20 --target=aie2p-none-unknown-elf -Wno-parentheses -Wno-attributes -Wno-macro-redefined -Wno-empty-body -DNDEBUG -I /scratch/luisr/mlir-aie/install/include  -Dbf16_f32_ONLY -DDIM_M=32 -DDIM_K=32 -DDIM_N=32 -DAIE_API_EMULATE_BFLOAT16_MMUL_WITH_BFP16 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_32x32x32.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_2304x4352x256_32x32x32_8c.xclbin \
			--no-xchesscc --no-xbridge --peano /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie \
			--aie-generate-npu-insts --npu-insts-name=insts_2304x4352x256_32x32x32_8c.txt ../build/aie_2304x4352x256_32x32x32_8c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_2304x4352x256_32x32x32_8c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_2304x4352x256_32x32x32_8c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_2304x4352x256_32x32x32_8c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_2304x4352x256_32x32x32_8c.xclbin -i build/insts_2304x4352x256_32x32x32_8c.txt -k MLIR_AIE -M 2304 -K 4352 -N 256 --iters 20 --warmup 10 --b_col_maj 0





















Avg NPU matmul time: 3478.3us.
Avg NPU gflops: 1475.96

Min NPU matmul time: 2428us.
Max NPU gflops: 2114.43

Max NPU matmul time: 6851us.
Min NPU gflops: 749.355

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=float -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.3s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 32 -k 32 -n 32 --n-aie-cols 8 --b-col-maj 0 --dev npu2 -M 2304 -K 4352 -N 1280 --dtype_in bf16 --dtype_out f32 --emulate-bf16-mmul-with-bfp16 true --trace_size 0 > build/aie_2304x4352x1280_32x32x32_8c.mlir
mkdir -p build
cd build && /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie/bin/clang++ -O2 -std=c++20 --target=aie2p-none-unknown-elf -Wno-parentheses -Wno-attributes -Wno-macro-redefined -Wno-empty-body -DNDEBUG -I /scratch/luisr/mlir-aie/install/include  -Dbf16_f32_ONLY -DDIM_M=32 -DDIM_K=32 -DDIM_N=32 -DAIE_API_EMULATE_BFLOAT16_MMUL_WITH_BFP16 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_32x32x32.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_2304x4352x1280_32x32x32_8c.xclbin \
			--no-xchesscc --no-xbridge --peano /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie \
			--aie-generate-npu-insts --npu-insts-name=insts_2304x4352x1280_32x32x32_8c.txt ../build/aie_2304x4352x1280_32x32x32_8c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_2304x4352x1280_32x32x32_8c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_2304x4352x1280_32x32x32_8c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_2304x4352x1280_32x32x32_8c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_2304x4352x1280_32x32x32_8c.xclbin -i build/insts_2304x4352x1280_32x32x32_8c.txt -k MLIR_AIE -M 2304 -K 4352 -N 1280 --iters 20 --warmup 10 --b_col_maj 0





















Avg NPU matmul time: 14038.5us.
Avg NPU gflops: 1828.49

Min NPU matmul time: 13122us.
Max NPU gflops: 1956.19

Max NPU matmul time: 16683us.
Min NPU gflops: 1538.64

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=float -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.3s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 32 -k 32 -n 32 --n-aie-cols 8 --b-col-maj 0 --dev npu2 -M 2304 -K 4352 -N 2304 --dtype_in bf16 --dtype_out f32 --emulate-bf16-mmul-with-bfp16 true --trace_size 0 > build/aie_2304x4352x2304_32x32x32_8c.mlir
mkdir -p build
cd build && /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie/bin/clang++ -O2 -std=c++20 --target=aie2p-none-unknown-elf -Wno-parentheses -Wno-attributes -Wno-macro-redefined -Wno-empty-body -DNDEBUG -I /scratch/luisr/mlir-aie/install/include  -Dbf16_f32_ONLY -DDIM_M=32 -DDIM_K=32 -DDIM_N=32 -DAIE_API_EMULATE_BFLOAT16_MMUL_WITH_BFP16 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_32x32x32.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_2304x4352x2304_32x32x32_8c.xclbin \
			--no-xchesscc --no-xbridge --peano /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie \
			--aie-generate-npu-insts --npu-insts-name=insts_2304x4352x2304_32x32x32_8c.txt ../build/aie_2304x4352x2304_32x32x32_8c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_2304x4352x2304_32x32x32_8c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_2304x4352x2304_32x32x32_8c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_2304x4352x2304_32x32x32_8c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_2304x4352x2304_32x32x32_8c.xclbin -i build/insts_2304x4352x2304_32x32x32_8c.txt -k MLIR_AIE -M 2304 -K 4352 -N 2304 --iters 20 --warmup 10 --b_col_maj 0





















Avg NPU matmul time: 25624.8us.
Avg NPU gflops: 1803.11

Min NPU matmul time: 24050us.
Max NPU gflops: 1921.18

Max NPU matmul time: 27870us.
Min NPU gflops: 1657.86

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=float -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.3s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 32 -k 32 -n 32 --n-aie-cols 8 --b-col-maj 0 --dev npu2 -M 2304 -K 4352 -N 3328 --dtype_in bf16 --dtype_out f32 --emulate-bf16-mmul-with-bfp16 true --trace_size 0 > build/aie_2304x4352x3328_32x32x32_8c.mlir
mkdir -p build
cd build && /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie/bin/clang++ -O2 -std=c++20 --target=aie2p-none-unknown-elf -Wno-parentheses -Wno-attributes -Wno-macro-redefined -Wno-empty-body -DNDEBUG -I /scratch/luisr/mlir-aie/install/include  -Dbf16_f32_ONLY -DDIM_M=32 -DDIM_K=32 -DDIM_N=32 -DAIE_API_EMULATE_BFLOAT16_MMUL_WITH_BFP16 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_32x32x32.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_2304x4352x3328_32x32x32_8c.xclbin \
			--no-xchesscc --no-xbridge --peano /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie \
			--aie-generate-npu-insts --npu-insts-name=insts_2304x4352x3328_32x32x32_8c.txt ../build/aie_2304x4352x3328_32x32x32_8c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_2304x4352x3328_32x32x32_8c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_2304x4352x3328_32x32x32_8c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_2304x4352x3328_32x32x32_8c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_2304x4352x3328_32x32x32_8c.xclbin -i build/insts_2304x4352x3328_32x32x32_8c.txt -k MLIR_AIE -M 2304 -K 4352 -N 3328 --iters 20 --warmup 10 --b_col_maj 0





















Avg NPU matmul time: 36449.7us.
Avg NPU gflops: 1831.01

Min NPU matmul time: 35093us.
Max NPU gflops: 1901.8

Max NPU matmul time: 38710us.
Min NPU gflops: 1724.1

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=float -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.3s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 32 -k 32 -n 32 --n-aie-cols 8 --b-col-maj 0 --dev npu2 -M 2304 -K 4352 -N 4352 --dtype_in bf16 --dtype_out f32 --emulate-bf16-mmul-with-bfp16 true --trace_size 0 > build/aie_2304x4352x4352_32x32x32_8c.mlir
mkdir -p build
cd build && /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie/bin/clang++ -O2 -std=c++20 --target=aie2p-none-unknown-elf -Wno-parentheses -Wno-attributes -Wno-macro-redefined -Wno-empty-body -DNDEBUG -I /scratch/luisr/mlir-aie/install/include  -Dbf16_f32_ONLY -DDIM_M=32 -DDIM_K=32 -DDIM_N=32 -DAIE_API_EMULATE_BFLOAT16_MMUL_WITH_BFP16 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_32x32x32.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_2304x4352x4352_32x32x32_8c.xclbin \
			--no-xchesscc --no-xbridge --peano /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie \
			--aie-generate-npu-insts --npu-insts-name=insts_2304x4352x4352_32x32x32_8c.txt ../build/aie_2304x4352x4352_32x32x32_8c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_2304x4352x4352_32x32x32_8c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_2304x4352x4352_32x32x32_8c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_2304x4352x4352_32x32x32_8c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_2304x4352x4352_32x32x32_8c.xclbin -i build/insts_2304x4352x4352_32x32x32_8c.txt -k MLIR_AIE -M 2304 -K 4352 -N 4352 --iters 20 --warmup 10 --b_col_maj 0





















Avg NPU matmul time: 50629.9us.
Avg NPU gflops: 1723.78

Min NPU matmul time: 48134us.
Max NPU gflops: 1813.17

Max NPU matmul time: 52288us.
Min NPU gflops: 1669.12

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=float -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.3s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 32 -k 32 -n 32 --n-aie-cols 8 --b-col-maj 0 --dev npu2 -M 3328 -K 256 -N 256 --dtype_in bf16 --dtype_out f32 --emulate-bf16-mmul-with-bfp16 true --trace_size 0 > build/aie_3328x256x256_32x32x32_8c.mlir
mkdir -p build
cd build && /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie/bin/clang++ -O2 -std=c++20 --target=aie2p-none-unknown-elf -Wno-parentheses -Wno-attributes -Wno-macro-redefined -Wno-empty-body -DNDEBUG -I /scratch/luisr/mlir-aie/install/include  -Dbf16_f32_ONLY -DDIM_M=32 -DDIM_K=32 -DDIM_N=32 -DAIE_API_EMULATE_BFLOAT16_MMUL_WITH_BFP16 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_32x32x32.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_3328x256x256_32x32x32_8c.xclbin \
			--no-xchesscc --no-xbridge --peano /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie \
			--aie-generate-npu-insts --npu-insts-name=insts_3328x256x256_32x32x32_8c.txt ../build/aie_3328x256x256_32x32x32_8c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_3328x256x256_32x32x32_8c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_3328x256x256_32x32x32_8c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_3328x256x256_32x32x32_8c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_3328x256x256_32x32x32_8c.xclbin -i build/insts_3328x256x256_32x32x32_8c.txt -k MLIR_AIE -M 3328 -K 256 -N 256 --iters 20 --warmup 10 --b_col_maj 0

Avg NPU matmul time: 1581.6us.
Avg NPU gflops: 275.801

Min NPU matmul time: 346us.
Max NPU gflops: 1260.72

Max NPU matmul time: 4060us.
Min NPU gflops: 107.44

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=float -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.2s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 32 -k 32 -n 32 --n-aie-cols 8 --b-col-maj 0 --dev npu2 -M 3328 -K 256 -N 1280 --dtype_in bf16 --dtype_out f32 --emulate-bf16-mmul-with-bfp16 true --trace_size 0 > build/aie_3328x256x1280_32x32x32_8c.mlir
mkdir -p build
cd build && /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie/bin/clang++ -O2 -std=c++20 --target=aie2p-none-unknown-elf -Wno-parentheses -Wno-attributes -Wno-macro-redefined -Wno-empty-body -DNDEBUG -I /scratch/luisr/mlir-aie/install/include  -Dbf16_f32_ONLY -DDIM_M=32 -DDIM_K=32 -DDIM_N=32 -DAIE_API_EMULATE_BFLOAT16_MMUL_WITH_BFP16 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_32x32x32.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_3328x256x1280_32x32x32_8c.xclbin \
			--no-xchesscc --no-xbridge --peano /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie \
			--aie-generate-npu-insts --npu-insts-name=insts_3328x256x1280_32x32x32_8c.txt ../build/aie_3328x256x1280_32x32x32_8c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_3328x256x1280_32x32x32_8c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_3328x256x1280_32x32x32_8c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_3328x256x1280_32x32x32_8c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_3328x256x1280_32x32x32_8c.xclbin -i build/insts_3328x256x1280_32x32x32_8c.txt -k MLIR_AIE -M 3328 -K 256 -N 1280 --iters 20 --warmup 10 --b_col_maj 0





















Avg NPU matmul time: 1780.05us.
Avg NPU gflops: 1225.27

Min NPU matmul time: 1632us.
Max NPU gflops: 1336.42

Max NPU matmul time: 2533us.
Min NPU gflops: 861.049

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=float -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.2s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 32 -k 32 -n 32 --n-aie-cols 8 --b-col-maj 0 --dev npu2 -M 3328 -K 256 -N 2304 --dtype_in bf16 --dtype_out f32 --emulate-bf16-mmul-with-bfp16 true --trace_size 0 > build/aie_3328x256x2304_32x32x32_8c.mlir
mkdir -p build
cd build && /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie/bin/clang++ -O2 -std=c++20 --target=aie2p-none-unknown-elf -Wno-parentheses -Wno-attributes -Wno-macro-redefined -Wno-empty-body -DNDEBUG -I /scratch/luisr/mlir-aie/install/include  -Dbf16_f32_ONLY -DDIM_M=32 -DDIM_K=32 -DDIM_N=32 -DAIE_API_EMULATE_BFLOAT16_MMUL_WITH_BFP16 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_32x32x32.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_3328x256x2304_32x32x32_8c.xclbin \
			--no-xchesscc --no-xbridge --peano /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie \
			--aie-generate-npu-insts --npu-insts-name=insts_3328x256x2304_32x32x32_8c.txt ../build/aie_3328x256x2304_32x32x32_8c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_3328x256x2304_32x32x32_8c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_3328x256x2304_32x32x32_8c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_3328x256x2304_32x32x32_8c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_3328x256x2304_32x32x32_8c.xclbin -i build/insts_3328x256x2304_32x32x32_8c.txt -k MLIR_AIE -M 3328 -K 256 -N 2304 --iters 20 --warmup 10 --b_col_maj 0





















Avg NPU matmul time: 2831.95us.
Avg NPU gflops: 1386.28

Min NPU matmul time: 2552us.
Max NPU gflops: 1538.35

Max NPU matmul time: 3378us.
Min NPU gflops: 1162.19

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=float -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.2s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 32 -k 32 -n 32 --n-aie-cols 8 --b-col-maj 0 --dev npu2 -M 3328 -K 256 -N 3328 --dtype_in bf16 --dtype_out f32 --emulate-bf16-mmul-with-bfp16 true --trace_size 0 > build/aie_3328x256x3328_32x32x32_8c.mlir
mkdir -p build
cd build && /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie/bin/clang++ -O2 -std=c++20 --target=aie2p-none-unknown-elf -Wno-parentheses -Wno-attributes -Wno-macro-redefined -Wno-empty-body -DNDEBUG -I /scratch/luisr/mlir-aie/install/include  -Dbf16_f32_ONLY -DDIM_M=32 -DDIM_K=32 -DDIM_N=32 -DAIE_API_EMULATE_BFLOAT16_MMUL_WITH_BFP16 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_32x32x32.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_3328x256x3328_32x32x32_8c.xclbin \
			--no-xchesscc --no-xbridge --peano /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie \
			--aie-generate-npu-insts --npu-insts-name=insts_3328x256x3328_32x32x32_8c.txt ../build/aie_3328x256x3328_32x32x32_8c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_3328x256x3328_32x32x32_8c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_3328x256x3328_32x32x32_8c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_3328x256x3328_32x32x32_8c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_3328x256x3328_32x32x32_8c.xclbin -i build/insts_3328x256x3328_32x32x32_8c.txt -k MLIR_AIE -M 3328 -K 256 -N 3328 --iters 20 --warmup 10 --b_col_maj 0





















Avg NPU matmul time: 3926.05us.
Avg NPU gflops: 1444.38

Min NPU matmul time: 3333us.
Max NPU gflops: 1701.38

Max NPU matmul time: 6816us.
Min NPU gflops: 831.969

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=float -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.3s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 32 -k 32 -n 32 --n-aie-cols 8 --b-col-maj 0 --dev npu2 -M 3328 -K 256 -N 4352 --dtype_in bf16 --dtype_out f32 --emulate-bf16-mmul-with-bfp16 true --trace_size 0 > build/aie_3328x256x4352_32x32x32_8c.mlir
mkdir -p build
cd build && /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie/bin/clang++ -O2 -std=c++20 --target=aie2p-none-unknown-elf -Wno-parentheses -Wno-attributes -Wno-macro-redefined -Wno-empty-body -DNDEBUG -I /scratch/luisr/mlir-aie/install/include  -Dbf16_f32_ONLY -DDIM_M=32 -DDIM_K=32 -DDIM_N=32 -DAIE_API_EMULATE_BFLOAT16_MMUL_WITH_BFP16 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_32x32x32.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_3328x256x4352_32x32x32_8c.xclbin \
			--no-xchesscc --no-xbridge --peano /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie \
			--aie-generate-npu-insts --npu-insts-name=insts_3328x256x4352_32x32x32_8c.txt ../build/aie_3328x256x4352_32x32x32_8c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_3328x256x4352_32x32x32_8c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_3328x256x4352_32x32x32_8c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_3328x256x4352_32x32x32_8c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_3328x256x4352_32x32x32_8c.xclbin -i build/insts_3328x256x4352_32x32x32_8c.txt -k MLIR_AIE -M 3328 -K 256 -N 4352 --iters 20 --warmup 10 --b_col_maj 0





















Avg NPU matmul time: 4894.25us.
Avg NPU gflops: 1515.15

Min NPU matmul time: 4708us.
Max NPU gflops: 1575.09

Max NPU matmul time: 5670us.
Min NPU gflops: 1307.85

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=float -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.3s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 32 -k 32 -n 32 --n-aie-cols 8 --b-col-maj 0 --dev npu2 -M 3328 -K 1280 -N 256 --dtype_in bf16 --dtype_out f32 --emulate-bf16-mmul-with-bfp16 true --trace_size 0 > build/aie_3328x1280x256_32x32x32_8c.mlir
mkdir -p build
cd build && /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie/bin/clang++ -O2 -std=c++20 --target=aie2p-none-unknown-elf -Wno-parentheses -Wno-attributes -Wno-macro-redefined -Wno-empty-body -DNDEBUG -I /scratch/luisr/mlir-aie/install/include  -Dbf16_f32_ONLY -DDIM_M=32 -DDIM_K=32 -DDIM_N=32 -DAIE_API_EMULATE_BFLOAT16_MMUL_WITH_BFP16 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_32x32x32.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_3328x1280x256_32x32x32_8c.xclbin \
			--no-xchesscc --no-xbridge --peano /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie \
			--aie-generate-npu-insts --npu-insts-name=insts_3328x1280x256_32x32x32_8c.txt ../build/aie_3328x1280x256_32x32x32_8c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_3328x1280x256_32x32x32_8c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_3328x1280x256_32x32x32_8c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_3328x1280x256_32x32x32_8c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_3328x1280x256_32x32x32_8c.xclbin -i build/insts_3328x1280x256_32x32x32_8c.txt -k MLIR_AIE -M 3328 -K 1280 -N 256 --iters 20 --warmup 10 --b_col_maj 0





















Avg NPU matmul time: 1518.7us.
Avg NPU gflops: 1436.12

Min NPU matmul time: 1396us.
Max NPU gflops: 1562.35

Max NPU matmul time: 1718us.
Min NPU gflops: 1269.52

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=float -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.3s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 32 -k 32 -n 32 --n-aie-cols 8 --b-col-maj 0 --dev npu2 -M 3328 -K 1280 -N 1280 --dtype_in bf16 --dtype_out f32 --emulate-bf16-mmul-with-bfp16 true --trace_size 0 > build/aie_3328x1280x1280_32x32x32_8c.mlir
mkdir -p build
cd build && /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie/bin/clang++ -O2 -std=c++20 --target=aie2p-none-unknown-elf -Wno-parentheses -Wno-attributes -Wno-macro-redefined -Wno-empty-body -DNDEBUG -I /scratch/luisr/mlir-aie/install/include  -Dbf16_f32_ONLY -DDIM_M=32 -DDIM_K=32 -DDIM_N=32 -DAIE_API_EMULATE_BFLOAT16_MMUL_WITH_BFP16 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_32x32x32.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_3328x1280x1280_32x32x32_8c.xclbin \
			--no-xchesscc --no-xbridge --peano /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie \
			--aie-generate-npu-insts --npu-insts-name=insts_3328x1280x1280_32x32x32_8c.txt ../build/aie_3328x1280x1280_32x32x32_8c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_3328x1280x1280_32x32x32_8c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_3328x1280x1280_32x32x32_8c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_3328x1280x1280_32x32x32_8c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_3328x1280x1280_32x32x32_8c.xclbin -i build/insts_3328x1280x1280_32x32x32_8c.txt -k MLIR_AIE -M 3328 -K 1280 -N 1280 --iters 20 --warmup 10 --b_col_maj 0





















Avg NPU matmul time: 6564.8us.
Avg NPU gflops: 1661.16

Min NPU matmul time: 5530us.
Max NPU gflops: 1972.01

Max NPU matmul time: 10057us.
Min NPU gflops: 1084.34

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=float -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.3s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 32 -k 32 -n 32 --n-aie-cols 8 --b-col-maj 0 --dev npu2 -M 3328 -K 1280 -N 2304 --dtype_in bf16 --dtype_out f32 --emulate-bf16-mmul-with-bfp16 true --trace_size 0 > build/aie_3328x1280x2304_32x32x32_8c.mlir
mkdir -p build
cd build && /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie/bin/clang++ -O2 -std=c++20 --target=aie2p-none-unknown-elf -Wno-parentheses -Wno-attributes -Wno-macro-redefined -Wno-empty-body -DNDEBUG -I /scratch/luisr/mlir-aie/install/include  -Dbf16_f32_ONLY -DDIM_M=32 -DDIM_K=32 -DDIM_N=32 -DAIE_API_EMULATE_BFLOAT16_MMUL_WITH_BFP16 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_32x32x32.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_3328x1280x2304_32x32x32_8c.xclbin \
			--no-xchesscc --no-xbridge --peano /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie \
			--aie-generate-npu-insts --npu-insts-name=insts_3328x1280x2304_32x32x32_8c.txt ../build/aie_3328x1280x2304_32x32x32_8c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_3328x1280x2304_32x32x32_8c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_3328x1280x2304_32x32x32_8c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_3328x1280x2304_32x32x32_8c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_3328x1280x2304_32x32x32_8c.xclbin -i build/insts_3328x1280x2304_32x32x32_8c.txt -k MLIR_AIE -M 3328 -K 1280 -N 2304 --iters 20 --warmup 10 --b_col_maj 0





















Avg NPU matmul time: 11587.5us.
Avg NPU gflops: 1694.02

Min NPU matmul time: 10895us.
Max NPU gflops: 1801.68

Max NPU matmul time: 14286us.
Min NPU gflops: 1374.03

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=float -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.3s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 32 -k 32 -n 32 --n-aie-cols 8 --b-col-maj 0 --dev npu2 -M 3328 -K 1280 -N 3328 --dtype_in bf16 --dtype_out f32 --emulate-bf16-mmul-with-bfp16 true --trace_size 0 > build/aie_3328x1280x3328_32x32x32_8c.mlir
mkdir -p build
cd build && /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie/bin/clang++ -O2 -std=c++20 --target=aie2p-none-unknown-elf -Wno-parentheses -Wno-attributes -Wno-macro-redefined -Wno-empty-body -DNDEBUG -I /scratch/luisr/mlir-aie/install/include  -Dbf16_f32_ONLY -DDIM_M=32 -DDIM_K=32 -DDIM_N=32 -DAIE_API_EMULATE_BFLOAT16_MMUL_WITH_BFP16 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_32x32x32.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_3328x1280x3328_32x32x32_8c.xclbin \
			--no-xchesscc --no-xbridge --peano /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie \
			--aie-generate-npu-insts --npu-insts-name=insts_3328x1280x3328_32x32x32_8c.txt ../build/aie_3328x1280x3328_32x32x32_8c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_3328x1280x3328_32x32x32_8c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_3328x1280x3328_32x32x32_8c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_3328x1280x3328_32x32x32_8c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_3328x1280x3328_32x32x32_8c.xclbin -i build/insts_3328x1280x3328_32x32x32_8c.txt -k MLIR_AIE -M 3328 -K 1280 -N 3328 --iters 20 --warmup 10 --b_col_maj 0





















Avg NPU matmul time: 17719.2us.
Avg NPU gflops: 1600.16

Min NPU matmul time: 15521us.
Max NPU gflops: 1826.78

Max NPU matmul time: 20071us.
Min NPU gflops: 1412.66

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=float -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.3s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 32 -k 32 -n 32 --n-aie-cols 8 --b-col-maj 0 --dev npu2 -M 3328 -K 1280 -N 4352 --dtype_in bf16 --dtype_out f32 --emulate-bf16-mmul-with-bfp16 true --trace_size 0 > build/aie_3328x1280x4352_32x32x32_8c.mlir
mkdir -p build
cd build && /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie/bin/clang++ -O2 -std=c++20 --target=aie2p-none-unknown-elf -Wno-parentheses -Wno-attributes -Wno-macro-redefined -Wno-empty-body -DNDEBUG -I /scratch/luisr/mlir-aie/install/include  -Dbf16_f32_ONLY -DDIM_M=32 -DDIM_K=32 -DDIM_N=32 -DAIE_API_EMULATE_BFLOAT16_MMUL_WITH_BFP16 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_32x32x32.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_3328x1280x4352_32x32x32_8c.xclbin \
			--no-xchesscc --no-xbridge --peano /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie \
			--aie-generate-npu-insts --npu-insts-name=insts_3328x1280x4352_32x32x32_8c.txt ../build/aie_3328x1280x4352_32x32x32_8c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_3328x1280x4352_32x32x32_8c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_3328x1280x4352_32x32x32_8c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_3328x1280x4352_32x32x32_8c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_3328x1280x4352_32x32x32_8c.xclbin -i build/insts_3328x1280x4352_32x32x32_8c.txt -k MLIR_AIE -M 3328 -K 1280 -N 4352 --iters 20 --warmup 10 --b_col_maj 0





















Avg NPU matmul time: 21282.6us.
Avg NPU gflops: 1742.16

Min NPU matmul time: 20400us.
Max NPU gflops: 1817.53

Max NPU matmul time: 24330us.
Min NPU gflops: 1523.95

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=float -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.2s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 32 -k 32 -n 32 --n-aie-cols 8 --b-col-maj 0 --dev npu2 -M 3328 -K 2304 -N 256 --dtype_in bf16 --dtype_out f32 --emulate-bf16-mmul-with-bfp16 true --trace_size 0 > build/aie_3328x2304x256_32x32x32_8c.mlir
mkdir -p build
cd build && /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie/bin/clang++ -O2 -std=c++20 --target=aie2p-none-unknown-elf -Wno-parentheses -Wno-attributes -Wno-macro-redefined -Wno-empty-body -DNDEBUG -I /scratch/luisr/mlir-aie/install/include  -Dbf16_f32_ONLY -DDIM_M=32 -DDIM_K=32 -DDIM_N=32 -DAIE_API_EMULATE_BFLOAT16_MMUL_WITH_BFP16 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_32x32x32.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_3328x2304x256_32x32x32_8c.xclbin \
			--no-xchesscc --no-xbridge --peano /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie \
			--aie-generate-npu-insts --npu-insts-name=insts_3328x2304x256_32x32x32_8c.txt ../build/aie_3328x2304x256_32x32x32_8c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_3328x2304x256_32x32x32_8c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_3328x2304x256_32x32x32_8c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_3328x2304x256_32x32x32_8c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_3328x2304x256_32x32x32_8c.xclbin -i build/insts_3328x2304x256_32x32x32_8c.txt -k MLIR_AIE -M 3328 -K 2304 -N 256 --iters 20 --warmup 10 --b_col_maj 0





















Avg NPU matmul time: 2992.45us.
Avg NPU gflops: 1311.92

Min NPU matmul time: 1876us.
Max NPU gflops: 2092.68

Max NPU matmul time: 6243us.
Min NPU gflops: 628.843

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=float -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.2s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 32 -k 32 -n 32 --n-aie-cols 8 --b-col-maj 0 --dev npu2 -M 3328 -K 2304 -N 1280 --dtype_in bf16 --dtype_out f32 --emulate-bf16-mmul-with-bfp16 true --trace_size 0 > build/aie_3328x2304x1280_32x32x32_8c.mlir
mkdir -p build
cd build && /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie/bin/clang++ -O2 -std=c++20 --target=aie2p-none-unknown-elf -Wno-parentheses -Wno-attributes -Wno-macro-redefined -Wno-empty-body -DNDEBUG -I /scratch/luisr/mlir-aie/install/include  -Dbf16_f32_ONLY -DDIM_M=32 -DDIM_K=32 -DDIM_N=32 -DAIE_API_EMULATE_BFLOAT16_MMUL_WITH_BFP16 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_32x32x32.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_3328x2304x1280_32x32x32_8c.xclbin \
			--no-xchesscc --no-xbridge --peano /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie \
			--aie-generate-npu-insts --npu-insts-name=insts_3328x2304x1280_32x32x32_8c.txt ../build/aie_3328x2304x1280_32x32x32_8c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_3328x2304x1280_32x32x32_8c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_3328x2304x1280_32x32x32_8c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_3328x2304x1280_32x32x32_8c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_3328x2304x1280_32x32x32_8c.xclbin -i build/insts_3328x2304x1280_32x32x32_8c.txt -k MLIR_AIE -M 3328 -K 2304 -N 1280 --iters 20 --warmup 10 --b_col_maj 0





















Avg NPU matmul time: 10801.2us.
Avg NPU gflops: 1817.32

Min NPU matmul time: 9938us.
Max NPU gflops: 1975.18

Max NPU matmul time: 13702us.
Min NPU gflops: 1432.59

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=float -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.3s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 32 -k 32 -n 32 --n-aie-cols 8 --b-col-maj 0 --dev npu2 -M 3328 -K 2304 -N 2304 --dtype_in bf16 --dtype_out f32 --emulate-bf16-mmul-with-bfp16 true --trace_size 0 > build/aie_3328x2304x2304_32x32x32_8c.mlir
mkdir -p build
cd build && /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie/bin/clang++ -O2 -std=c++20 --target=aie2p-none-unknown-elf -Wno-parentheses -Wno-attributes -Wno-macro-redefined -Wno-empty-body -DNDEBUG -I /scratch/luisr/mlir-aie/install/include  -Dbf16_f32_ONLY -DDIM_M=32 -DDIM_K=32 -DDIM_N=32 -DAIE_API_EMULATE_BFLOAT16_MMUL_WITH_BFP16 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_32x32x32.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_3328x2304x2304_32x32x32_8c.xclbin \
			--no-xchesscc --no-xbridge --peano /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie \
			--aie-generate-npu-insts --npu-insts-name=insts_3328x2304x2304_32x32x32_8c.txt ../build/aie_3328x2304x2304_32x32x32_8c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_3328x2304x2304_32x32x32_8c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_3328x2304x2304_32x32x32_8c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_3328x2304x2304_32x32x32_8c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_3328x2304x2304_32x32x32_8c.xclbin -i build/insts_3328x2304x2304_32x32x32_8c.txt -k MLIR_AIE -M 3328 -K 2304 -N 2304 --iters 20 --warmup 10 --b_col_maj 0





















Avg NPU matmul time: 19881.7us.
Avg NPU gflops: 1777.16

Min NPU matmul time: 18731us.
Max NPU gflops: 1886.33

Max NPU matmul time: 22804us.
Min NPU gflops: 1549.41

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=float -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.3s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 32 -k 32 -n 32 --n-aie-cols 8 --b-col-maj 0 --dev npu2 -M 3328 -K 2304 -N 3328 --dtype_in bf16 --dtype_out f32 --emulate-bf16-mmul-with-bfp16 true --trace_size 0 > build/aie_3328x2304x3328_32x32x32_8c.mlir
mkdir -p build
cd build && /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie/bin/clang++ -O2 -std=c++20 --target=aie2p-none-unknown-elf -Wno-parentheses -Wno-attributes -Wno-macro-redefined -Wno-empty-body -DNDEBUG -I /scratch/luisr/mlir-aie/install/include  -Dbf16_f32_ONLY -DDIM_M=32 -DDIM_K=32 -DDIM_N=32 -DAIE_API_EMULATE_BFLOAT16_MMUL_WITH_BFP16 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_32x32x32.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_3328x2304x3328_32x32x32_8c.xclbin \
			--no-xchesscc --no-xbridge --peano /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie \
			--aie-generate-npu-insts --npu-insts-name=insts_3328x2304x3328_32x32x32_8c.txt ../build/aie_3328x2304x3328_32x32x32_8c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_3328x2304x3328_32x32x32_8c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_3328x2304x3328_32x32x32_8c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_3328x2304x3328_32x32x32_8c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_3328x2304x3328_32x32x32_8c.xclbin -i build/insts_3328x2304x3328_32x32x32_8c.txt -k MLIR_AIE -M 3328 -K 2304 -N 3328 --iters 20 --warmup 10 --b_col_maj 0





















Avg NPU matmul time: 29627.6us.
Avg NPU gflops: 1722.59

Min NPU matmul time: 27493us.
Max NPU gflops: 1856.34

Max NPU matmul time: 31297us.
Min NPU gflops: 1630.71

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=float -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.3s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 32 -k 32 -n 32 --n-aie-cols 8 --b-col-maj 0 --dev npu2 -M 3328 -K 2304 -N 4352 --dtype_in bf16 --dtype_out f32 --emulate-bf16-mmul-with-bfp16 true --trace_size 0 > build/aie_3328x2304x4352_32x32x32_8c.mlir
mkdir -p build
cd build && /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie/bin/clang++ -O2 -std=c++20 --target=aie2p-none-unknown-elf -Wno-parentheses -Wno-attributes -Wno-macro-redefined -Wno-empty-body -DNDEBUG -I /scratch/luisr/mlir-aie/install/include  -Dbf16_f32_ONLY -DDIM_M=32 -DDIM_K=32 -DDIM_N=32 -DAIE_API_EMULATE_BFLOAT16_MMUL_WITH_BFP16 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_32x32x32.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_3328x2304x4352_32x32x32_8c.xclbin \
			--no-xchesscc --no-xbridge --peano /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie \
			--aie-generate-npu-insts --npu-insts-name=insts_3328x2304x4352_32x32x32_8c.txt ../build/aie_3328x2304x4352_32x32x32_8c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_3328x2304x4352_32x32x32_8c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_3328x2304x4352_32x32x32_8c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_3328x2304x4352_32x32x32_8c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_3328x2304x4352_32x32x32_8c.xclbin -i build/insts_3328x2304x4352_32x32x32_8c.txt -k MLIR_AIE -M 3328 -K 2304 -N 4352 --iters 20 --warmup 10 --b_col_maj 0





















Avg NPU matmul time: 36858.4us.
Avg NPU gflops: 1810.7

Min NPU matmul time: 35829us.
Max NPU gflops: 1862.73

Max NPU matmul time: 39224us.
Min NPU gflops: 1701.5

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=float -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.2s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 32 -k 32 -n 32 --n-aie-cols 8 --b-col-maj 0 --dev npu2 -M 3328 -K 3328 -N 256 --dtype_in bf16 --dtype_out f32 --emulate-bf16-mmul-with-bfp16 true --trace_size 0 > build/aie_3328x3328x256_32x32x32_8c.mlir
mkdir -p build
cd build && /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie/bin/clang++ -O2 -std=c++20 --target=aie2p-none-unknown-elf -Wno-parentheses -Wno-attributes -Wno-macro-redefined -Wno-empty-body -DNDEBUG -I /scratch/luisr/mlir-aie/install/include  -Dbf16_f32_ONLY -DDIM_M=32 -DDIM_K=32 -DDIM_N=32 -DAIE_API_EMULATE_BFLOAT16_MMUL_WITH_BFP16 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_32x32x32.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_3328x3328x256_32x32x32_8c.xclbin \
			--no-xchesscc --no-xbridge --peano /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie \
			--aie-generate-npu-insts --npu-insts-name=insts_3328x3328x256_32x32x32_8c.txt ../build/aie_3328x3328x256_32x32x32_8c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_3328x3328x256_32x32x32_8c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_3328x3328x256_32x32x32_8c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_3328x3328x256_32x32x32_8c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_3328x3328x256_32x32x32_8c.xclbin -i build/insts_3328x3328x256_32x32x32_8c.txt -k MLIR_AIE -M 3328 -K 3328 -N 256 --iters 20 --warmup 10 --b_col_maj 0





















Avg NPU matmul time: 3606.4us.
Avg NPU gflops: 1572.4

Min NPU matmul time: 2630us.
Max NPU gflops: 2156.16

Max NPU matmul time: 6330us.
Min NPU gflops: 895.845

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=float -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.3s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 32 -k 32 -n 32 --n-aie-cols 8 --b-col-maj 0 --dev npu2 -M 3328 -K 3328 -N 1280 --dtype_in bf16 --dtype_out f32 --emulate-bf16-mmul-with-bfp16 true --trace_size 0 > build/aie_3328x3328x1280_32x32x32_8c.mlir
mkdir -p build
cd build && /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie/bin/clang++ -O2 -std=c++20 --target=aie2p-none-unknown-elf -Wno-parentheses -Wno-attributes -Wno-macro-redefined -Wno-empty-body -DNDEBUG -I /scratch/luisr/mlir-aie/install/include  -Dbf16_f32_ONLY -DDIM_M=32 -DDIM_K=32 -DDIM_N=32 -DAIE_API_EMULATE_BFLOAT16_MMUL_WITH_BFP16 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_32x32x32.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_3328x3328x1280_32x32x32_8c.xclbin \
			--no-xchesscc --no-xbridge --peano /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie \
			--aie-generate-npu-insts --npu-insts-name=insts_3328x3328x1280_32x32x32_8c.txt ../build/aie_3328x3328x1280_32x32x32_8c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_3328x3328x1280_32x32x32_8c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_3328x3328x1280_32x32x32_8c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_3328x3328x1280_32x32x32_8c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_3328x3328x1280_32x32x32_8c.xclbin -i build/insts_3328x3328x1280_32x32x32_8c.txt -k MLIR_AIE -M 3328 -K 3328 -N 1280 --iters 20 --warmup 10 --b_col_maj 0





















Avg NPU matmul time: 15409us.
Avg NPU gflops: 1840.05

Min NPU matmul time: 14472us.
Max NPU gflops: 1959.2

Max NPU matmul time: 18819us.
Min NPU gflops: 1506.64

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=float -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.3s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 32 -k 32 -n 32 --n-aie-cols 8 --b-col-maj 0 --dev npu2 -M 3328 -K 3328 -N 2304 --dtype_in bf16 --dtype_out f32 --emulate-bf16-mmul-with-bfp16 true --trace_size 0 > build/aie_3328x3328x2304_32x32x32_8c.mlir
mkdir -p build
cd build && /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie/bin/clang++ -O2 -std=c++20 --target=aie2p-none-unknown-elf -Wno-parentheses -Wno-attributes -Wno-macro-redefined -Wno-empty-body -DNDEBUG -I /scratch/luisr/mlir-aie/install/include  -Dbf16_f32_ONLY -DDIM_M=32 -DDIM_K=32 -DDIM_N=32 -DAIE_API_EMULATE_BFLOAT16_MMUL_WITH_BFP16 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_32x32x32.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_3328x3328x2304_32x32x32_8c.xclbin \
			--no-xchesscc --no-xbridge --peano /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie \
			--aie-generate-npu-insts --npu-insts-name=insts_3328x3328x2304_32x32x32_8c.txt ../build/aie_3328x3328x2304_32x32x32_8c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_3328x3328x2304_32x32x32_8c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_3328x3328x2304_32x32x32_8c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_3328x3328x2304_32x32x32_8c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_3328x3328x2304_32x32x32_8c.xclbin -i build/insts_3328x3328x2304_32x32x32_8c.txt -k MLIR_AIE -M 3328 -K 3328 -N 2304 --iters 20 --warmup 10 --b_col_maj 0





















Avg NPU matmul time: 28276.2us.
Avg NPU gflops: 1804.92

Min NPU matmul time: 26755us.
Max NPU gflops: 1907.54

Max NPU matmul time: 31016us.
Min NPU gflops: 1645.48

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=float -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.3s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 32 -k 32 -n 32 --n-aie-cols 8 --b-col-maj 0 --dev npu2 -M 3328 -K 3328 -N 3328 --dtype_in bf16 --dtype_out f32 --emulate-bf16-mmul-with-bfp16 true --trace_size 0 > build/aie_3328x3328x3328_32x32x32_8c.mlir
mkdir -p build
cd build && /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie/bin/clang++ -O2 -std=c++20 --target=aie2p-none-unknown-elf -Wno-parentheses -Wno-attributes -Wno-macro-redefined -Wno-empty-body -DNDEBUG -I /scratch/luisr/mlir-aie/install/include  -Dbf16_f32_ONLY -DDIM_M=32 -DDIM_K=32 -DDIM_N=32 -DAIE_API_EMULATE_BFLOAT16_MMUL_WITH_BFP16 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_32x32x32.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_3328x3328x3328_32x32x32_8c.xclbin \
			--no-xchesscc --no-xbridge --peano /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie \
			--aie-generate-npu-insts --npu-insts-name=insts_3328x3328x3328_32x32x32_8c.txt ../build/aie_3328x3328x3328_32x32x32_8c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_3328x3328x3328_32x32x32_8c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_3328x3328x3328_32x32x32_8c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_3328x3328x3328_32x32x32_8c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_3328x3328x3328_32x32x32_8c.xclbin -i build/insts_3328x3328x3328_32x32x32_8c.txt -k MLIR_AIE -M 3328 -K 3328 -N 3328 --iters 20 --warmup 10 --b_col_maj 0





















Avg NPU matmul time: 42541.9us.
Avg NPU gflops: 1732.86

Min NPU matmul time: 39803us.
Max NPU gflops: 1852.1

Max NPU matmul time: 43992us.
Min NPU gflops: 1675.74

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=float -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.3s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 32 -k 32 -n 32 --n-aie-cols 8 --b-col-maj 0 --dev npu2 -M 3328 -K 3328 -N 4352 --dtype_in bf16 --dtype_out f32 --emulate-bf16-mmul-with-bfp16 true --trace_size 0 > build/aie_3328x3328x4352_32x32x32_8c.mlir
mkdir -p build
cd build && /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie/bin/clang++ -O2 -std=c++20 --target=aie2p-none-unknown-elf -Wno-parentheses -Wno-attributes -Wno-macro-redefined -Wno-empty-body -DNDEBUG -I /scratch/luisr/mlir-aie/install/include  -Dbf16_f32_ONLY -DDIM_M=32 -DDIM_K=32 -DDIM_N=32 -DAIE_API_EMULATE_BFLOAT16_MMUL_WITH_BFP16 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_32x32x32.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_3328x3328x4352_32x32x32_8c.xclbin \
			--no-xchesscc --no-xbridge --peano /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie \
			--aie-generate-npu-insts --npu-insts-name=insts_3328x3328x4352_32x32x32_8c.txt ../build/aie_3328x3328x4352_32x32x32_8c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_3328x3328x4352_32x32x32_8c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_3328x3328x4352_32x32x32_8c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_3328x3328x4352_32x32x32_8c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_3328x3328x4352_32x32x32_8c.xclbin -i build/insts_3328x3328x4352_32x32x32_8c.txt -k MLIR_AIE -M 3328 -K 3328 -N 4352 --iters 20 --warmup 10 --b_col_maj 0





















Avg NPU matmul time: 53716us.
Avg NPU gflops: 1794.66

Min NPU matmul time: 50662us.
Max NPU gflops: 1902.84

Max NPU matmul time: 56676us.
Min NPU gflops: 1700.93

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=float -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.3s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 32 -k 32 -n 32 --n-aie-cols 8 --b-col-maj 0 --dev npu2 -M 3328 -K 4352 -N 256 --dtype_in bf16 --dtype_out f32 --emulate-bf16-mmul-with-bfp16 true --trace_size 0 > build/aie_3328x4352x256_32x32x32_8c.mlir
mkdir -p build
cd build && /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie/bin/clang++ -O2 -std=c++20 --target=aie2p-none-unknown-elf -Wno-parentheses -Wno-attributes -Wno-macro-redefined -Wno-empty-body -DNDEBUG -I /scratch/luisr/mlir-aie/install/include  -Dbf16_f32_ONLY -DDIM_M=32 -DDIM_K=32 -DDIM_N=32 -DAIE_API_EMULATE_BFLOAT16_MMUL_WITH_BFP16 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_32x32x32.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_3328x4352x256_32x32x32_8c.xclbin \
			--no-xchesscc --no-xbridge --peano /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie \
			--aie-generate-npu-insts --npu-insts-name=insts_3328x4352x256_32x32x32_8c.txt ../build/aie_3328x4352x256_32x32x32_8c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_3328x4352x256_32x32x32_8c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_3328x4352x256_32x32x32_8c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_3328x4352x256_32x32x32_8c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_3328x4352x256_32x32x32_8c.xclbin -i build/insts_3328x4352x256_32x32x32_8c.txt -k MLIR_AIE -M 3328 -K 4352 -N 256 --iters 20 --warmup 10 --b_col_maj 0





















Avg NPU matmul time: 4562.5us.
Avg NPU gflops: 1625.32

Min NPU matmul time: 3643us.
Max NPU gflops: 2035.56

Max NPU matmul time: 7353us.
Min NPU gflops: 1008.5

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=float -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.3s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 32 -k 32 -n 32 --n-aie-cols 8 --b-col-maj 0 --dev npu2 -M 3328 -K 4352 -N 1280 --dtype_in bf16 --dtype_out f32 --emulate-bf16-mmul-with-bfp16 true --trace_size 0 > build/aie_3328x4352x1280_32x32x32_8c.mlir
mkdir -p build
cd build && /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie/bin/clang++ -O2 -std=c++20 --target=aie2p-none-unknown-elf -Wno-parentheses -Wno-attributes -Wno-macro-redefined -Wno-empty-body -DNDEBUG -I /scratch/luisr/mlir-aie/install/include  -Dbf16_f32_ONLY -DDIM_M=32 -DDIM_K=32 -DDIM_N=32 -DAIE_API_EMULATE_BFLOAT16_MMUL_WITH_BFP16 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_32x32x32.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_3328x4352x1280_32x32x32_8c.xclbin \
			--no-xchesscc --no-xbridge --peano /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie \
			--aie-generate-npu-insts --npu-insts-name=insts_3328x4352x1280_32x32x32_8c.txt ../build/aie_3328x4352x1280_32x32x32_8c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_3328x4352x1280_32x32x32_8c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_3328x4352x1280_32x32x32_8c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_3328x4352x1280_32x32x32_8c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_3328x4352x1280_32x32x32_8c.xclbin -i build/insts_3328x4352x1280_32x32x32_8c.txt -k MLIR_AIE -M 3328 -K 4352 -N 1280 --iters 20 --warmup 10 --b_col_maj 0





















Avg NPU matmul time: 19511.9us.
Avg NPU gflops: 1900.26

Min NPU matmul time: 18441us.
Max NPU gflops: 2010.61

Max NPU matmul time: 22507us.
Min NPU gflops: 1647.38

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=float -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.3s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 32 -k 32 -n 32 --n-aie-cols 8 --b-col-maj 0 --dev npu2 -M 3328 -K 4352 -N 2304 --dtype_in bf16 --dtype_out f32 --emulate-bf16-mmul-with-bfp16 true --trace_size 0 > build/aie_3328x4352x2304_32x32x32_8c.mlir
mkdir -p build
cd build && /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie/bin/clang++ -O2 -std=c++20 --target=aie2p-none-unknown-elf -Wno-parentheses -Wno-attributes -Wno-macro-redefined -Wno-empty-body -DNDEBUG -I /scratch/luisr/mlir-aie/install/include  -Dbf16_f32_ONLY -DDIM_M=32 -DDIM_K=32 -DDIM_N=32 -DAIE_API_EMULATE_BFLOAT16_MMUL_WITH_BFP16 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_32x32x32.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_3328x4352x2304_32x32x32_8c.xclbin \
			--no-xchesscc --no-xbridge --peano /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie \
			--aie-generate-npu-insts --npu-insts-name=insts_3328x4352x2304_32x32x32_8c.txt ../build/aie_3328x4352x2304_32x32x32_8c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_3328x4352x2304_32x32x32_8c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_3328x4352x2304_32x32x32_8c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_3328x4352x2304_32x32x32_8c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_3328x4352x2304_32x32x32_8c.xclbin -i build/insts_3328x4352x2304_32x32x32_8c.txt -k MLIR_AIE -M 3328 -K 4352 -N 2304 --iters 20 --warmup 10 --b_col_maj 0





















Avg NPU matmul time: 36169.9us.
Avg NPU gflops: 1845.18

Min NPU matmul time: 34365us.
Max NPU gflops: 1942.09

Max NPU matmul time: 38846us.
Min NPU gflops: 1718.06

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=float -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.3s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 32 -k 32 -n 32 --n-aie-cols 8 --b-col-maj 0 --dev npu2 -M 3328 -K 4352 -N 3328 --dtype_in bf16 --dtype_out f32 --emulate-bf16-mmul-with-bfp16 true --trace_size 0 > build/aie_3328x4352x3328_32x32x32_8c.mlir
mkdir -p build
cd build && /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie/bin/clang++ -O2 -std=c++20 --target=aie2p-none-unknown-elf -Wno-parentheses -Wno-attributes -Wno-macro-redefined -Wno-empty-body -DNDEBUG -I /scratch/luisr/mlir-aie/install/include  -Dbf16_f32_ONLY -DDIM_M=32 -DDIM_K=32 -DDIM_N=32 -DAIE_API_EMULATE_BFLOAT16_MMUL_WITH_BFP16 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_32x32x32.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_3328x4352x3328_32x32x32_8c.xclbin \
			--no-xchesscc --no-xbridge --peano /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie \
			--aie-generate-npu-insts --npu-insts-name=insts_3328x4352x3328_32x32x32_8c.txt ../build/aie_3328x4352x3328_32x32x32_8c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_3328x4352x3328_32x32x32_8c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_3328x4352x3328_32x32x32_8c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_3328x4352x3328_32x32x32_8c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_3328x4352x3328_32x32x32_8c.xclbin -i build/insts_3328x4352x3328_32x32x32_8c.txt -k MLIR_AIE -M 3328 -K 4352 -N 3328 --iters 20 --warmup 10 --b_col_maj 0





















Avg NPU matmul time: 54229.9us.
Avg NPU gflops: 1777.65

Min NPU matmul time: 51914us.
Max NPU gflops: 1856.95

Max NPU matmul time: 55923us.
Min NPU gflops: 1723.83

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=float -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.3s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 32 -k 32 -n 32 --n-aie-cols 8 --b-col-maj 0 --dev npu2 -M 3328 -K 4352 -N 4352 --dtype_in bf16 --dtype_out f32 --emulate-bf16-mmul-with-bfp16 true --trace_size 0 > build/aie_3328x4352x4352_32x32x32_8c.mlir
mkdir -p build
cd build && /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie/bin/clang++ -O2 -std=c++20 --target=aie2p-none-unknown-elf -Wno-parentheses -Wno-attributes -Wno-macro-redefined -Wno-empty-body -DNDEBUG -I /scratch/luisr/mlir-aie/install/include  -Dbf16_f32_ONLY -DDIM_M=32 -DDIM_K=32 -DDIM_N=32 -DAIE_API_EMULATE_BFLOAT16_MMUL_WITH_BFP16 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_32x32x32.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_3328x4352x4352_32x32x32_8c.xclbin \
			--no-xchesscc --no-xbridge --peano /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie \
			--aie-generate-npu-insts --npu-insts-name=insts_3328x4352x4352_32x32x32_8c.txt ../build/aie_3328x4352x4352_32x32x32_8c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_3328x4352x4352_32x32x32_8c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_3328x4352x4352_32x32x32_8c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_3328x4352x4352_32x32x32_8c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_3328x4352x4352_32x32x32_8c.xclbin -i build/insts_3328x4352x4352_32x32x32_8c.txt -k MLIR_AIE -M 3328 -K 4352 -N 4352 --iters 20 --warmup 10 --b_col_maj 0





















Avg NPU matmul time: 70751.2us.
Avg NPU gflops: 1781.79

Min NPU matmul time: 66631us.
Max NPU gflops: 1891.97

Max NPU matmul time: 73249us.
Min NPU gflops: 1721.03

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=float -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.3s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 32 -k 32 -n 32 --n-aie-cols 8 --b-col-maj 0 --dev npu2 -M 4352 -K 256 -N 256 --dtype_in bf16 --dtype_out f32 --emulate-bf16-mmul-with-bfp16 true --trace_size 0 > build/aie_4352x256x256_32x32x32_8c.mlir
mkdir -p build
cd build && /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie/bin/clang++ -O2 -std=c++20 --target=aie2p-none-unknown-elf -Wno-parentheses -Wno-attributes -Wno-macro-redefined -Wno-empty-body -DNDEBUG -I /scratch/luisr/mlir-aie/install/include  -Dbf16_f32_ONLY -DDIM_M=32 -DDIM_K=32 -DDIM_N=32 -DAIE_API_EMULATE_BFLOAT16_MMUL_WITH_BFP16 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_32x32x32.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_4352x256x256_32x32x32_8c.xclbin \
			--no-xchesscc --no-xbridge --peano /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie \
			--aie-generate-npu-insts --npu-insts-name=insts_4352x256x256_32x32x32_8c.txt ../build/aie_4352x256x256_32x32x32_8c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_4352x256x256_32x32x32_8c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_4352x256x256_32x32x32_8c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_4352x256x256_32x32x32_8c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_4352x256x256_32x32x32_8c.xclbin -i build/insts_4352x256x256_32x32x32_8c.txt -k MLIR_AIE -M 4352 -K 256 -N 256 --iters 20 --warmup 10 --b_col_maj 0

Avg NPU matmul time: 1857.35us.
Avg NPU gflops: 307.118

Min NPU matmul time: 451us.
Max NPU gflops: 1264.8

Max NPU matmul time: 4465us.
Min NPU gflops: 127.755

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=float -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.3s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 32 -k 32 -n 32 --n-aie-cols 8 --b-col-maj 0 --dev npu2 -M 4352 -K 256 -N 1280 --dtype_in bf16 --dtype_out f32 --emulate-bf16-mmul-with-bfp16 true --trace_size 0 > build/aie_4352x256x1280_32x32x32_8c.mlir
mkdir -p build
cd build && /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie/bin/clang++ -O2 -std=c++20 --target=aie2p-none-unknown-elf -Wno-parentheses -Wno-attributes -Wno-macro-redefined -Wno-empty-body -DNDEBUG -I /scratch/luisr/mlir-aie/install/include  -Dbf16_f32_ONLY -DDIM_M=32 -DDIM_K=32 -DDIM_N=32 -DAIE_API_EMULATE_BFLOAT16_MMUL_WITH_BFP16 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_32x32x32.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_4352x256x1280_32x32x32_8c.xclbin \
			--no-xchesscc --no-xbridge --peano /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie \
			--aie-generate-npu-insts --npu-insts-name=insts_4352x256x1280_32x32x32_8c.txt ../build/aie_4352x256x1280_32x32x32_8c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_4352x256x1280_32x32x32_8c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_4352x256x1280_32x32x32_8c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_4352x256x1280_32x32x32_8c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_4352x256x1280_32x32x32_8c.xclbin -i build/insts_4352x256x1280_32x32x32_8c.txt -k MLIR_AIE -M 4352 -K 256 -N 1280 --iters 20 --warmup 10 --b_col_maj 0





















Avg NPU matmul time: 2694.55us.
Avg NPU gflops: 1058.48

Min NPU matmul time: 1690us.
Max NPU gflops: 1687.65

Max NPU matmul time: 3389us.
Min NPU gflops: 841.584

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=float -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.3s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 32 -k 32 -n 32 --n-aie-cols 8 --b-col-maj 0 --dev npu2 -M 4352 -K 256 -N 2304 --dtype_in bf16 --dtype_out f32 --emulate-bf16-mmul-with-bfp16 true --trace_size 0 > build/aie_4352x256x2304_32x32x32_8c.mlir
mkdir -p build
cd build && /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie/bin/clang++ -O2 -std=c++20 --target=aie2p-none-unknown-elf -Wno-parentheses -Wno-attributes -Wno-macro-redefined -Wno-empty-body -DNDEBUG -I /scratch/luisr/mlir-aie/install/include  -Dbf16_f32_ONLY -DDIM_M=32 -DDIM_K=32 -DDIM_N=32 -DAIE_API_EMULATE_BFLOAT16_MMUL_WITH_BFP16 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_32x32x32.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_4352x256x2304_32x32x32_8c.xclbin \
			--no-xchesscc --no-xbridge --peano /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie \
			--aie-generate-npu-insts --npu-insts-name=insts_4352x256x2304_32x32x32_8c.txt ../build/aie_4352x256x2304_32x32x32_8c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_4352x256x2304_32x32x32_8c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_4352x256x2304_32x32x32_8c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_4352x256x2304_32x32x32_8c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_4352x256x2304_32x32x32_8c.xclbin -i build/insts_4352x256x2304_32x32x32_8c.txt -k MLIR_AIE -M 4352 -K 256 -N 2304 --iters 20 --warmup 10 --b_col_maj 0





















Avg NPU matmul time: 3298.35us.
Avg NPU gflops: 1556.48

Min NPU matmul time: 3203us.
Max NPU gflops: 1602.82

Max NPU matmul time: 3582us.
Min NPU gflops: 1433.23

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=float -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.3s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 32 -k 32 -n 32 --n-aie-cols 8 --b-col-maj 0 --dev npu2 -M 4352 -K 256 -N 3328 --dtype_in bf16 --dtype_out f32 --emulate-bf16-mmul-with-bfp16 true --trace_size 0 > build/aie_4352x256x3328_32x32x32_8c.mlir
mkdir -p build
cd build && /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie/bin/clang++ -O2 -std=c++20 --target=aie2p-none-unknown-elf -Wno-parentheses -Wno-attributes -Wno-macro-redefined -Wno-empty-body -DNDEBUG -I /scratch/luisr/mlir-aie/install/include  -Dbf16_f32_ONLY -DDIM_M=32 -DDIM_K=32 -DDIM_N=32 -DAIE_API_EMULATE_BFLOAT16_MMUL_WITH_BFP16 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_32x32x32.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_4352x256x3328_32x32x32_8c.xclbin \
			--no-xchesscc --no-xbridge --peano /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie \
			--aie-generate-npu-insts --npu-insts-name=insts_4352x256x3328_32x32x32_8c.txt ../build/aie_4352x256x3328_32x32x32_8c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_4352x256x3328_32x32x32_8c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_4352x256x3328_32x32x32_8c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_4352x256x3328_32x32x32_8c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_4352x256x3328_32x32x32_8c.xclbin -i build/insts_4352x256x3328_32x32x32_8c.txt -k MLIR_AIE -M 4352 -K 256 -N 3328 --iters 20 --warmup 10 --b_col_maj 0





















Avg NPU matmul time: 4574.3us.
Avg NPU gflops: 1621.13

Min NPU matmul time: 4169us.
Max NPU gflops: 1778.73

Max NPU matmul time: 4850us.
Min NPU gflops: 1528.98

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=float -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.3s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 32 -k 32 -n 32 --n-aie-cols 8 --b-col-maj 0 --dev npu2 -M 4352 -K 256 -N 4352 --dtype_in bf16 --dtype_out f32 --emulate-bf16-mmul-with-bfp16 true --trace_size 0 > build/aie_4352x256x4352_32x32x32_8c.mlir
mkdir -p build
cd build && /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie/bin/clang++ -O2 -std=c++20 --target=aie2p-none-unknown-elf -Wno-parentheses -Wno-attributes -Wno-macro-redefined -Wno-empty-body -DNDEBUG -I /scratch/luisr/mlir-aie/install/include  -Dbf16_f32_ONLY -DDIM_M=32 -DDIM_K=32 -DDIM_N=32 -DAIE_API_EMULATE_BFLOAT16_MMUL_WITH_BFP16 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_32x32x32.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_4352x256x4352_32x32x32_8c.xclbin \
			--no-xchesscc --no-xbridge --peano /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie \
			--aie-generate-npu-insts --npu-insts-name=insts_4352x256x4352_32x32x32_8c.txt ../build/aie_4352x256x4352_32x32x32_8c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_4352x256x4352_32x32x32_8c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_4352x256x4352_32x32x32_8c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_4352x256x4352_32x32x32_8c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_4352x256x4352_32x32x32_8c.xclbin -i build/insts_4352x256x4352_32x32x32_8c.txt -k MLIR_AIE -M 4352 -K 256 -N 4352 --iters 20 --warmup 10 --b_col_maj 0





















Avg NPU matmul time: 6571.55us.
Avg NPU gflops: 1475.64

Min NPU matmul time: 5849us.
Max NPU gflops: 1657.93

Max NPU matmul time: 9477us.
Min NPU gflops: 1023.24

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=float -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.3s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 32 -k 32 -n 32 --n-aie-cols 8 --b-col-maj 0 --dev npu2 -M 4352 -K 1280 -N 256 --dtype_in bf16 --dtype_out f32 --emulate-bf16-mmul-with-bfp16 true --trace_size 0 > build/aie_4352x1280x256_32x32x32_8c.mlir
mkdir -p build
cd build && /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie/bin/clang++ -O2 -std=c++20 --target=aie2p-none-unknown-elf -Wno-parentheses -Wno-attributes -Wno-macro-redefined -Wno-empty-body -DNDEBUG -I /scratch/luisr/mlir-aie/install/include  -Dbf16_f32_ONLY -DDIM_M=32 -DDIM_K=32 -DDIM_N=32 -DAIE_API_EMULATE_BFLOAT16_MMUL_WITH_BFP16 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_32x32x32.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_4352x1280x256_32x32x32_8c.xclbin \
			--no-xchesscc --no-xbridge --peano /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie \
			--aie-generate-npu-insts --npu-insts-name=insts_4352x1280x256_32x32x32_8c.txt ../build/aie_4352x1280x256_32x32x32_8c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_4352x1280x256_32x32x32_8c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_4352x1280x256_32x32x32_8c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_4352x1280x256_32x32x32_8c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_4352x1280x256_32x32x32_8c.xclbin -i build/insts_4352x1280x256_32x32x32_8c.txt -k MLIR_AIE -M 4352 -K 1280 -N 256 --iters 20 --warmup 10 --b_col_maj 0





















Avg NPU matmul time: 2220.55us.
Avg NPU gflops: 1284.42

Min NPU matmul time: 1384us.
Max NPU gflops: 2060.79

Max NPU matmul time: 5146us.
Min NPU gflops: 554.242

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=float -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.2s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 32 -k 32 -n 32 --n-aie-cols 8 --b-col-maj 0 --dev npu2 -M 4352 -K 1280 -N 1280 --dtype_in bf16 --dtype_out f32 --emulate-bf16-mmul-with-bfp16 true --trace_size 0 > build/aie_4352x1280x1280_32x32x32_8c.mlir
mkdir -p build
cd build && /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie/bin/clang++ -O2 -std=c++20 --target=aie2p-none-unknown-elf -Wno-parentheses -Wno-attributes -Wno-macro-redefined -Wno-empty-body -DNDEBUG -I /scratch/luisr/mlir-aie/install/include  -Dbf16_f32_ONLY -DDIM_M=32 -DDIM_K=32 -DDIM_N=32 -DAIE_API_EMULATE_BFLOAT16_MMUL_WITH_BFP16 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_32x32x32.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_4352x1280x1280_32x32x32_8c.xclbin \
			--no-xchesscc --no-xbridge --peano /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie \
			--aie-generate-npu-insts --npu-insts-name=insts_4352x1280x1280_32x32x32_8c.txt ../build/aie_4352x1280x1280_32x32x32_8c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_4352x1280x1280_32x32x32_8c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_4352x1280x1280_32x32x32_8c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_4352x1280x1280_32x32x32_8c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_4352x1280x1280_32x32x32_8c.xclbin -i build/insts_4352x1280x1280_32x32x32_8c.txt -k MLIR_AIE -M 4352 -K 1280 -N 1280 --iters 20 --warmup 10 --b_col_maj 0





















Avg NPU matmul time: 8072.6us.
Avg NPU gflops: 1766.55

Min NPU matmul time: 7328us.
Max NPU gflops: 1946.05

Max NPU matmul time: 11813us.
Min NPU gflops: 1207.2

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=float -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.3s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 32 -k 32 -n 32 --n-aie-cols 8 --b-col-maj 0 --dev npu2 -M 4352 -K 1280 -N 2304 --dtype_in bf16 --dtype_out f32 --emulate-bf16-mmul-with-bfp16 true --trace_size 0 > build/aie_4352x1280x2304_32x32x32_8c.mlir
mkdir -p build
cd build && /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie/bin/clang++ -O2 -std=c++20 --target=aie2p-none-unknown-elf -Wno-parentheses -Wno-attributes -Wno-macro-redefined -Wno-empty-body -DNDEBUG -I /scratch/luisr/mlir-aie/install/include  -Dbf16_f32_ONLY -DDIM_M=32 -DDIM_K=32 -DDIM_N=32 -DAIE_API_EMULATE_BFLOAT16_MMUL_WITH_BFP16 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_32x32x32.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_4352x1280x2304_32x32x32_8c.xclbin \
			--no-xchesscc --no-xbridge --peano /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie \
			--aie-generate-npu-insts --npu-insts-name=insts_4352x1280x2304_32x32x32_8c.txt ../build/aie_4352x1280x2304_32x32x32_8c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_4352x1280x2304_32x32x32_8c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_4352x1280x2304_32x32x32_8c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_4352x1280x2304_32x32x32_8c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_4352x1280x2304_32x32x32_8c.xclbin -i build/insts_4352x1280x2304_32x32x32_8c.txt -k MLIR_AIE -M 4352 -K 1280 -N 2304 --iters 20 --warmup 10 --b_col_maj 0





















Avg NPU matmul time: 14888.9us.
Avg NPU gflops: 1724.05

Min NPU matmul time: 13909us.
Max NPU gflops: 1845.51

Max NPU matmul time: 18182us.
Min NPU gflops: 1411.79

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=float -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.2s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 32 -k 32 -n 32 --n-aie-cols 8 --b-col-maj 0 --dev npu2 -M 4352 -K 1280 -N 3328 --dtype_in bf16 --dtype_out f32 --emulate-bf16-mmul-with-bfp16 true --trace_size 0 > build/aie_4352x1280x3328_32x32x32_8c.mlir
mkdir -p build
cd build && /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie/bin/clang++ -O2 -std=c++20 --target=aie2p-none-unknown-elf -Wno-parentheses -Wno-attributes -Wno-macro-redefined -Wno-empty-body -DNDEBUG -I /scratch/luisr/mlir-aie/install/include  -Dbf16_f32_ONLY -DDIM_M=32 -DDIM_K=32 -DDIM_N=32 -DAIE_API_EMULATE_BFLOAT16_MMUL_WITH_BFP16 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_32x32x32.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_4352x1280x3328_32x32x32_8c.xclbin \
			--no-xchesscc --no-xbridge --peano /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie \
			--aie-generate-npu-insts --npu-insts-name=insts_4352x1280x3328_32x32x32_8c.txt ../build/aie_4352x1280x3328_32x32x32_8c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_4352x1280x3328_32x32x32_8c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_4352x1280x3328_32x32x32_8c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_4352x1280x3328_32x32x32_8c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_4352x1280x3328_32x32x32_8c.xclbin -i build/insts_4352x1280x3328_32x32x32_8c.txt -k MLIR_AIE -M 4352 -K 1280 -N 3328 --iters 20 --warmup 10 --b_col_maj 0





















Avg NPU matmul time: 21480.3us.
Avg NPU gflops: 1726.12

Min NPU matmul time: 20626us.
Max NPU gflops: 1797.62

Max NPU matmul time: 24607us.
Min NPU gflops: 1506.79

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=float -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.3s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 32 -k 32 -n 32 --n-aie-cols 8 --b-col-maj 0 --dev npu2 -M 4352 -K 1280 -N 4352 --dtype_in bf16 --dtype_out f32 --emulate-bf16-mmul-with-bfp16 true --trace_size 0 > build/aie_4352x1280x4352_32x32x32_8c.mlir
mkdir -p build
cd build && /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie/bin/clang++ -O2 -std=c++20 --target=aie2p-none-unknown-elf -Wno-parentheses -Wno-attributes -Wno-macro-redefined -Wno-empty-body -DNDEBUG -I /scratch/luisr/mlir-aie/install/include  -Dbf16_f32_ONLY -DDIM_M=32 -DDIM_K=32 -DDIM_N=32 -DAIE_API_EMULATE_BFLOAT16_MMUL_WITH_BFP16 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_32x32x32.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_4352x1280x4352_32x32x32_8c.xclbin \
			--no-xchesscc --no-xbridge --peano /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie \
			--aie-generate-npu-insts --npu-insts-name=insts_4352x1280x4352_32x32x32_8c.txt ../build/aie_4352x1280x4352_32x32x32_8c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_4352x1280x4352_32x32x32_8c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_4352x1280x4352_32x32x32_8c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_4352x1280x4352_32x32x32_8c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_4352x1280x4352_32x32x32_8c.xclbin -i build/insts_4352x1280x4352_32x32x32_8c.txt -k MLIR_AIE -M 4352 -K 1280 -N 4352 --iters 20 --warmup 10 --b_col_maj 0





















Avg NPU matmul time: 29185.1us.
Avg NPU gflops: 1661.33

Min NPU matmul time: 26942us.
Max NPU gflops: 1799.65

Max NPU matmul time: 32040us.
Min NPU gflops: 1513.3

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=float -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.2s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 32 -k 32 -n 32 --n-aie-cols 8 --b-col-maj 0 --dev npu2 -M 4352 -K 2304 -N 256 --dtype_in bf16 --dtype_out f32 --emulate-bf16-mmul-with-bfp16 true --trace_size 0 > build/aie_4352x2304x256_32x32x32_8c.mlir
mkdir -p build
cd build && /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie/bin/clang++ -O2 -std=c++20 --target=aie2p-none-unknown-elf -Wno-parentheses -Wno-attributes -Wno-macro-redefined -Wno-empty-body -DNDEBUG -I /scratch/luisr/mlir-aie/install/include  -Dbf16_f32_ONLY -DDIM_M=32 -DDIM_K=32 -DDIM_N=32 -DAIE_API_EMULATE_BFLOAT16_MMUL_WITH_BFP16 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_32x32x32.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_4352x2304x256_32x32x32_8c.xclbin \
			--no-xchesscc --no-xbridge --peano /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie \
			--aie-generate-npu-insts --npu-insts-name=insts_4352x2304x256_32x32x32_8c.txt ../build/aie_4352x2304x256_32x32x32_8c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_4352x2304x256_32x32x32_8c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_4352x2304x256_32x32x32_8c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_4352x2304x256_32x32x32_8c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_4352x2304x256_32x32x32_8c.xclbin -i build/insts_4352x2304x256_32x32x32_8c.txt -k MLIR_AIE -M 4352 -K 2304 -N 256 --iters 20 --warmup 10 --b_col_maj 0





















Avg NPU matmul time: 3305.95us.
Avg NPU gflops: 1552.91

Min NPU matmul time: 2364us.
Max NPU gflops: 2171.67

Max NPU matmul time: 5806us.
Min NPU gflops: 884.228

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=float -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.3s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 32 -k 32 -n 32 --n-aie-cols 8 --b-col-maj 0 --dev npu2 -M 4352 -K 2304 -N 1280 --dtype_in bf16 --dtype_out f32 --emulate-bf16-mmul-with-bfp16 true --trace_size 0 > build/aie_4352x2304x1280_32x32x32_8c.mlir
mkdir -p build
cd build && /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie/bin/clang++ -O2 -std=c++20 --target=aie2p-none-unknown-elf -Wno-parentheses -Wno-attributes -Wno-macro-redefined -Wno-empty-body -DNDEBUG -I /scratch/luisr/mlir-aie/install/include  -Dbf16_f32_ONLY -DDIM_M=32 -DDIM_K=32 -DDIM_N=32 -DAIE_API_EMULATE_BFLOAT16_MMUL_WITH_BFP16 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_32x32x32.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_4352x2304x1280_32x32x32_8c.xclbin \
			--no-xchesscc --no-xbridge --peano /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie \
			--aie-generate-npu-insts --npu-insts-name=insts_4352x2304x1280_32x32x32_8c.txt ../build/aie_4352x2304x1280_32x32x32_8c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_4352x2304x1280_32x32x32_8c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_4352x2304x1280_32x32x32_8c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_4352x2304x1280_32x32x32_8c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_4352x2304x1280_32x32x32_8c.xclbin -i build/insts_4352x2304x1280_32x32x32_8c.txt -k MLIR_AIE -M 4352 -K 2304 -N 1280 --iters 20 --warmup 10 --b_col_maj 0





















Avg NPU matmul time: 14092.3us.
Avg NPU gflops: 1821.49

Min NPU matmul time: 13179us.
Max NPU gflops: 1947.73

Max NPU matmul time: 17767us.
Min NPU gflops: 1444.77

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=float -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.3s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 32 -k 32 -n 32 --n-aie-cols 8 --b-col-maj 0 --dev npu2 -M 4352 -K 2304 -N 2304 --dtype_in bf16 --dtype_out f32 --emulate-bf16-mmul-with-bfp16 true --trace_size 0 > build/aie_4352x2304x2304_32x32x32_8c.mlir
mkdir -p build
cd build && /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie/bin/clang++ -O2 -std=c++20 --target=aie2p-none-unknown-elf -Wno-parentheses -Wno-attributes -Wno-macro-redefined -Wno-empty-body -DNDEBUG -I /scratch/luisr/mlir-aie/install/include  -Dbf16_f32_ONLY -DDIM_M=32 -DDIM_K=32 -DDIM_N=32 -DAIE_API_EMULATE_BFLOAT16_MMUL_WITH_BFP16 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_32x32x32.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_4352x2304x2304_32x32x32_8c.xclbin \
			--no-xchesscc --no-xbridge --peano /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie \
			--aie-generate-npu-insts --npu-insts-name=insts_4352x2304x2304_32x32x32_8c.txt ../build/aie_4352x2304x2304_32x32x32_8c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_4352x2304x2304_32x32x32_8c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_4352x2304x2304_32x32x32_8c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_4352x2304x2304_32x32x32_8c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_4352x2304x2304_32x32x32_8c.xclbin -i build/insts_4352x2304x2304_32x32x32_8c.txt -k MLIR_AIE -M 4352 -K 2304 -N 2304 --iters 20 --warmup 10 --b_col_maj 0





















Avg NPU matmul time: 25806.8us.
Avg NPU gflops: 1790.39

Min NPU matmul time: 24312us.
Max NPU gflops: 1900.48

Max NPU matmul time: 28312us.
Min NPU gflops: 1631.97

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=float -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.3s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 32 -k 32 -n 32 --n-aie-cols 8 --b-col-maj 0 --dev npu2 -M 4352 -K 2304 -N 3328 --dtype_in bf16 --dtype_out f32 --emulate-bf16-mmul-with-bfp16 true --trace_size 0 > build/aie_4352x2304x3328_32x32x32_8c.mlir
mkdir -p build
cd build && /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie/bin/clang++ -O2 -std=c++20 --target=aie2p-none-unknown-elf -Wno-parentheses -Wno-attributes -Wno-macro-redefined -Wno-empty-body -DNDEBUG -I /scratch/luisr/mlir-aie/install/include  -Dbf16_f32_ONLY -DDIM_M=32 -DDIM_K=32 -DDIM_N=32 -DAIE_API_EMULATE_BFLOAT16_MMUL_WITH_BFP16 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_32x32x32.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_4352x2304x3328_32x32x32_8c.xclbin \
			--no-xchesscc --no-xbridge --peano /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie \
			--aie-generate-npu-insts --npu-insts-name=insts_4352x2304x3328_32x32x32_8c.txt ../build/aie_4352x2304x3328_32x32x32_8c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_4352x2304x3328_32x32x32_8c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_4352x2304x3328_32x32x32_8c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_4352x2304x3328_32x32x32_8c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_4352x2304x3328_32x32x32_8c.xclbin -i build/insts_4352x2304x3328_32x32x32_8c.txt -k MLIR_AIE -M 4352 -K 2304 -N 3328 --iters 20 --warmup 10 --b_col_maj 0





















Avg NPU matmul time: 36918.1us.
Avg NPU gflops: 1807.78

Min NPU matmul time: 35466us.
Max NPU gflops: 1881.8

Max NPU matmul time: 39477us.
Min NPU gflops: 1690.6

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=float -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.3s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 32 -k 32 -n 32 --n-aie-cols 8 --b-col-maj 0 --dev npu2 -M 4352 -K 2304 -N 4352 --dtype_in bf16 --dtype_out f32 --emulate-bf16-mmul-with-bfp16 true --trace_size 0 > build/aie_4352x2304x4352_32x32x32_8c.mlir
mkdir -p build
cd build && /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie/bin/clang++ -O2 -std=c++20 --target=aie2p-none-unknown-elf -Wno-parentheses -Wno-attributes -Wno-macro-redefined -Wno-empty-body -DNDEBUG -I /scratch/luisr/mlir-aie/install/include  -Dbf16_f32_ONLY -DDIM_M=32 -DDIM_K=32 -DDIM_N=32 -DAIE_API_EMULATE_BFLOAT16_MMUL_WITH_BFP16 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_32x32x32.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_4352x2304x4352_32x32x32_8c.xclbin \
			--no-xchesscc --no-xbridge --peano /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie \
			--aie-generate-npu-insts --npu-insts-name=insts_4352x2304x4352_32x32x32_8c.txt ../build/aie_4352x2304x4352_32x32x32_8c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_4352x2304x4352_32x32x32_8c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_4352x2304x4352_32x32x32_8c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_4352x2304x4352_32x32x32_8c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_4352x2304x4352_32x32x32_8c.xclbin -i build/insts_4352x2304x4352_32x32x32_8c.txt -k MLIR_AIE -M 4352 -K 2304 -N 4352 --iters 20 --warmup 10 --b_col_maj 0





















Avg NPU matmul time: 51335.4us.
Avg NPU gflops: 1700.1

Min NPU matmul time: 49017us.
Max NPU gflops: 1780.51

Max NPU matmul time: 54238us.
Min NPU gflops: 1609.11

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=float -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.3s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 32 -k 32 -n 32 --n-aie-cols 8 --b-col-maj 0 --dev npu2 -M 4352 -K 3328 -N 256 --dtype_in bf16 --dtype_out f32 --emulate-bf16-mmul-with-bfp16 true --trace_size 0 > build/aie_4352x3328x256_32x32x32_8c.mlir
mkdir -p build
cd build && /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie/bin/clang++ -O2 -std=c++20 --target=aie2p-none-unknown-elf -Wno-parentheses -Wno-attributes -Wno-macro-redefined -Wno-empty-body -DNDEBUG -I /scratch/luisr/mlir-aie/install/include  -Dbf16_f32_ONLY -DDIM_M=32 -DDIM_K=32 -DDIM_N=32 -DAIE_API_EMULATE_BFLOAT16_MMUL_WITH_BFP16 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_32x32x32.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_4352x3328x256_32x32x32_8c.xclbin \
			--no-xchesscc --no-xbridge --peano /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie \
			--aie-generate-npu-insts --npu-insts-name=insts_4352x3328x256_32x32x32_8c.txt ../build/aie_4352x3328x256_32x32x32_8c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_4352x3328x256_32x32x32_8c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_4352x3328x256_32x32x32_8c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_4352x3328x256_32x32x32_8c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_4352x3328x256_32x32x32_8c.xclbin -i build/insts_4352x3328x256_32x32x32_8c.txt -k MLIR_AIE -M 4352 -K 3328 -N 256 --iters 20 --warmup 10 --b_col_maj 0





















Avg NPU matmul time: 4623.45us.
Avg NPU gflops: 1603.9

Min NPU matmul time: 3732us.
Max NPU gflops: 1987.01

Max NPU matmul time: 7284us.
Min NPU gflops: 1018.06

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=float -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.3s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 32 -k 32 -n 32 --n-aie-cols 8 --b-col-maj 0 --dev npu2 -M 4352 -K 3328 -N 1280 --dtype_in bf16 --dtype_out f32 --emulate-bf16-mmul-with-bfp16 true --trace_size 0 > build/aie_4352x3328x1280_32x32x32_8c.mlir
mkdir -p build
cd build && /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie/bin/clang++ -O2 -std=c++20 --target=aie2p-none-unknown-elf -Wno-parentheses -Wno-attributes -Wno-macro-redefined -Wno-empty-body -DNDEBUG -I /scratch/luisr/mlir-aie/install/include  -Dbf16_f32_ONLY -DDIM_M=32 -DDIM_K=32 -DDIM_N=32 -DAIE_API_EMULATE_BFLOAT16_MMUL_WITH_BFP16 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_32x32x32.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_4352x3328x1280_32x32x32_8c.xclbin \
			--no-xchesscc --no-xbridge --peano /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie \
			--aie-generate-npu-insts --npu-insts-name=insts_4352x3328x1280_32x32x32_8c.txt ../build/aie_4352x3328x1280_32x32x32_8c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_4352x3328x1280_32x32x32_8c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_4352x3328x1280_32x32x32_8c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_4352x3328x1280_32x32x32_8c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_4352x3328x1280_32x32x32_8c.xclbin -i build/insts_4352x3328x1280_32x32x32_8c.txt -k MLIR_AIE -M 4352 -K 3328 -N 1280 --iters 20 --warmup 10 --b_col_maj 0





















Avg NPU matmul time: 20042.7us.
Avg NPU gflops: 1849.94

Min NPU matmul time: 18367us.
Max NPU gflops: 2018.71

Max NPU matmul time: 22548us.
Min NPU gflops: 1644.39

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=float -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.3s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 32 -k 32 -n 32 --n-aie-cols 8 --b-col-maj 0 --dev npu2 -M 4352 -K 3328 -N 2304 --dtype_in bf16 --dtype_out f32 --emulate-bf16-mmul-with-bfp16 true --trace_size 0 > build/aie_4352x3328x2304_32x32x32_8c.mlir
mkdir -p build
cd build && /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie/bin/clang++ -O2 -std=c++20 --target=aie2p-none-unknown-elf -Wno-parentheses -Wno-attributes -Wno-macro-redefined -Wno-empty-body -DNDEBUG -I /scratch/luisr/mlir-aie/install/include  -Dbf16_f32_ONLY -DDIM_M=32 -DDIM_K=32 -DDIM_N=32 -DAIE_API_EMULATE_BFLOAT16_MMUL_WITH_BFP16 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_32x32x32.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_4352x3328x2304_32x32x32_8c.xclbin \
			--no-xchesscc --no-xbridge --peano /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie \
			--aie-generate-npu-insts --npu-insts-name=insts_4352x3328x2304_32x32x32_8c.txt ../build/aie_4352x3328x2304_32x32x32_8c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_4352x3328x2304_32x32x32_8c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_4352x3328x2304_32x32x32_8c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_4352x3328x2304_32x32x32_8c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_4352x3328x2304_32x32x32_8c.xclbin -i build/insts_4352x3328x2304_32x32x32_8c.txt -k MLIR_AIE -M 4352 -K 3328 -N 2304 --iters 20 --warmup 10 --b_col_maj 0





















Avg NPU matmul time: 36155.6us.
Avg NPU gflops: 1845.91

Min NPU matmul time: 34610us.
Max NPU gflops: 1928.34

Max NPU matmul time: 38506us.
Min NPU gflops: 1733.23

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=float -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.3s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 32 -k 32 -n 32 --n-aie-cols 8 --b-col-maj 0 --dev npu2 -M 4352 -K 3328 -N 3328 --dtype_in bf16 --dtype_out f32 --emulate-bf16-mmul-with-bfp16 true --trace_size 0 > build/aie_4352x3328x3328_32x32x32_8c.mlir
mkdir -p build
cd build && /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie/bin/clang++ -O2 -std=c++20 --target=aie2p-none-unknown-elf -Wno-parentheses -Wno-attributes -Wno-macro-redefined -Wno-empty-body -DNDEBUG -I /scratch/luisr/mlir-aie/install/include  -Dbf16_f32_ONLY -DDIM_M=32 -DDIM_K=32 -DDIM_N=32 -DAIE_API_EMULATE_BFLOAT16_MMUL_WITH_BFP16 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_32x32x32.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_4352x3328x3328_32x32x32_8c.xclbin \
			--no-xchesscc --no-xbridge --peano /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie \
			--aie-generate-npu-insts --npu-insts-name=insts_4352x3328x3328_32x32x32_8c.txt ../build/aie_4352x3328x3328_32x32x32_8c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_4352x3328x3328_32x32x32_8c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_4352x3328x3328_32x32x32_8c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_4352x3328x3328_32x32x32_8c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_4352x3328x3328_32x32x32_8c.xclbin -i build/insts_4352x3328x3328_32x32x32_8c.txt -k MLIR_AIE -M 4352 -K 3328 -N 3328 --iters 20 --warmup 10 --b_col_maj 0





















Avg NPU matmul time: 52004.4us.
Avg NPU gflops: 1853.72

Min NPU matmul time: 50718us.
Max NPU gflops: 1900.74

Max NPU matmul time: 54945us.
Min NPU gflops: 1754.52

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=float -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.3s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 32 -k 32 -n 32 --n-aie-cols 8 --b-col-maj 0 --dev npu2 -M 4352 -K 3328 -N 4352 --dtype_in bf16 --dtype_out f32 --emulate-bf16-mmul-with-bfp16 true --trace_size 0 > build/aie_4352x3328x4352_32x32x32_8c.mlir
mkdir -p build
cd build && /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie/bin/clang++ -O2 -std=c++20 --target=aie2p-none-unknown-elf -Wno-parentheses -Wno-attributes -Wno-macro-redefined -Wno-empty-body -DNDEBUG -I /scratch/luisr/mlir-aie/install/include  -Dbf16_f32_ONLY -DDIM_M=32 -DDIM_K=32 -DDIM_N=32 -DAIE_API_EMULATE_BFLOAT16_MMUL_WITH_BFP16 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_32x32x32.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_4352x3328x4352_32x32x32_8c.xclbin \
			--no-xchesscc --no-xbridge --peano /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie \
			--aie-generate-npu-insts --npu-insts-name=insts_4352x3328x4352_32x32x32_8c.txt ../build/aie_4352x3328x4352_32x32x32_8c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_4352x3328x4352_32x32x32_8c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_4352x3328x4352_32x32x32_8c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_4352x3328x4352_32x32x32_8c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_4352x3328x4352_32x32x32_8c.xclbin -i build/insts_4352x3328x4352_32x32x32_8c.txt -k MLIR_AIE -M 4352 -K 3328 -N 4352 --iters 20 --warmup 10 --b_col_maj 0





















Avg NPU matmul time: 70946.4us.
Avg NPU gflops: 1776.89

Min NPU matmul time: 67337us.
Max NPU gflops: 1872.14

Max NPU matmul time: 73258us.
Min NPU gflops: 1720.82

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=float -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.2s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 32 -k 32 -n 32 --n-aie-cols 8 --b-col-maj 0 --dev npu2 -M 4352 -K 4352 -N 256 --dtype_in bf16 --dtype_out f32 --emulate-bf16-mmul-with-bfp16 true --trace_size 0 > build/aie_4352x4352x256_32x32x32_8c.mlir
mkdir -p build
cd build && /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie/bin/clang++ -O2 -std=c++20 --target=aie2p-none-unknown-elf -Wno-parentheses -Wno-attributes -Wno-macro-redefined -Wno-empty-body -DNDEBUG -I /scratch/luisr/mlir-aie/install/include  -Dbf16_f32_ONLY -DDIM_M=32 -DDIM_K=32 -DDIM_N=32 -DAIE_API_EMULATE_BFLOAT16_MMUL_WITH_BFP16 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_32x32x32.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_4352x4352x256_32x32x32_8c.xclbin \
			--no-xchesscc --no-xbridge --peano /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie \
			--aie-generate-npu-insts --npu-insts-name=insts_4352x4352x256_32x32x32_8c.txt ../build/aie_4352x4352x256_32x32x32_8c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_4352x4352x256_32x32x32_8c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_4352x4352x256_32x32x32_8c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_4352x4352x256_32x32x32_8c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_4352x4352x256_32x32x32_8c.xclbin -i build/insts_4352x4352x256_32x32x32_8c.txt -k MLIR_AIE -M 4352 -K 4352 -N 256 --iters 20 --warmup 10 --b_col_maj 0





















Avg NPU matmul time: 7913.05us.
Avg NPU gflops: 1225.47

Min NPU matmul time: 5031us.
Max NPU gflops: 1927.5

Max NPU matmul time: 8470us.
Min NPU gflops: 1144.89

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=float -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.3s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 32 -k 32 -n 32 --n-aie-cols 8 --b-col-maj 0 --dev npu2 -M 4352 -K 4352 -N 1280 --dtype_in bf16 --dtype_out f32 --emulate-bf16-mmul-with-bfp16 true --trace_size 0 > build/aie_4352x4352x1280_32x32x32_8c.mlir
mkdir -p build
cd build && /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie/bin/clang++ -O2 -std=c++20 --target=aie2p-none-unknown-elf -Wno-parentheses -Wno-attributes -Wno-macro-redefined -Wno-empty-body -DNDEBUG -I /scratch/luisr/mlir-aie/install/include  -Dbf16_f32_ONLY -DDIM_M=32 -DDIM_K=32 -DDIM_N=32 -DAIE_API_EMULATE_BFLOAT16_MMUL_WITH_BFP16 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_32x32x32.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_4352x4352x1280_32x32x32_8c.xclbin \
			--no-xchesscc --no-xbridge --peano /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie \
			--aie-generate-npu-insts --npu-insts-name=insts_4352x4352x1280_32x32x32_8c.txt ../build/aie_4352x4352x1280_32x32x32_8c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_4352x4352x1280_32x32x32_8c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_4352x4352x1280_32x32x32_8c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_4352x4352x1280_32x32x32_8c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_4352x4352x1280_32x32x32_8c.xclbin -i build/insts_4352x4352x1280_32x32x32_8c.txt -k MLIR_AIE -M 4352 -K 4352 -N 1280 --iters 20 --warmup 10 --b_col_maj 0





















Avg NPU matmul time: 27662.8us.
Avg NPU gflops: 1752.76

Min NPU matmul time: 24788us.
Max NPU gflops: 1956.03

Max NPU matmul time: 28770us.
Min NPU gflops: 1685.3

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=float -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.2s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 32 -k 32 -n 32 --n-aie-cols 8 --b-col-maj 0 --dev npu2 -M 4352 -K 4352 -N 2304 --dtype_in bf16 --dtype_out f32 --emulate-bf16-mmul-with-bfp16 true --trace_size 0 > build/aie_4352x4352x2304_32x32x32_8c.mlir
mkdir -p build
cd build && /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie/bin/clang++ -O2 -std=c++20 --target=aie2p-none-unknown-elf -Wno-parentheses -Wno-attributes -Wno-macro-redefined -Wno-empty-body -DNDEBUG -I /scratch/luisr/mlir-aie/install/include  -Dbf16_f32_ONLY -DDIM_M=32 -DDIM_K=32 -DDIM_N=32 -DAIE_API_EMULATE_BFLOAT16_MMUL_WITH_BFP16 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_32x32x32.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_4352x4352x2304_32x32x32_8c.xclbin \
			--no-xchesscc --no-xbridge --peano /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie \
			--aie-generate-npu-insts --npu-insts-name=insts_4352x4352x2304_32x32x32_8c.txt ../build/aie_4352x4352x2304_32x32x32_8c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_4352x4352x2304_32x32x32_8c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_4352x4352x2304_32x32x32_8c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_4352x4352x2304_32x32x32_8c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_4352x4352x2304_32x32x32_8c.xclbin -i build/insts_4352x4352x2304_32x32x32_8c.txt -k MLIR_AIE -M 4352 -K 4352 -N 2304 --iters 20 --warmup 10 --b_col_maj 0





















Avg NPU matmul time: 48432.1us.
Avg NPU gflops: 1802.01

Min NPU matmul time: 45406us.
Max NPU gflops: 1922.1

Max NPU matmul time: 49063us.
Min NPU gflops: 1778.84

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=float -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.3s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 32 -k 32 -n 32 --n-aie-cols 8 --b-col-maj 0 --dev npu2 -M 4352 -K 4352 -N 3328 --dtype_in bf16 --dtype_out f32 --emulate-bf16-mmul-with-bfp16 true --trace_size 0 > build/aie_4352x4352x3328_32x32x32_8c.mlir
mkdir -p build
cd build && /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie/bin/clang++ -O2 -std=c++20 --target=aie2p-none-unknown-elf -Wno-parentheses -Wno-attributes -Wno-macro-redefined -Wno-empty-body -DNDEBUG -I /scratch/luisr/mlir-aie/install/include  -Dbf16_f32_ONLY -DDIM_M=32 -DDIM_K=32 -DDIM_N=32 -DAIE_API_EMULATE_BFLOAT16_MMUL_WITH_BFP16 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_32x32x32.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_4352x4352x3328_32x32x32_8c.xclbin \
			--no-xchesscc --no-xbridge --peano /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie \
			--aie-generate-npu-insts --npu-insts-name=insts_4352x4352x3328_32x32x32_8c.txt ../build/aie_4352x4352x3328_32x32x32_8c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_4352x4352x3328_32x32x32_8c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_4352x4352x3328_32x32x32_8c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_4352x4352x3328_32x32x32_8c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_4352x4352x3328_32x32x32_8c.xclbin -i build/insts_4352x4352x3328_32x32x32_8c.txt -k MLIR_AIE -M 4352 -K 4352 -N 3328 --iters 20 --warmup 10 --b_col_maj 0





















Avg NPU matmul time: 69675us.
Avg NPU gflops: 1809.32

Min NPU matmul time: 65946us.
Max NPU gflops: 1911.62

Max NPU matmul time: 71981us.
Min NPU gflops: 1751.35

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=float -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.3s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 32 -k 32 -n 32 --n-aie-cols 8 --b-col-maj 0 --dev npu2 -M 4352 -K 4352 -N 4352 --dtype_in bf16 --dtype_out f32 --emulate-bf16-mmul-with-bfp16 true --trace_size 0 > build/aie_4352x4352x4352_32x32x32_8c.mlir
mkdir -p build
cd build && /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie/bin/clang++ -O2 -std=c++20 --target=aie2p-none-unknown-elf -Wno-parentheses -Wno-attributes -Wno-macro-redefined -Wno-empty-body -DNDEBUG -I /scratch/luisr/mlir-aie/install/include  -Dbf16_f32_ONLY -DDIM_M=32 -DDIM_K=32 -DDIM_N=32 -DAIE_API_EMULATE_BFLOAT16_MMUL_WITH_BFP16 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_32x32x32.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_4352x4352x4352_32x32x32_8c.xclbin \
			--no-xchesscc --no-xbridge --peano /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie \
			--aie-generate-npu-insts --npu-insts-name=insts_4352x4352x4352_32x32x32_8c.txt ../build/aie_4352x4352x4352_32x32x32_8c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_4352x4352x4352_32x32x32_8c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_4352x4352x4352_32x32x32_8c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_4352x4352x4352_32x32x32_8c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_4352x4352x4352_32x32x32_8c.xclbin -i build/insts_4352x4352x4352_32x32x32_8c.txt -k MLIR_AIE -M 4352 -K 4352 -N 4352 --iters 20 --warmup 10 --b_col_maj 0





















Avg NPU matmul time: 91750.6us.
Avg NPU gflops: 1796.75

Min NPU matmul time: 88147us.
Max NPU gflops: 1870.2

Max NPU matmul time: 94203us.
Min NPU gflops: 1749.98

PASS!

