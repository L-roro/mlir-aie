XILINX_LOC=/proj/xbuilds/2024.2_INT_daily_latest/installs/lin64/Vitis/2024.2
SHELL=/bin/csh
MYXILINX_VER=2024.2
HISTCONTROL=ignoreboth:erasedups
TERM_PROGRAM_VERSION=3.4
GROUP=newhiredefaultgrp
MACHTYPE=x86_64
TMUX=/tmp/tmux-50093633/default,2597,0
AIETOOLS_ROOT=/proj/xbuilds/2024.2_INT_daily_latest/installs/lin64/Vitis/2024.2/aietools
XILINX_XRT=/opt/xilinx/xrt
n_aie_cols=8
PWD=/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array
LOGNAME=lromeror
NPU2=1
XDG_SESSION_TYPE=tty
MLIR_AIE_INSTALL_DIR=/scratch/luisr/mlir-aie/install
N=4096
M=4096
K=4096
n=32
m=32
k=32
HOME=/home/lromeror
LANG=en_US.UTF-8
PEANO_INSTALL_DIR=/scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie
VIRTUAL_ENV=/scratch/luisr/mlir-aie/ironenv
OSTYPE=linux
SSH_CONNECTION=172.21.39.59 55861 172.20.10.58 22
XDG_SESSION_CLASS=user
PYTHONPATH=/scratch/luisr/mlir-aie/install/python:/opt/xilinx/xrt/python
TERM=tmux-256color
HOST=xcoradaie213
USER=lromeror
use_chess=1
TMUX_PANE=%0
emulate_bfloat16_mmul_with_bfp16=1
SHLVL=3
XDG_SESSION_ID=2
VIRTUAL_ENV_PROMPT=(ironenv) 
LM_LICENSE_FILE=2100@aiengine
LD_LIBRARY_PATH=/scratch/luisr/mlir-aie/install/lib:/opt/xilinx/xrt/lib
XDG_RUNTIME_DIR=/run/user/50093633
MYXILINX_BASE=/proj/xbuilds/2024.2_INT_daily_latest
dtype_out=f32
SSH_CLIENT=172.21.39.59 55861 22
NLSPATH=/usr/share/locale/%L/LC_MESSAGES/%N.cat:/usr/share/locale/%l/LC_MESSAGES/%N.cat
VENDOR=unknown
PATH=/scratch/luisr/mlir-aie/install/bin:/scratch/luisr/mlir-aie/ironenv/bin:/opt/xilinx/xrt/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin:/proj/xbuilds/2024.2_INT_daily_latest/installs/lin64/Vitis/2024.2/aietools/bin:/proj/xbuilds/2024.2_INT_daily_latest/installs/lin64/Vitis/2024.2/bin
dtype_in=bf16
DBUS_SESSION_BUS_ADDRESS=unix:path=/run/user/50093633/bus
SSH_TTY=/dev/pts/0
HOSTTYPE=x86_64-linux
REMOTEHOST=172.21.39.59
OLDPWD=/scratch/luisr/mlir-aie
runargs=--iters 20 --warmup 10
TERM_PROGRAM=tmux
_=/usr/bin/env
##===- Makefile -----------------------------------------------------------===##
# 
# This file licensed under the Apache License v2.0 with LLVM Exceptions.
# See https://llvm.org/LICENSE.txt for license information.
# SPDX-License-Identifier: Apache-2.0 WITH LLVM-exception
#
# Copyright (C) 2025, Advanced Micro Devices, Inc.
# 
##===----------------------------------------------------------------------===##
srcdir := $(shell dirname $(realpath $(firstword $(MAKEFILE_LIST))))
subdir=whole_array
targetname=whole_array


# M, K, N: final GEMM dimensions
M?=512
K?=512
N?=512

# m, k, n: single AIE core GEMM dimensions
m?=32
k?=32
n?=32

n_aie_cols?=4
b_col_maj?=0

kernels=mm_${m}x${k}x${n}
aieargs+=-m $m -k $k -n $n --n-aie-cols ${n_aie_cols} --b-col-maj ${b_col_maj}
runargs+=--b_col_maj ${b_col_maj}
target_suffix=${M}x${K}x${N}_${m}x${k}x${n}_${n_aie_cols}c
use_placed?=0
use_iron?=0

# set this flag to 1 for linear buffer allocation
# else, 0 for bank-aware
use_linear_buf_alloc?=1

ifeq (${use_linear_buf_alloc}, 1)
buffer_aloc_flag=basic-sequential
else
buffer_aloc_flag=bank-aware
endif

ifeq (${use_placed}, 1)
aie_py_src=${targetname}_placed.py
ifeq (${use_iron}, 1)
$(error Cannot specify both placed design and IRON)
endif
endif

ifeq (${use_iron}, 1)
aie_py_src=${targetname}_iron.py
endif

KERNEL_DEFINES=-D${dtype_in}_${dtype_out}_ONLY -DDIM_M=${m} -DDIM_K=${k} -DDIM_N=${n}
ifeq (${b_col_maj}, 1)
	KERNEL_DEFINES+=-DB_COL_MAJ
endif

include ${srcdir}/../makefile-common

build/mm_${m}x${k}x${n}.o: ${kernels_dir}/mm.cc
	mkdir -p ${@D}
	cd ${@D} && ${KERNEL_CC} ${KERNEL_CFLAGS} ${KERNEL_DEFINES} -c $< -o ${@F}
rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=float -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.3s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 32 -k 32 -n 32 --n-aie-cols 8 --b-col-maj 0 --dev npu2 -M 512 -K 512 -N 512 --dtype_in bf16 --dtype_out f32 --emulate-bf16-mmul-with-bfp16 true --trace_size 0 > build/aie_512x512x512_32x32x32_8c.mlir
mkdir -p build
cd build && xchesscc_wrapper aie2p -I /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools/include  -Dbf16_f32_ONLY -DDIM_M=32 -DDIM_K=32 -DDIM_N=32 -DAIE_API_EMULATE_BFLOAT16_MMUL_WITH_BFP16 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_32x32x32.o
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_512x512x512_32x32x32_8c.xclbin \
			 \
			--aie-generate-npu-insts --npu-insts-name=insts_512x512x512_32x32x32_8c.txt ../build/aie_512x512x512_32x32x32_8c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_512x512x512_32x32x32_8c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_512x512x512_32x32x32_8c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_512x512x512_32x32x32_8c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_512x512x512_32x32x32_8c.xclbin -i build/insts_512x512x512_32x32x32_8c.txt -k MLIR_AIE -M 512 -K 512 -N 512 --iters 20 --warmup 10 --b_col_maj 0

Avg NPU matmul time: 1082.15us.
Avg NPU gflops: 248.058

Min NPU matmul time: 237us.
Max NPU gflops: 1132.64

Max NPU matmul time: 4372us.
Min NPU gflops: 61.3988

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=float -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.3s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 32 -k 32 -n 32 --n-aie-cols 8 --b-col-maj 0 --dev npu2 -M 512 -K 512 -N 1024 --dtype_in bf16 --dtype_out f32 --emulate-bf16-mmul-with-bfp16 true --trace_size 0 > build/aie_512x512x1024_32x32x32_8c.mlir
mkdir -p build
cd build && xchesscc_wrapper aie2p -I /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools/include  -Dbf16_f32_ONLY -DDIM_M=32 -DDIM_K=32 -DDIM_N=32 -DAIE_API_EMULATE_BFLOAT16_MMUL_WITH_BFP16 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_32x32x32.o
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_512x512x1024_32x32x32_8c.xclbin \
			 \
			--aie-generate-npu-insts --npu-insts-name=insts_512x512x1024_32x32x32_8c.txt ../build/aie_512x512x1024_32x32x32_8c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_512x512x1024_32x32x32_8c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_512x512x1024_32x32x32_8c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_512x512x1024_32x32x32_8c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_512x512x1024_32x32x32_8c.xclbin -i build/insts_512x512x1024_32x32x32_8c.txt -k MLIR_AIE -M 512 -K 512 -N 1024 --iters 20 --warmup 10 --b_col_maj 0

Avg NPU matmul time: 1846.35us.
Avg NPU gflops: 290.774

Min NPU matmul time: 378us.
Max NPU gflops: 1420.29

Max NPU matmul time: 4714us.
Min NPU gflops: 113.889

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=float -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.3s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 32 -k 32 -n 32 --n-aie-cols 8 --b-col-maj 0 --dev npu2 -M 512 -K 512 -N 2560 --dtype_in bf16 --dtype_out f32 --emulate-bf16-mmul-with-bfp16 true --trace_size 0 > build/aie_512x512x2560_32x32x32_8c.mlir
mkdir -p build
cd build && xchesscc_wrapper aie2p -I /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools/include  -Dbf16_f32_ONLY -DDIM_M=32 -DDIM_K=32 -DDIM_N=32 -DAIE_API_EMULATE_BFLOAT16_MMUL_WITH_BFP16 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_32x32x32.o
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_512x512x2560_32x32x32_8c.xclbin \
			 \
			--aie-generate-npu-insts --npu-insts-name=insts_512x512x2560_32x32x32_8c.txt ../build/aie_512x512x2560_32x32x32_8c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_512x512x2560_32x32x32_8c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_512x512x2560_32x32x32_8c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_512x512x2560_32x32x32_8c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_512x512x2560_32x32x32_8c.xclbin -i build/insts_512x512x2560_32x32x32_8c.txt -k MLIR_AIE -M 512 -K 512 -N 2560 --iters 20 --warmup 10 --b_col_maj 0

Avg NPU matmul time: 3938.95us.
Avg NPU gflops: 340.745

Min NPU matmul time: 825us.
Max NPU gflops: 1626.88

Max NPU matmul time: 5346us.
Min NPU gflops: 251.062

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=float -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.3s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 32 -k 32 -n 32 --n-aie-cols 8 --b-col-maj 0 --dev npu2 -M 512 -K 512 -N 4096 --dtype_in bf16 --dtype_out f32 --emulate-bf16-mmul-with-bfp16 true --trace_size 0 > build/aie_512x512x4096_32x32x32_8c.mlir
mkdir -p build
cd build && xchesscc_wrapper aie2p -I /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools/include  -Dbf16_f32_ONLY -DDIM_M=32 -DDIM_K=32 -DDIM_N=32 -DAIE_API_EMULATE_BFLOAT16_MMUL_WITH_BFP16 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_32x32x32.o
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_512x512x4096_32x32x32_8c.xclbin \
			 \
			--aie-generate-npu-insts --npu-insts-name=insts_512x512x4096_32x32x32_8c.txt ../build/aie_512x512x4096_32x32x32_8c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_512x512x4096_32x32x32_8c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_512x512x4096_32x32x32_8c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_512x512x4096_32x32x32_8c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_512x512x4096_32x32x32_8c.xclbin -i build/insts_512x512x4096_32x32x32_8c.txt -k MLIR_AIE -M 512 -K 512 -N 4096 --iters 20 --warmup 10 --b_col_maj 0

Avg NPU matmul time: 5067.35us.
Avg NPU gflops: 423.788

Min NPU matmul time: 1303us.
Max NPU gflops: 1648.11

Max NPU matmul time: 5762us.
Min NPU gflops: 372.698

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=float -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.3s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 32 -k 32 -n 32 --n-aie-cols 8 --b-col-maj 0 --dev npu2 -M 512 -K 1024 -N 512 --dtype_in bf16 --dtype_out f32 --emulate-bf16-mmul-with-bfp16 true --trace_size 0 > build/aie_512x1024x512_32x32x32_8c.mlir
mkdir -p build
cd build && xchesscc_wrapper aie2p -I /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools/include  -Dbf16_f32_ONLY -DDIM_M=32 -DDIM_K=32 -DDIM_N=32 -DAIE_API_EMULATE_BFLOAT16_MMUL_WITH_BFP16 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_32x32x32.o
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_512x1024x512_32x32x32_8c.xclbin \
			 \
			--aie-generate-npu-insts --npu-insts-name=insts_512x1024x512_32x32x32_8c.txt ../build/aie_512x1024x512_32x32x32_8c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_512x1024x512_32x32x32_8c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_512x1024x512_32x32x32_8c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_512x1024x512_32x32x32_8c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_512x1024x512_32x32x32_8c.xclbin -i build/insts_512x1024x512_32x32x32_8c.txt -k MLIR_AIE -M 512 -K 1024 -N 512 --iters 20 --warmup 10 --b_col_maj 0

Avg NPU matmul time: 2073.35us.
Avg NPU gflops: 258.939

Min NPU matmul time: 350us.
Max NPU gflops: 1533.92

Max NPU matmul time: 5357us.
Min NPU gflops: 100.219

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=float -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.3s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 32 -k 32 -n 32 --n-aie-cols 8 --b-col-maj 0 --dev npu2 -M 512 -K 1024 -N 1024 --dtype_in bf16 --dtype_out f32 --emulate-bf16-mmul-with-bfp16 true --trace_size 0 > build/aie_512x1024x1024_32x32x32_8c.mlir
mkdir -p build
cd build && xchesscc_wrapper aie2p -I /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools/include  -Dbf16_f32_ONLY -DDIM_M=32 -DDIM_K=32 -DDIM_N=32 -DAIE_API_EMULATE_BFLOAT16_MMUL_WITH_BFP16 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_32x32x32.o
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_512x1024x1024_32x32x32_8c.xclbin \
			 \
			--aie-generate-npu-insts --npu-insts-name=insts_512x1024x1024_32x32x32_8c.txt ../build/aie_512x1024x1024_32x32x32_8c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_512x1024x1024_32x32x32_8c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_512x1024x1024_32x32x32_8c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_512x1024x1024_32x32x32_8c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_512x1024x1024_32x32x32_8c.xclbin -i build/insts_512x1024x1024_32x32x32_8c.txt -k MLIR_AIE -M 512 -K 1024 -N 1024 --iters 20 --warmup 10 --b_col_maj 0

Avg NPU matmul time: 3380.85us.
Avg NPU gflops: 317.595

Min NPU matmul time: 646us.
Max NPU gflops: 1662.14

Max NPU matmul time: 5281us.
Min NPU gflops: 203.322

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=float -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.3s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 32 -k 32 -n 32 --n-aie-cols 8 --b-col-maj 0 --dev npu2 -M 512 -K 1024 -N 2560 --dtype_in bf16 --dtype_out f32 --emulate-bf16-mmul-with-bfp16 true --trace_size 0 > build/aie_512x1024x2560_32x32x32_8c.mlir
mkdir -p build
cd build && xchesscc_wrapper aie2p -I /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools/include  -Dbf16_f32_ONLY -DDIM_M=32 -DDIM_K=32 -DDIM_N=32 -DAIE_API_EMULATE_BFLOAT16_MMUL_WITH_BFP16 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_32x32x32.o
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_512x1024x2560_32x32x32_8c.xclbin \
			 \
			--aie-generate-npu-insts --npu-insts-name=insts_512x1024x2560_32x32x32_8c.txt ../build/aie_512x1024x2560_32x32x32_8c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_512x1024x2560_32x32x32_8c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_512x1024x2560_32x32x32_8c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_512x1024x2560_32x32x32_8c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_512x1024x2560_32x32x32_8c.xclbin -i build/insts_512x1024x2560_32x32x32_8c.txt -k MLIR_AIE -M 512 -K 1024 -N 2560 --iters 20 --warmup 10 --b_col_maj 0





















Avg NPU matmul time: 1964.95us.
Avg NPU gflops: 1366.12

Min NPU matmul time: 1886us.
Max NPU gflops: 1423.31

Max NPU matmul time: 2305us.
Min NPU gflops: 1164.58

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=float -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.3s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 32 -k 32 -n 32 --n-aie-cols 8 --b-col-maj 0 --dev npu2 -M 512 -K 1024 -N 4096 --dtype_in bf16 --dtype_out f32 --emulate-bf16-mmul-with-bfp16 true --trace_size 0 > build/aie_512x1024x4096_32x32x32_8c.mlir
mkdir -p build
cd build && xchesscc_wrapper aie2p -I /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools/include  -Dbf16_f32_ONLY -DDIM_M=32 -DDIM_K=32 -DDIM_N=32 -DAIE_API_EMULATE_BFLOAT16_MMUL_WITH_BFP16 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_32x32x32.o
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_512x1024x4096_32x32x32_8c.xclbin \
			 \
			--aie-generate-npu-insts --npu-insts-name=insts_512x1024x4096_32x32x32_8c.txt ../build/aie_512x1024x4096_32x32x32_8c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_512x1024x4096_32x32x32_8c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_512x1024x4096_32x32x32_8c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_512x1024x4096_32x32x32_8c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_512x1024x4096_32x32x32_8c.xclbin -i build/insts_512x1024x4096_32x32x32_8c.txt -k MLIR_AIE -M 512 -K 1024 -N 4096 --iters 20 --warmup 10 --b_col_maj 0





















Avg NPU matmul time: 2931.85us.
Avg NPU gflops: 1464.93

Min NPU matmul time: 2566us.
Max NPU gflops: 1673.8

Max NPU matmul time: 3153us.
Min NPU gflops: 1362.18

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=float -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.2s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 32 -k 32 -n 32 --n-aie-cols 8 --b-col-maj 0 --dev npu2 -M 512 -K 2560 -N 512 --dtype_in bf16 --dtype_out f32 --emulate-bf16-mmul-with-bfp16 true --trace_size 0 > build/aie_512x2560x512_32x32x32_8c.mlir
mkdir -p build
cd build && xchesscc_wrapper aie2p -I /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools/include  -Dbf16_f32_ONLY -DDIM_M=32 -DDIM_K=32 -DDIM_N=32 -DAIE_API_EMULATE_BFLOAT16_MMUL_WITH_BFP16 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_32x32x32.o
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_512x2560x512_32x32x32_8c.xclbin \
			 \
			--aie-generate-npu-insts --npu-insts-name=insts_512x2560x512_32x32x32_8c.txt ../build/aie_512x2560x512_32x32x32_8c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_512x2560x512_32x32x32_8c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_512x2560x512_32x32x32_8c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_512x2560x512_32x32x32_8c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_512x2560x512_32x32x32_8c.xclbin -i build/insts_512x2560x512_32x32x32_8c.txt -k MLIR_AIE -M 512 -K 2560 -N 512 --iters 20 --warmup 10 --b_col_maj 0

Avg NPU matmul time: 4104.35us.
Avg NPU gflops: 327.013

Min NPU matmul time: 748us.
Max NPU gflops: 1794.35

Max NPU matmul time: 5274us.
Min NPU gflops: 254.489

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=float -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.3s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 32 -k 32 -n 32 --n-aie-cols 8 --b-col-maj 0 --dev npu2 -M 512 -K 2560 -N 1024 --dtype_in bf16 --dtype_out f32 --emulate-bf16-mmul-with-bfp16 true --trace_size 0 > build/aie_512x2560x1024_32x32x32_8c.mlir
mkdir -p build
cd build && xchesscc_wrapper aie2p -I /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools/include  -Dbf16_f32_ONLY -DDIM_M=32 -DDIM_K=32 -DDIM_N=32 -DAIE_API_EMULATE_BFLOAT16_MMUL_WITH_BFP16 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_32x32x32.o
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_512x2560x1024_32x32x32_8c.xclbin \
			 \
			--aie-generate-npu-insts --npu-insts-name=insts_512x2560x1024_32x32x32_8c.txt ../build/aie_512x2560x1024_32x32x32_8c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_512x2560x1024_32x32x32_8c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_512x2560x1024_32x32x32_8c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_512x2560x1024_32x32x32_8c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_512x2560x1024_32x32x32_8c.xclbin -i build/insts_512x2560x1024_32x32x32_8c.txt -k MLIR_AIE -M 512 -K 2560 -N 1024 --iters 20 --warmup 10 --b_col_maj 0





















Avg NPU matmul time: 2128.75us.
Avg NPU gflops: 1261

Min NPU matmul time: 1786us.
Max NPU gflops: 1503

Max NPU matmul time: 2524us.
Min NPU gflops: 1063.53

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=float -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.3s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 32 -k 32 -n 32 --n-aie-cols 8 --b-col-maj 0 --dev npu2 -M 512 -K 2560 -N 2560 --dtype_in bf16 --dtype_out f32 --emulate-bf16-mmul-with-bfp16 true --trace_size 0 > build/aie_512x2560x2560_32x32x32_8c.mlir
mkdir -p build
cd build && xchesscc_wrapper aie2p -I /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools/include  -Dbf16_f32_ONLY -DDIM_M=32 -DDIM_K=32 -DDIM_N=32 -DAIE_API_EMULATE_BFLOAT16_MMUL_WITH_BFP16 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_32x32x32.o
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_512x2560x2560_32x32x32_8c.xclbin \
			 \
			--aie-generate-npu-insts --npu-insts-name=insts_512x2560x2560_32x32x32_8c.txt ../build/aie_512x2560x2560_32x32x32_8c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_512x2560x2560_32x32x32_8c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_512x2560x2560_32x32x32_8c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_512x2560x2560_32x32x32_8c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_512x2560x2560_32x32x32_8c.xclbin -i build/insts_512x2560x2560_32x32x32_8c.txt -k MLIR_AIE -M 512 -K 2560 -N 2560 --iters 20 --warmup 10 --b_col_maj 0





















Avg NPU matmul time: 4683.4us.
Avg NPU gflops: 1432.91

Min NPU matmul time: 4046us.
Max NPU gflops: 1658.65

Max NPU matmul time: 8010us.
Min NPU gflops: 837.814

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=float -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.3s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 32 -k 32 -n 32 --n-aie-cols 8 --b-col-maj 0 --dev npu2 -M 512 -K 2560 -N 4096 --dtype_in bf16 --dtype_out f32 --emulate-bf16-mmul-with-bfp16 true --trace_size 0 > build/aie_512x2560x4096_32x32x32_8c.mlir
mkdir -p build
cd build && xchesscc_wrapper aie2p -I /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools/include  -Dbf16_f32_ONLY -DDIM_M=32 -DDIM_K=32 -DDIM_N=32 -DAIE_API_EMULATE_BFLOAT16_MMUL_WITH_BFP16 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_32x32x32.o
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_512x2560x4096_32x32x32_8c.xclbin \
			 \
			--aie-generate-npu-insts --npu-insts-name=insts_512x2560x4096_32x32x32_8c.txt ../build/aie_512x2560x4096_32x32x32_8c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_512x2560x4096_32x32x32_8c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_512x2560x4096_32x32x32_8c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_512x2560x4096_32x32x32_8c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_512x2560x4096_32x32x32_8c.xclbin -i build/insts_512x2560x4096_32x32x32_8c.txt -k MLIR_AIE -M 512 -K 2560 -N 4096 --iters 20 --warmup 10 --b_col_maj 0





















Avg NPU matmul time: 7153.3us.
Avg NPU gflops: 1501.04

Min NPU matmul time: 6236us.
Max NPU gflops: 1721.84

Max NPU matmul time: 10723us.
Min NPU gflops: 1001.34

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=float -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.3s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 32 -k 32 -n 32 --n-aie-cols 8 --b-col-maj 0 --dev npu2 -M 512 -K 4096 -N 512 --dtype_in bf16 --dtype_out f32 --emulate-bf16-mmul-with-bfp16 true --trace_size 0 > build/aie_512x4096x512_32x32x32_8c.mlir
mkdir -p build
cd build && xchesscc_wrapper aie2p -I /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools/include  -Dbf16_f32_ONLY -DDIM_M=32 -DDIM_K=32 -DDIM_N=32 -DAIE_API_EMULATE_BFLOAT16_MMUL_WITH_BFP16 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_32x32x32.o
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_512x4096x512_32x32x32_8c.xclbin \
			 \
			--aie-generate-npu-insts --npu-insts-name=insts_512x4096x512_32x32x32_8c.txt ../build/aie_512x4096x512_32x32x32_8c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_512x4096x512_32x32x32_8c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_512x4096x512_32x32x32_8c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_512x4096x512_32x32x32_8c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_512x4096x512_32x32x32_8c.xclbin -i build/insts_512x4096x512_32x32x32_8c.txt -k MLIR_AIE -M 512 -K 4096 -N 512 --iters 20 --warmup 10 --b_col_maj 0

Avg NPU matmul time: 5175.5us.
Avg NPU gflops: 414.933

Min NPU matmul time: 1609us.
Max NPU gflops: 1334.67

Max NPU matmul time: 6213us.
Min NPU gflops: 345.644

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=float -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.3s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 32 -k 32 -n 32 --n-aie-cols 8 --b-col-maj 0 --dev npu2 -M 512 -K 4096 -N 1024 --dtype_in bf16 --dtype_out f32 --emulate-bf16-mmul-with-bfp16 true --trace_size 0 > build/aie_512x4096x1024_32x32x32_8c.mlir
mkdir -p build
cd build && xchesscc_wrapper aie2p -I /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools/include  -Dbf16_f32_ONLY -DDIM_M=32 -DDIM_K=32 -DDIM_N=32 -DAIE_API_EMULATE_BFLOAT16_MMUL_WITH_BFP16 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_32x32x32.o
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_512x4096x1024_32x32x32_8c.xclbin \
			 \
			--aie-generate-npu-insts --npu-insts-name=insts_512x4096x1024_32x32x32_8c.txt ../build/aie_512x4096x1024_32x32x32_8c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_512x4096x1024_32x32x32_8c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_512x4096x1024_32x32x32_8c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_512x4096x1024_32x32x32_8c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_512x4096x1024_32x32x32_8c.xclbin -i build/insts_512x4096x1024_32x32x32_8c.txt -k MLIR_AIE -M 512 -K 4096 -N 1024 --iters 20 --warmup 10 --b_col_maj 0





















Avg NPU matmul time: 3008.95us.
Avg NPU gflops: 1427.4

Min NPU matmul time: 2353us.
Max NPU gflops: 1825.32

Max NPU matmul time: 6311us.
Min NPU gflops: 680.553

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=float -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.3s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 32 -k 32 -n 32 --n-aie-cols 8 --b-col-maj 0 --dev npu2 -M 512 -K 4096 -N 2560 --dtype_in bf16 --dtype_out f32 --emulate-bf16-mmul-with-bfp16 true --trace_size 0 > build/aie_512x4096x2560_32x32x32_8c.mlir
mkdir -p build
cd build && xchesscc_wrapper aie2p -I /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools/include  -Dbf16_f32_ONLY -DDIM_M=32 -DDIM_K=32 -DDIM_N=32 -DAIE_API_EMULATE_BFLOAT16_MMUL_WITH_BFP16 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_32x32x32.o
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_512x4096x2560_32x32x32_8c.xclbin \
			 \
			--aie-generate-npu-insts --npu-insts-name=insts_512x4096x2560_32x32x32_8c.txt ../build/aie_512x4096x2560_32x32x32_8c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_512x4096x2560_32x32x32_8c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_512x4096x2560_32x32x32_8c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_512x4096x2560_32x32x32_8c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_512x4096x2560_32x32x32_8c.xclbin -i build/insts_512x4096x2560_32x32x32_8c.txt -k MLIR_AIE -M 512 -K 4096 -N 2560 --iters 20 --warmup 10 --b_col_maj 0





















Avg NPU matmul time: 6988.95us.
Avg NPU gflops: 1536.34

Min NPU matmul time: 6058us.
Max NPU gflops: 1772.44

Max NPU matmul time: 10054us.
Min NPU gflops: 1067.97

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=float -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.3s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 32 -k 32 -n 32 --n-aie-cols 8 --b-col-maj 0 --dev npu2 -M 512 -K 4096 -N 4096 --dtype_in bf16 --dtype_out f32 --emulate-bf16-mmul-with-bfp16 true --trace_size 0 > build/aie_512x4096x4096_32x32x32_8c.mlir
mkdir -p build
cd build && xchesscc_wrapper aie2p -I /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools/include  -Dbf16_f32_ONLY -DDIM_M=32 -DDIM_K=32 -DDIM_N=32 -DAIE_API_EMULATE_BFLOAT16_MMUL_WITH_BFP16 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_32x32x32.o
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_512x4096x4096_32x32x32_8c.xclbin \
			 \
			--aie-generate-npu-insts --npu-insts-name=insts_512x4096x4096_32x32x32_8c.txt ../build/aie_512x4096x4096_32x32x32_8c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_512x4096x4096_32x32x32_8c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_512x4096x4096_32x32x32_8c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_512x4096x4096_32x32x32_8c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_512x4096x4096_32x32x32_8c.xclbin -i build/insts_512x4096x4096_32x32x32_8c.txt -k MLIR_AIE -M 512 -K 4096 -N 4096 --iters 20 --warmup 10 --b_col_maj 0





















Avg NPU matmul time: 13071.5us.
Avg NPU gflops: 1314.3

Min NPU matmul time: 10097us.
Max NPU gflops: 1701.48

Max NPU matmul time: 14678us.
Min NPU gflops: 1170.45

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=float -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.3s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 32 -k 32 -n 32 --n-aie-cols 8 --b-col-maj 0 --dev npu2 -M 1024 -K 512 -N 512 --dtype_in bf16 --dtype_out f32 --emulate-bf16-mmul-with-bfp16 true --trace_size 0 > build/aie_1024x512x512_32x32x32_8c.mlir
mkdir -p build
cd build && xchesscc_wrapper aie2p -I /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools/include  -Dbf16_f32_ONLY -DDIM_M=32 -DDIM_K=32 -DDIM_N=32 -DAIE_API_EMULATE_BFLOAT16_MMUL_WITH_BFP16 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_32x32x32.o
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_1024x512x512_32x32x32_8c.xclbin \
			 \
			--aie-generate-npu-insts --npu-insts-name=insts_1024x512x512_32x32x32_8c.txt ../build/aie_1024x512x512_32x32x32_8c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_1024x512x512_32x32x32_8c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_1024x512x512_32x32x32_8c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_1024x512x512_32x32x32_8c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_1024x512x512_32x32x32_8c.xclbin -i build/insts_1024x512x512_32x32x32_8c.txt -k MLIR_AIE -M 1024 -K 512 -N 512 --iters 20 --warmup 10 --b_col_maj 0

Avg NPU matmul time: 2159.8us.
Avg NPU gflops: 248.574

Min NPU matmul time: 387us.
Max NPU gflops: 1387.26

Max NPU matmul time: 4778us.
Min NPU gflops: 112.363

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=float -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.3s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 32 -k 32 -n 32 --n-aie-cols 8 --b-col-maj 0 --dev npu2 -M 1024 -K 512 -N 1024 --dtype_in bf16 --dtype_out f32 --emulate-bf16-mmul-with-bfp16 true --trace_size 0 > build/aie_1024x512x1024_32x32x32_8c.mlir
mkdir -p build
cd build && xchesscc_wrapper aie2p -I /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools/include  -Dbf16_f32_ONLY -DDIM_M=32 -DDIM_K=32 -DDIM_N=32 -DAIE_API_EMULATE_BFLOAT16_MMUL_WITH_BFP16 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_32x32x32.o
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_1024x512x1024_32x32x32_8c.xclbin \
			 \
			--aie-generate-npu-insts --npu-insts-name=insts_1024x512x1024_32x32x32_8c.txt ../build/aie_1024x512x1024_32x32x32_8c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_1024x512x1024_32x32x32_8c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_1024x512x1024_32x32x32_8c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_1024x512x1024_32x32x32_8c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_1024x512x1024_32x32x32_8c.xclbin -i build/insts_1024x512x1024_32x32x32_8c.txt -k MLIR_AIE -M 1024 -K 512 -N 1024 --iters 20 --warmup 10 --b_col_maj 0

Avg NPU matmul time: 3058.25us.
Avg NPU gflops: 351.097

Min NPU matmul time: 651us.
Max NPU gflops: 1649.37

Max NPU matmul time: 5063us.
Min NPU gflops: 212.076

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=float -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.3s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 32 -k 32 -n 32 --n-aie-cols 8 --b-col-maj 0 --dev npu2 -M 1024 -K 512 -N 2560 --dtype_in bf16 --dtype_out f32 --emulate-bf16-mmul-with-bfp16 true --trace_size 0 > build/aie_1024x512x2560_32x32x32_8c.mlir
mkdir -p build
cd build && xchesscc_wrapper aie2p -I /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools/include  -Dbf16_f32_ONLY -DDIM_M=32 -DDIM_K=32 -DDIM_N=32 -DAIE_API_EMULATE_BFLOAT16_MMUL_WITH_BFP16 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_32x32x32.o
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_1024x512x2560_32x32x32_8c.xclbin \
			 \
			--aie-generate-npu-insts --npu-insts-name=insts_1024x512x2560_32x32x32_8c.txt ../build/aie_1024x512x2560_32x32x32_8c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_1024x512x2560_32x32x32_8c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_1024x512x2560_32x32x32_8c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_1024x512x2560_32x32x32_8c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_1024x512x2560_32x32x32_8c.xclbin -i build/insts_1024x512x2560_32x32x32_8c.txt -k MLIR_AIE -M 1024 -K 512 -N 2560 --iters 20 --warmup 10 --b_col_maj 0





















Avg NPU matmul time: 2007.5us.
Avg NPU gflops: 1337.16

Min NPU matmul time: 1556us.
Max NPU gflops: 1725.16

Max NPU matmul time: 2695us.
Min NPU gflops: 996.05

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=float -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.3s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 32 -k 32 -n 32 --n-aie-cols 8 --b-col-maj 0 --dev npu2 -M 1024 -K 512 -N 4096 --dtype_in bf16 --dtype_out f32 --emulate-bf16-mmul-with-bfp16 true --trace_size 0 > build/aie_1024x512x4096_32x32x32_8c.mlir
mkdir -p build
cd build && xchesscc_wrapper aie2p -I /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools/include  -Dbf16_f32_ONLY -DDIM_M=32 -DDIM_K=32 -DDIM_N=32 -DAIE_API_EMULATE_BFLOAT16_MMUL_WITH_BFP16 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_32x32x32.o
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_1024x512x4096_32x32x32_8c.xclbin \
			 \
			--aie-generate-npu-insts --npu-insts-name=insts_1024x512x4096_32x32x32_8c.txt ../build/aie_1024x512x4096_32x32x32_8c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_1024x512x4096_32x32x32_8c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_1024x512x4096_32x32x32_8c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_1024x512x4096_32x32x32_8c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_1024x512x4096_32x32x32_8c.xclbin -i build/insts_1024x512x4096_32x32x32_8c.txt -k MLIR_AIE -M 1024 -K 512 -N 4096 --iters 20 --warmup 10 --b_col_maj 0





















Avg NPU matmul time: 2990.3us.
Avg NPU gflops: 1436.3

Min NPU matmul time: 2744us.
Max NPU gflops: 1565.22

Max NPU matmul time: 3423us.
Min NPU gflops: 1254.74

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=float -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.3s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 32 -k 32 -n 32 --n-aie-cols 8 --b-col-maj 0 --dev npu2 -M 1024 -K 1024 -N 512 --dtype_in bf16 --dtype_out f32 --emulate-bf16-mmul-with-bfp16 true --trace_size 0 > build/aie_1024x1024x512_32x32x32_8c.mlir
mkdir -p build
cd build && xchesscc_wrapper aie2p -I /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools/include  -Dbf16_f32_ONLY -DDIM_M=32 -DDIM_K=32 -DDIM_N=32 -DAIE_API_EMULATE_BFLOAT16_MMUL_WITH_BFP16 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_32x32x32.o
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_1024x1024x512_32x32x32_8c.xclbin \
			 \
			--aie-generate-npu-insts --npu-insts-name=insts_1024x1024x512_32x32x32_8c.txt ../build/aie_1024x1024x512_32x32x32_8c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_1024x1024x512_32x32x32_8c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_1024x1024x512_32x32x32_8c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_1024x1024x512_32x32x32_8c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_1024x1024x512_32x32x32_8c.xclbin -i build/insts_1024x1024x512_32x32x32_8c.txt -k MLIR_AIE -M 1024 -K 1024 -N 512 --iters 20 --warmup 10 --b_col_maj 0

Avg NPU matmul time: 2776.6us.
Avg NPU gflops: 386.711

Min NPU matmul time: 596us.
Max NPU gflops: 1801.58

Max NPU matmul time: 4869us.
Min NPU gflops: 220.526

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=float -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.3s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 32 -k 32 -n 32 --n-aie-cols 8 --b-col-maj 0 --dev npu2 -M 1024 -K 1024 -N 1024 --dtype_in bf16 --dtype_out f32 --emulate-bf16-mmul-with-bfp16 true --trace_size 0 > build/aie_1024x1024x1024_32x32x32_8c.mlir
mkdir -p build
cd build && xchesscc_wrapper aie2p -I /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools/include  -Dbf16_f32_ONLY -DDIM_M=32 -DDIM_K=32 -DDIM_N=32 -DAIE_API_EMULATE_BFLOAT16_MMUL_WITH_BFP16 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_32x32x32.o
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_1024x1024x1024_32x32x32_8c.xclbin \
			 \
			--aie-generate-npu-insts --npu-insts-name=insts_1024x1024x1024_32x32x32_8c.txt ../build/aie_1024x1024x1024_32x32x32_8c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_1024x1024x1024_32x32x32_8c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_1024x1024x1024_32x32x32_8c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_1024x1024x1024_32x32x32_8c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_1024x1024x1024_32x32x32_8c.xclbin -i build/insts_1024x1024x1024_32x32x32_8c.txt -k MLIR_AIE -M 1024 -K 1024 -N 1024 --iters 20 --warmup 10 --b_col_maj 0

Avg NPU matmul time: 4905us.
Avg NPU gflops: 437.815

Min NPU matmul time: 1111us.
Max NPU gflops: 1932.93

Max NPU matmul time: 5469us.
Min NPU gflops: 392.665

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=float -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.3s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 32 -k 32 -n 32 --n-aie-cols 8 --b-col-maj 0 --dev npu2 -M 1024 -K 1024 -N 2560 --dtype_in bf16 --dtype_out f32 --emulate-bf16-mmul-with-bfp16 true --trace_size 0 > build/aie_1024x1024x2560_32x32x32_8c.mlir
mkdir -p build
cd build && xchesscc_wrapper aie2p -I /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools/include  -Dbf16_f32_ONLY -DDIM_M=32 -DDIM_K=32 -DDIM_N=32 -DAIE_API_EMULATE_BFLOAT16_MMUL_WITH_BFP16 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_32x32x32.o
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_1024x1024x2560_32x32x32_8c.xclbin \
			 \
			--aie-generate-npu-insts --npu-insts-name=insts_1024x1024x2560_32x32x32_8c.txt ../build/aie_1024x1024x2560_32x32x32_8c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_1024x1024x2560_32x32x32_8c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_1024x1024x2560_32x32x32_8c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_1024x1024x2560_32x32x32_8c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_1024x1024x2560_32x32x32_8c.xclbin -i build/insts_1024x1024x2560_32x32x32_8c.txt -k MLIR_AIE -M 1024 -K 1024 -N 2560 --iters 20 --warmup 10 --b_col_maj 0





















Avg NPU matmul time: 3945.35us.
Avg NPU gflops: 1360.77

Min NPU matmul time: 3214us.
Max NPU gflops: 1670.41

Max NPU matmul time: 5006us.
Min NPU gflops: 1072.45

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=float -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.3s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 32 -k 32 -n 32 --n-aie-cols 8 --b-col-maj 0 --dev npu2 -M 1024 -K 1024 -N 4096 --dtype_in bf16 --dtype_out f32 --emulate-bf16-mmul-with-bfp16 true --trace_size 0 > build/aie_1024x1024x4096_32x32x32_8c.mlir
mkdir -p build
cd build && xchesscc_wrapper aie2p -I /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools/include  -Dbf16_f32_ONLY -DDIM_M=32 -DDIM_K=32 -DDIM_N=32 -DAIE_API_EMULATE_BFLOAT16_MMUL_WITH_BFP16 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_32x32x32.o
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_1024x1024x4096_32x32x32_8c.xclbin \
			 \
			--aie-generate-npu-insts --npu-insts-name=insts_1024x1024x4096_32x32x32_8c.txt ../build/aie_1024x1024x4096_32x32x32_8c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_1024x1024x4096_32x32x32_8c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_1024x1024x4096_32x32x32_8c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_1024x1024x4096_32x32x32_8c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_1024x1024x4096_32x32x32_8c.xclbin -i build/insts_1024x1024x4096_32x32x32_8c.txt -k MLIR_AIE -M 1024 -K 1024 -N 4096 --iters 20 --warmup 10 --b_col_maj 0





















Avg NPU matmul time: 5816.8us.
Avg NPU gflops: 1476.75

Min NPU matmul time: 5027us.
Max NPU gflops: 1708.76

Max NPU matmul time: 9508us.
Min NPU gflops: 903.443

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=float -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.3s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 32 -k 32 -n 32 --n-aie-cols 8 --b-col-maj 0 --dev npu2 -M 1024 -K 2560 -N 512 --dtype_in bf16 --dtype_out f32 --emulate-bf16-mmul-with-bfp16 true --trace_size 0 > build/aie_1024x2560x512_32x32x32_8c.mlir
mkdir -p build
cd build && xchesscc_wrapper aie2p -I /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools/include  -Dbf16_f32_ONLY -DDIM_M=32 -DDIM_K=32 -DDIM_N=32 -DAIE_API_EMULATE_BFLOAT16_MMUL_WITH_BFP16 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_32x32x32.o
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_1024x2560x512_32x32x32_8c.xclbin \
			 \
			--aie-generate-npu-insts --npu-insts-name=insts_1024x2560x512_32x32x32_8c.txt ../build/aie_1024x2560x512_32x32x32_8c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_1024x2560x512_32x32x32_8c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_1024x2560x512_32x32x32_8c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_1024x2560x512_32x32x32_8c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_1024x2560x512_32x32x32_8c.xclbin -i build/insts_1024x2560x512_32x32x32_8c.txt -k MLIR_AIE -M 1024 -K 2560 -N 512 --iters 20 --warmup 10 --b_col_maj 0





















Avg NPU matmul time: 2231.3us.
Avg NPU gflops: 1203.05

Min NPU matmul time: 1671us.
Max NPU gflops: 1606.44

Max NPU matmul time: 3298us.
Min NPU gflops: 813.934

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=float -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.2s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 32 -k 32 -n 32 --n-aie-cols 8 --b-col-maj 0 --dev npu2 -M 1024 -K 2560 -N 1024 --dtype_in bf16 --dtype_out f32 --emulate-bf16-mmul-with-bfp16 true --trace_size 0 > build/aie_1024x2560x1024_32x32x32_8c.mlir
mkdir -p build
cd build && xchesscc_wrapper aie2p -I /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools/include  -Dbf16_f32_ONLY -DDIM_M=32 -DDIM_K=32 -DDIM_N=32 -DAIE_API_EMULATE_BFLOAT16_MMUL_WITH_BFP16 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_32x32x32.o
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_1024x2560x1024_32x32x32_8c.xclbin \
			 \
			--aie-generate-npu-insts --npu-insts-name=insts_1024x2560x1024_32x32x32_8c.txt ../build/aie_1024x2560x1024_32x32x32_8c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_1024x2560x1024_32x32x32_8c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_1024x2560x1024_32x32x32_8c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_1024x2560x1024_32x32x32_8c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_1024x2560x1024_32x32x32_8c.xclbin -i build/insts_1024x2560x1024_32x32x32_8c.txt -k MLIR_AIE -M 1024 -K 2560 -N 1024 --iters 20 --warmup 10 --b_col_maj 0





















Avg NPU matmul time: 4201us.
Avg NPU gflops: 1277.96

Min NPU matmul time: 3181us.
Max NPU gflops: 1687.74

Max NPU matmul time: 7114us.
Min NPU gflops: 754.668

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=float -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.3s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 32 -k 32 -n 32 --n-aie-cols 8 --b-col-maj 0 --dev npu2 -M 1024 -K 2560 -N 2560 --dtype_in bf16 --dtype_out f32 --emulate-bf16-mmul-with-bfp16 true --trace_size 0 > build/aie_1024x2560x2560_32x32x32_8c.mlir
mkdir -p build
cd build && xchesscc_wrapper aie2p -I /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools/include  -Dbf16_f32_ONLY -DDIM_M=32 -DDIM_K=32 -DDIM_N=32 -DAIE_API_EMULATE_BFLOAT16_MMUL_WITH_BFP16 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_32x32x32.o
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_1024x2560x2560_32x32x32_8c.xclbin \
			 \
			--aie-generate-npu-insts --npu-insts-name=insts_1024x2560x2560_32x32x32_8c.txt ../build/aie_1024x2560x2560_32x32x32_8c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_1024x2560x2560_32x32x32_8c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_1024x2560x2560_32x32x32_8c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_1024x2560x2560_32x32x32_8c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_1024x2560x2560_32x32x32_8c.xclbin -i build/insts_1024x2560x2560_32x32x32_8c.txt -k MLIR_AIE -M 1024 -K 2560 -N 2560 --iters 20 --warmup 10 --b_col_maj 0





















Avg NPU matmul time: 8364.1us.
Avg NPU gflops: 1604.69

Min NPU matmul time: 7630us.
Max NPU gflops: 1759.08

Max NPU matmul time: 11479us.
Min NPU gflops: 1169.25

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=float -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.3s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 32 -k 32 -n 32 --n-aie-cols 8 --b-col-maj 0 --dev npu2 -M 1024 -K 2560 -N 4096 --dtype_in bf16 --dtype_out f32 --emulate-bf16-mmul-with-bfp16 true --trace_size 0 > build/aie_1024x2560x4096_32x32x32_8c.mlir
mkdir -p build
cd build && xchesscc_wrapper aie2p -I /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools/include  -Dbf16_f32_ONLY -DDIM_M=32 -DDIM_K=32 -DDIM_N=32 -DAIE_API_EMULATE_BFLOAT16_MMUL_WITH_BFP16 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_32x32x32.o
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_1024x2560x4096_32x32x32_8c.xclbin \
			 \
			--aie-generate-npu-insts --npu-insts-name=insts_1024x2560x4096_32x32x32_8c.txt ../build/aie_1024x2560x4096_32x32x32_8c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_1024x2560x4096_32x32x32_8c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_1024x2560x4096_32x32x32_8c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_1024x2560x4096_32x32x32_8c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_1024x2560x4096_32x32x32_8c.xclbin -i build/insts_1024x2560x4096_32x32x32_8c.txt -k MLIR_AIE -M 1024 -K 2560 -N 4096 --iters 20 --warmup 10 --b_col_maj 0





















Avg NPU matmul time: 13211.2us.
Avg NPU gflops: 1625.5

Min NPU matmul time: 12217us.
Max NPU gflops: 1757.78

Max NPU matmul time: 16669us.
Min NPU gflops: 1288.31

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=float -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.3s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 32 -k 32 -n 32 --n-aie-cols 8 --b-col-maj 0 --dev npu2 -M 1024 -K 4096 -N 512 --dtype_in bf16 --dtype_out f32 --emulate-bf16-mmul-with-bfp16 true --trace_size 0 > build/aie_1024x4096x512_32x32x32_8c.mlir
mkdir -p build
cd build && xchesscc_wrapper aie2p -I /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools/include  -Dbf16_f32_ONLY -DDIM_M=32 -DDIM_K=32 -DDIM_N=32 -DAIE_API_EMULATE_BFLOAT16_MMUL_WITH_BFP16 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_32x32x32.o
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_1024x4096x512_32x32x32_8c.xclbin \
			 \
			--aie-generate-npu-insts --npu-insts-name=insts_1024x4096x512_32x32x32_8c.txt ../build/aie_1024x4096x512_32x32x32_8c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_1024x4096x512_32x32x32_8c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_1024x4096x512_32x32x32_8c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_1024x4096x512_32x32x32_8c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_1024x4096x512_32x32x32_8c.xclbin -i build/insts_1024x4096x512_32x32x32_8c.txt -k MLIR_AIE -M 1024 -K 4096 -N 512 --iters 20 --warmup 10 --b_col_maj 0





















Avg NPU matmul time: 2928.1us.
Avg NPU gflops: 1466.81

Min NPU matmul time: 2438us.
Max NPU gflops: 1761.68

Max NPU matmul time: 6200us.
Min NPU gflops: 692.737

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=float -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.3s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 32 -k 32 -n 32 --n-aie-cols 8 --b-col-maj 0 --dev npu2 -M 1024 -K 4096 -N 1024 --dtype_in bf16 --dtype_out f32 --emulate-bf16-mmul-with-bfp16 true --trace_size 0 > build/aie_1024x4096x1024_32x32x32_8c.mlir
mkdir -p build
cd build && xchesscc_wrapper aie2p -I /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools/include  -Dbf16_f32_ONLY -DDIM_M=32 -DDIM_K=32 -DDIM_N=32 -DAIE_API_EMULATE_BFLOAT16_MMUL_WITH_BFP16 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_32x32x32.o
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_1024x4096x1024_32x32x32_8c.xclbin \
			 \
			--aie-generate-npu-insts --npu-insts-name=insts_1024x4096x1024_32x32x32_8c.txt ../build/aie_1024x4096x1024_32x32x32_8c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_1024x4096x1024_32x32x32_8c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_1024x4096x1024_32x32x32_8c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_1024x4096x1024_32x32x32_8c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_1024x4096x1024_32x32x32_8c.xclbin -i build/insts_1024x4096x1024_32x32x32_8c.txt -k MLIR_AIE -M 1024 -K 4096 -N 1024 --iters 20 --warmup 10 --b_col_maj 0





















Avg NPU matmul time: 6452.2us.
Avg NPU gflops: 1331.32

Min NPU matmul time: 4742us.
Max NPU gflops: 1811.46

Max NPU matmul time: 8784us.
Min NPU gflops: 977.907

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=float -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.3s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 32 -k 32 -n 32 --n-aie-cols 8 --b-col-maj 0 --dev npu2 -M 1024 -K 4096 -N 2560 --dtype_in bf16 --dtype_out f32 --emulate-bf16-mmul-with-bfp16 true --trace_size 0 > build/aie_1024x4096x2560_32x32x32_8c.mlir
mkdir -p build
cd build && xchesscc_wrapper aie2p -I /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools/include  -Dbf16_f32_ONLY -DDIM_M=32 -DDIM_K=32 -DDIM_N=32 -DAIE_API_EMULATE_BFLOAT16_MMUL_WITH_BFP16 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_32x32x32.o
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_1024x4096x2560_32x32x32_8c.xclbin \
			 \
			--aie-generate-npu-insts --npu-insts-name=insts_1024x4096x2560_32x32x32_8c.txt ../build/aie_1024x4096x2560_32x32x32_8c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_1024x4096x2560_32x32x32_8c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_1024x4096x2560_32x32x32_8c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_1024x4096x2560_32x32x32_8c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_1024x4096x2560_32x32x32_8c.xclbin -i build/insts_1024x4096x2560_32x32x32_8c.txt -k MLIR_AIE -M 1024 -K 4096 -N 2560 --iters 20 --warmup 10 --b_col_maj 0





















Avg NPU matmul time: 12829us.
Avg NPU gflops: 1673.93

Min NPU matmul time: 11630us.
Max NPU gflops: 1846.5

Max NPU matmul time: 16639us.
Min NPU gflops: 1290.63

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=float -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.3s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 32 -k 32 -n 32 --n-aie-cols 8 --b-col-maj 0 --dev npu2 -M 1024 -K 4096 -N 4096 --dtype_in bf16 --dtype_out f32 --emulate-bf16-mmul-with-bfp16 true --trace_size 0 > build/aie_1024x4096x4096_32x32x32_8c.mlir
mkdir -p build
cd build && xchesscc_wrapper aie2p -I /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools/include  -Dbf16_f32_ONLY -DDIM_M=32 -DDIM_K=32 -DDIM_N=32 -DAIE_API_EMULATE_BFLOAT16_MMUL_WITH_BFP16 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_32x32x32.o
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_1024x4096x4096_32x32x32_8c.xclbin \
			 \
			--aie-generate-npu-insts --npu-insts-name=insts_1024x4096x4096_32x32x32_8c.txt ../build/aie_1024x4096x4096_32x32x32_8c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_1024x4096x4096_32x32x32_8c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_1024x4096x4096_32x32x32_8c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_1024x4096x4096_32x32x32_8c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_1024x4096x4096_32x32x32_8c.xclbin -i build/insts_1024x4096x4096_32x32x32_8c.txt -k MLIR_AIE -M 1024 -K 4096 -N 4096 --iters 20 --warmup 10 --b_col_maj 0





















Avg NPU matmul time: 23427.6us.
Avg NPU gflops: 1466.64

Min NPU matmul time: 19651us.
Max NPU gflops: 1748.5

Max NPU matmul time: 24449us.
Min NPU gflops: 1405.36

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=float -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.3s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 32 -k 32 -n 32 --n-aie-cols 8 --b-col-maj 0 --dev npu2 -M 2560 -K 512 -N 512 --dtype_in bf16 --dtype_out f32 --emulate-bf16-mmul-with-bfp16 true --trace_size 0 > build/aie_2560x512x512_32x32x32_8c.mlir
mkdir -p build
cd build && xchesscc_wrapper aie2p -I /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools/include  -Dbf16_f32_ONLY -DDIM_M=32 -DDIM_K=32 -DDIM_N=32 -DAIE_API_EMULATE_BFLOAT16_MMUL_WITH_BFP16 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_32x32x32.o
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_2560x512x512_32x32x32_8c.xclbin \
			 \
			--aie-generate-npu-insts --npu-insts-name=insts_2560x512x512_32x32x32_8c.txt ../build/aie_2560x512x512_32x32x32_8c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_2560x512x512_32x32x32_8c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_2560x512x512_32x32x32_8c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_2560x512x512_32x32x32_8c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_2560x512x512_32x32x32_8c.xclbin -i build/insts_2560x512x512_32x32x32_8c.txt -k MLIR_AIE -M 2560 -K 512 -N 512 --iters 20 --warmup 10 --b_col_maj 0

Avg NPU matmul time: 4136.95us.
Avg NPU gflops: 324.436

Min NPU matmul time: 799us.
Max NPU gflops: 1679.82

Max NPU matmul time: 6331us.
Min NPU gflops: 212.001

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=float -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.2s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 32 -k 32 -n 32 --n-aie-cols 8 --b-col-maj 0 --dev npu2 -M 2560 -K 512 -N 1024 --dtype_in bf16 --dtype_out f32 --emulate-bf16-mmul-with-bfp16 true --trace_size 0 > build/aie_2560x512x1024_32x32x32_8c.mlir
mkdir -p build
cd build && xchesscc_wrapper aie2p -I /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools/include  -Dbf16_f32_ONLY -DDIM_M=32 -DDIM_K=32 -DDIM_N=32 -DAIE_API_EMULATE_BFLOAT16_MMUL_WITH_BFP16 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_32x32x32.o
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_2560x512x1024_32x32x32_8c.xclbin \
			 \
			--aie-generate-npu-insts --npu-insts-name=insts_2560x512x1024_32x32x32_8c.txt ../build/aie_2560x512x1024_32x32x32_8c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_2560x512x1024_32x32x32_8c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_2560x512x1024_32x32x32_8c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_2560x512x1024_32x32x32_8c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_2560x512x1024_32x32x32_8c.xclbin -i build/insts_2560x512x1024_32x32x32_8c.txt -k MLIR_AIE -M 2560 -K 512 -N 1024 --iters 20 --warmup 10 --b_col_maj 0





















Avg NPU matmul time: 1921.4us.
Avg NPU gflops: 1397.08

Min NPU matmul time: 1460us.
Max NPU gflops: 1838.6

Max NPU matmul time: 2648us.
Min NPU gflops: 1013.73

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=float -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.2s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 32 -k 32 -n 32 --n-aie-cols 8 --b-col-maj 0 --dev npu2 -M 2560 -K 512 -N 2560 --dtype_in bf16 --dtype_out f32 --emulate-bf16-mmul-with-bfp16 true --trace_size 0 > build/aie_2560x512x2560_32x32x32_8c.mlir
mkdir -p build
cd build && xchesscc_wrapper aie2p -I /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools/include  -Dbf16_f32_ONLY -DDIM_M=32 -DDIM_K=32 -DDIM_N=32 -DAIE_API_EMULATE_BFLOAT16_MMUL_WITH_BFP16 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_32x32x32.o
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_2560x512x2560_32x32x32_8c.xclbin \
			 \
			--aie-generate-npu-insts --npu-insts-name=insts_2560x512x2560_32x32x32_8c.txt ../build/aie_2560x512x2560_32x32x32_8c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_2560x512x2560_32x32x32_8c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_2560x512x2560_32x32x32_8c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_2560x512x2560_32x32x32_8c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_2560x512x2560_32x32x32_8c.xclbin -i build/insts_2560x512x2560_32x32x32_8c.txt -k MLIR_AIE -M 2560 -K 512 -N 2560 --iters 20 --warmup 10 --b_col_maj 0





















Avg NPU matmul time: 4080.05us.
Avg NPU gflops: 1644.8

Min NPU matmul time: 3704us.
Max NPU gflops: 1811.79

Max NPU matmul time: 4359us.
Min NPU gflops: 1539.55

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=float -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.3s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 32 -k 32 -n 32 --n-aie-cols 8 --b-col-maj 0 --dev npu2 -M 2560 -K 512 -N 4096 --dtype_in bf16 --dtype_out f32 --emulate-bf16-mmul-with-bfp16 true --trace_size 0 > build/aie_2560x512x4096_32x32x32_8c.mlir
mkdir -p build
cd build && xchesscc_wrapper aie2p -I /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools/include  -Dbf16_f32_ONLY -DDIM_M=32 -DDIM_K=32 -DDIM_N=32 -DAIE_API_EMULATE_BFLOAT16_MMUL_WITH_BFP16 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_32x32x32.o
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_2560x512x4096_32x32x32_8c.xclbin \
			 \
			--aie-generate-npu-insts --npu-insts-name=insts_2560x512x4096_32x32x32_8c.txt ../build/aie_2560x512x4096_32x32x32_8c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_2560x512x4096_32x32x32_8c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_2560x512x4096_32x32x32_8c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_2560x512x4096_32x32x32_8c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_2560x512x4096_32x32x32_8c.xclbin -i build/insts_2560x512x4096_32x32x32_8c.txt -k MLIR_AIE -M 2560 -K 512 -N 4096 --iters 20 --warmup 10 --b_col_maj 0





















Avg NPU matmul time: 6799.9us.
Avg NPU gflops: 1579.06

Min NPU matmul time: 6191us.
Max NPU gflops: 1734.36

Max NPU matmul time: 7086us.
Min NPU gflops: 1515.3

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=float -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.2s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 32 -k 32 -n 32 --n-aie-cols 8 --b-col-maj 0 --dev npu2 -M 2560 -K 1024 -N 512 --dtype_in bf16 --dtype_out f32 --emulate-bf16-mmul-with-bfp16 true --trace_size 0 > build/aie_2560x1024x512_32x32x32_8c.mlir
mkdir -p build
cd build && xchesscc_wrapper aie2p -I /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools/include  -Dbf16_f32_ONLY -DDIM_M=32 -DDIM_K=32 -DDIM_N=32 -DAIE_API_EMULATE_BFLOAT16_MMUL_WITH_BFP16 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_32x32x32.o
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_2560x1024x512_32x32x32_8c.xclbin \
			 \
			--aie-generate-npu-insts --npu-insts-name=insts_2560x1024x512_32x32x32_8c.txt ../build/aie_2560x1024x512_32x32x32_8c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_2560x1024x512_32x32x32_8c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_2560x1024x512_32x32x32_8c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_2560x1024x512_32x32x32_8c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_2560x1024x512_32x32x32_8c.xclbin -i build/insts_2560x1024x512_32x32x32_8c.txt -k MLIR_AIE -M 2560 -K 1024 -N 512 --iters 20 --warmup 10 --b_col_maj 0





















Avg NPU matmul time: 1709us.
Avg NPU gflops: 1570.72

Min NPU matmul time: 1364us.
Max NPU gflops: 1968

Max NPU matmul time: 2085us.
Min NPU gflops: 1287.46

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=float -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.3s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 32 -k 32 -n 32 --n-aie-cols 8 --b-col-maj 0 --dev npu2 -M 2560 -K 1024 -N 1024 --dtype_in bf16 --dtype_out f32 --emulate-bf16-mmul-with-bfp16 true --trace_size 0 > build/aie_2560x1024x1024_32x32x32_8c.mlir
mkdir -p build
cd build && xchesscc_wrapper aie2p -I /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools/include  -Dbf16_f32_ONLY -DDIM_M=32 -DDIM_K=32 -DDIM_N=32 -DAIE_API_EMULATE_BFLOAT16_MMUL_WITH_BFP16 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_32x32x32.o
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_2560x1024x1024_32x32x32_8c.xclbin \
			 \
			--aie-generate-npu-insts --npu-insts-name=insts_2560x1024x1024_32x32x32_8c.txt ../build/aie_2560x1024x1024_32x32x32_8c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_2560x1024x1024_32x32x32_8c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_2560x1024x1024_32x32x32_8c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_2560x1024x1024_32x32x32_8c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_2560x1024x1024_32x32x32_8c.xclbin -i build/insts_2560x1024x1024_32x32x32_8c.txt -k MLIR_AIE -M 2560 -K 1024 -N 1024 --iters 20 --warmup 10 --b_col_maj 0





















Avg NPU matmul time: 3123.8us.
Avg NPU gflops: 1718.65

Min NPU matmul time: 2929us.
Max NPU gflops: 1832.95

Max NPU matmul time: 4511us.
Min NPU gflops: 1190.14

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=float -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.2s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 32 -k 32 -n 32 --n-aie-cols 8 --b-col-maj 0 --dev npu2 -M 2560 -K 1024 -N 2560 --dtype_in bf16 --dtype_out f32 --emulate-bf16-mmul-with-bfp16 true --trace_size 0 > build/aie_2560x1024x2560_32x32x32_8c.mlir
mkdir -p build
cd build && xchesscc_wrapper aie2p -I /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools/include  -Dbf16_f32_ONLY -DDIM_M=32 -DDIM_K=32 -DDIM_N=32 -DAIE_API_EMULATE_BFLOAT16_MMUL_WITH_BFP16 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_32x32x32.o
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_2560x1024x2560_32x32x32_8c.xclbin \
			 \
			--aie-generate-npu-insts --npu-insts-name=insts_2560x1024x2560_32x32x32_8c.txt ../build/aie_2560x1024x2560_32x32x32_8c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_2560x1024x2560_32x32x32_8c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_2560x1024x2560_32x32x32_8c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_2560x1024x2560_32x32x32_8c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_2560x1024x2560_32x32x32_8c.xclbin -i build/insts_2560x1024x2560_32x32x32_8c.txt -k MLIR_AIE -M 2560 -K 1024 -N 2560 --iters 20 --warmup 10 --b_col_maj 0





















Avg NPU matmul time: 8429.6us.
Avg NPU gflops: 1592.22

Min NPU matmul time: 7619us.
Max NPU gflops: 1761.62

Max NPU matmul time: 11131us.
Min NPU gflops: 1205.8

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=float -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.3s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 32 -k 32 -n 32 --n-aie-cols 8 --b-col-maj 0 --dev npu2 -M 2560 -K 1024 -N 4096 --dtype_in bf16 --dtype_out f32 --emulate-bf16-mmul-with-bfp16 true --trace_size 0 > build/aie_2560x1024x4096_32x32x32_8c.mlir
mkdir -p build
cd build && xchesscc_wrapper aie2p -I /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools/include  -Dbf16_f32_ONLY -DDIM_M=32 -DDIM_K=32 -DDIM_N=32 -DAIE_API_EMULATE_BFLOAT16_MMUL_WITH_BFP16 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_32x32x32.o
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_2560x1024x4096_32x32x32_8c.xclbin \
			 \
			--aie-generate-npu-insts --npu-insts-name=insts_2560x1024x4096_32x32x32_8c.txt ../build/aie_2560x1024x4096_32x32x32_8c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_2560x1024x4096_32x32x32_8c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_2560x1024x4096_32x32x32_8c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_2560x1024x4096_32x32x32_8c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_2560x1024x4096_32x32x32_8c.xclbin -i build/insts_2560x1024x4096_32x32x32_8c.txt -k MLIR_AIE -M 2560 -K 1024 -N 4096 --iters 20 --warmup 10 --b_col_maj 0





















Avg NPU matmul time: 12851.3us.
Avg NPU gflops: 1671.02

Min NPU matmul time: 12143us.
Max NPU gflops: 1768.5

Max NPU matmul time: 16297us.
Min NPU gflops: 1317.72

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=float -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.3s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 32 -k 32 -n 32 --n-aie-cols 8 --b-col-maj 0 --dev npu2 -M 2560 -K 2560 -N 512 --dtype_in bf16 --dtype_out f32 --emulate-bf16-mmul-with-bfp16 true --trace_size 0 > build/aie_2560x2560x512_32x32x32_8c.mlir
mkdir -p build
cd build && xchesscc_wrapper aie2p -I /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools/include  -Dbf16_f32_ONLY -DDIM_M=32 -DDIM_K=32 -DDIM_N=32 -DAIE_API_EMULATE_BFLOAT16_MMUL_WITH_BFP16 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_32x32x32.o
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_2560x2560x512_32x32x32_8c.xclbin \
			 \
			--aie-generate-npu-insts --npu-insts-name=insts_2560x2560x512_32x32x32_8c.txt ../build/aie_2560x2560x512_32x32x32_8c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_2560x2560x512_32x32x32_8c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_2560x2560x512_32x32x32_8c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_2560x2560x512_32x32x32_8c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_2560x2560x512_32x32x32_8c.xclbin -i build/insts_2560x2560x512_32x32x32_8c.txt -k MLIR_AIE -M 2560 -K 2560 -N 512 --iters 20 --warmup 10 --b_col_maj 0





















Avg NPU matmul time: 4537.75us.
Avg NPU gflops: 1478.9

Min NPU matmul time: 3635us.
Max NPU gflops: 1846.19

Max NPU matmul time: 7329us.
Min NPU gflops: 915.662

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=float -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.3s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 32 -k 32 -n 32 --n-aie-cols 8 --b-col-maj 0 --dev npu2 -M 2560 -K 2560 -N 1024 --dtype_in bf16 --dtype_out f32 --emulate-bf16-mmul-with-bfp16 true --trace_size 0 > build/aie_2560x2560x1024_32x32x32_8c.mlir
mkdir -p build
cd build && xchesscc_wrapper aie2p -I /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools/include  -Dbf16_f32_ONLY -DDIM_M=32 -DDIM_K=32 -DDIM_N=32 -DAIE_API_EMULATE_BFLOAT16_MMUL_WITH_BFP16 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_32x32x32.o
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_2560x2560x1024_32x32x32_8c.xclbin \
			 \
			--aie-generate-npu-insts --npu-insts-name=insts_2560x2560x1024_32x32x32_8c.txt ../build/aie_2560x2560x1024_32x32x32_8c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_2560x2560x1024_32x32x32_8c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_2560x2560x1024_32x32x32_8c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_2560x2560x1024_32x32x32_8c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_2560x2560x1024_32x32x32_8c.xclbin -i build/insts_2560x2560x1024_32x32x32_8c.txt -k MLIR_AIE -M 2560 -K 2560 -N 1024 --iters 20 --warmup 10 --b_col_maj 0





















Avg NPU matmul time: 7844.55us.
Avg NPU gflops: 1710.97

Min NPU matmul time: 6923us.
Max NPU gflops: 1938.72

Max NPU matmul time: 11374us.
Min NPU gflops: 1180.04

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=float -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.3s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 32 -k 32 -n 32 --n-aie-cols 8 --b-col-maj 0 --dev npu2 -M 2560 -K 2560 -N 2560 --dtype_in bf16 --dtype_out f32 --emulate-bf16-mmul-with-bfp16 true --trace_size 0 > build/aie_2560x2560x2560_32x32x32_8c.mlir
mkdir -p build
cd build && xchesscc_wrapper aie2p -I /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools/include  -Dbf16_f32_ONLY -DDIM_M=32 -DDIM_K=32 -DDIM_N=32 -DAIE_API_EMULATE_BFLOAT16_MMUL_WITH_BFP16 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_32x32x32.o
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_2560x2560x2560_32x32x32_8c.xclbin \
			 \
			--aie-generate-npu-insts --npu-insts-name=insts_2560x2560x2560_32x32x32_8c.txt ../build/aie_2560x2560x2560_32x32x32_8c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_2560x2560x2560_32x32x32_8c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_2560x2560x2560_32x32x32_8c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_2560x2560x2560_32x32x32_8c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_2560x2560x2560_32x32x32_8c.xclbin -i build/insts_2560x2560x2560_32x32x32_8c.txt -k MLIR_AIE -M 2560 -K 2560 -N 2560 --iters 20 --warmup 10 --b_col_maj 0





















Avg NPU matmul time: 19368.4us.
Avg NPU gflops: 1732.43

Min NPU matmul time: 18091us.
Max NPU gflops: 1854.76

Max NPU matmul time: 23277us.
Min NPU gflops: 1441.53

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=float -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.3s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 32 -k 32 -n 32 --n-aie-cols 8 --b-col-maj 0 --dev npu2 -M 2560 -K 2560 -N 4096 --dtype_in bf16 --dtype_out f32 --emulate-bf16-mmul-with-bfp16 true --trace_size 0 > build/aie_2560x2560x4096_32x32x32_8c.mlir
mkdir -p build
cd build && xchesscc_wrapper aie2p -I /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools/include  -Dbf16_f32_ONLY -DDIM_M=32 -DDIM_K=32 -DDIM_N=32 -DAIE_API_EMULATE_BFLOAT16_MMUL_WITH_BFP16 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_32x32x32.o
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_2560x2560x4096_32x32x32_8c.xclbin \
			 \
			--aie-generate-npu-insts --npu-insts-name=insts_2560x2560x4096_32x32x32_8c.txt ../build/aie_2560x2560x4096_32x32x32_8c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_2560x2560x4096_32x32x32_8c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_2560x2560x4096_32x32x32_8c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_2560x2560x4096_32x32x32_8c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_2560x2560x4096_32x32x32_8c.xclbin -i build/insts_2560x2560x4096_32x32x32_8c.txt -k MLIR_AIE -M 2560 -K 2560 -N 4096 --iters 20 --warmup 10 --b_col_maj 0





















Avg NPU matmul time: 31420.2us.
Avg NPU gflops: 1708.68

Min NPU matmul time: 29894us.
Max NPU gflops: 1795.92

Max NPU matmul time: 35449us.
Min NPU gflops: 1514.49

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=float -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.3s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 32 -k 32 -n 32 --n-aie-cols 8 --b-col-maj 0 --dev npu2 -M 2560 -K 4096 -N 512 --dtype_in bf16 --dtype_out f32 --emulate-bf16-mmul-with-bfp16 true --trace_size 0 > build/aie_2560x4096x512_32x32x32_8c.mlir
mkdir -p build
cd build && xchesscc_wrapper aie2p -I /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools/include  -Dbf16_f32_ONLY -DDIM_M=32 -DDIM_K=32 -DDIM_N=32 -DAIE_API_EMULATE_BFLOAT16_MMUL_WITH_BFP16 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_32x32x32.o
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_2560x4096x512_32x32x32_8c.xclbin \
			 \
			--aie-generate-npu-insts --npu-insts-name=insts_2560x4096x512_32x32x32_8c.txt ../build/aie_2560x4096x512_32x32x32_8c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_2560x4096x512_32x32x32_8c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_2560x4096x512_32x32x32_8c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_2560x4096x512_32x32x32_8c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_2560x4096x512_32x32x32_8c.xclbin -i build/insts_2560x4096x512_32x32x32_8c.txt -k MLIR_AIE -M 2560 -K 4096 -N 512 --iters 20 --warmup 10 --b_col_maj 0





















Avg NPU matmul time: 6253.6us.
Avg NPU gflops: 1717

Min NPU matmul time: 5426us.
Max NPU gflops: 1978.88

Max NPU matmul time: 9349us.
Min NPU gflops: 1148.51

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=float -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.3s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 32 -k 32 -n 32 --n-aie-cols 8 --b-col-maj 0 --dev npu2 -M 2560 -K 4096 -N 1024 --dtype_in bf16 --dtype_out f32 --emulate-bf16-mmul-with-bfp16 true --trace_size 0 > build/aie_2560x4096x1024_32x32x32_8c.mlir
mkdir -p build
cd build && xchesscc_wrapper aie2p -I /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools/include  -Dbf16_f32_ONLY -DDIM_M=32 -DDIM_K=32 -DDIM_N=32 -DAIE_API_EMULATE_BFLOAT16_MMUL_WITH_BFP16 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_32x32x32.o
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_2560x4096x1024_32x32x32_8c.xclbin \
			 \
			--aie-generate-npu-insts --npu-insts-name=insts_2560x4096x1024_32x32x32_8c.txt ../build/aie_2560x4096x1024_32x32x32_8c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_2560x4096x1024_32x32x32_8c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_2560x4096x1024_32x32x32_8c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_2560x4096x1024_32x32x32_8c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_2560x4096x1024_32x32x32_8c.xclbin -i build/insts_2560x4096x1024_32x32x32_8c.txt -k MLIR_AIE -M 2560 -K 4096 -N 1024 --iters 20 --warmup 10 --b_col_maj 0





















Avg NPU matmul time: 11602.8us.
Avg NPU gflops: 1850.84

Min NPU matmul time: 10712us.
Max NPU gflops: 2004.75

Max NPU matmul time: 14641us.
Min NPU gflops: 1466.76

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=float -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.3s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 32 -k 32 -n 32 --n-aie-cols 8 --b-col-maj 0 --dev npu2 -M 2560 -K 4096 -N 2560 --dtype_in bf16 --dtype_out f32 --emulate-bf16-mmul-with-bfp16 true --trace_size 0 > build/aie_2560x4096x2560_32x32x32_8c.mlir
mkdir -p build
cd build && xchesscc_wrapper aie2p -I /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools/include  -Dbf16_f32_ONLY -DDIM_M=32 -DDIM_K=32 -DDIM_N=32 -DAIE_API_EMULATE_BFLOAT16_MMUL_WITH_BFP16 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_32x32x32.o
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_2560x4096x2560_32x32x32_8c.xclbin \
			 \
			--aie-generate-npu-insts --npu-insts-name=insts_2560x4096x2560_32x32x32_8c.txt ../build/aie_2560x4096x2560_32x32x32_8c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_2560x4096x2560_32x32x32_8c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_2560x4096x2560_32x32x32_8c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_2560x4096x2560_32x32x32_8c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_2560x4096x2560_32x32x32_8c.xclbin -i build/insts_2560x4096x2560_32x32x32_8c.txt -k MLIR_AIE -M 2560 -K 4096 -N 2560 --iters 20 --warmup 10 --b_col_maj 0





















Avg NPU matmul time: 29992.5us.
Avg NPU gflops: 1790.02

Min NPU matmul time: 28376us.
Max NPU gflops: 1891.99

Max NPU matmul time: 33056us.
Min NPU gflops: 1624.13

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=float -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.3s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 32 -k 32 -n 32 --n-aie-cols 8 --b-col-maj 0 --dev npu2 -M 2560 -K 4096 -N 4096 --dtype_in bf16 --dtype_out f32 --emulate-bf16-mmul-with-bfp16 true --trace_size 0 > build/aie_2560x4096x4096_32x32x32_8c.mlir
mkdir -p build
cd build && xchesscc_wrapper aie2p -I /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools/include  -Dbf16_f32_ONLY -DDIM_M=32 -DDIM_K=32 -DDIM_N=32 -DAIE_API_EMULATE_BFLOAT16_MMUL_WITH_BFP16 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_32x32x32.o
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_2560x4096x4096_32x32x32_8c.xclbin \
			 \
			--aie-generate-npu-insts --npu-insts-name=insts_2560x4096x4096_32x32x32_8c.txt ../build/aie_2560x4096x4096_32x32x32_8c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_2560x4096x4096_32x32x32_8c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_2560x4096x4096_32x32x32_8c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_2560x4096x4096_32x32x32_8c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_2560x4096x4096_32x32x32_8c.xclbin -i build/insts_2560x4096x4096_32x32x32_8c.txt -k MLIR_AIE -M 2560 -K 4096 -N 4096 --iters 20 --warmup 10 --b_col_maj 0





















Avg NPU matmul time: 51222.4us.
Avg NPU gflops: 1676.99

Min NPU matmul time: 47059us.
Max NPU gflops: 1825.35

Max NPU matmul time: 52579us.
Min NPU gflops: 1633.72

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=float -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.3s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 32 -k 32 -n 32 --n-aie-cols 8 --b-col-maj 0 --dev npu2 -M 4096 -K 512 -N 512 --dtype_in bf16 --dtype_out f32 --emulate-bf16-mmul-with-bfp16 true --trace_size 0 > build/aie_4096x512x512_32x32x32_8c.mlir
mkdir -p build
cd build && xchesscc_wrapper aie2p -I /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools/include  -Dbf16_f32_ONLY -DDIM_M=32 -DDIM_K=32 -DDIM_N=32 -DAIE_API_EMULATE_BFLOAT16_MMUL_WITH_BFP16 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_32x32x32.o
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_4096x512x512_32x32x32_8c.xclbin \
			 \
			--aie-generate-npu-insts --npu-insts-name=insts_4096x512x512_32x32x32_8c.txt ../build/aie_4096x512x512_32x32x32_8c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_4096x512x512_32x32x32_8c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_4096x512x512_32x32x32_8c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_4096x512x512_32x32x32_8c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_4096x512x512_32x32x32_8c.xclbin -i build/insts_4096x512x512_32x32x32_8c.txt -k MLIR_AIE -M 4096 -K 512 -N 512 --iters 20 --warmup 10 --b_col_maj 0

Avg NPU matmul time: 5102.3us.
Avg NPU gflops: 420.885

Min NPU matmul time: 1461us.
Max NPU gflops: 1469.87

Max NPU matmul time: 6128us.
Min NPU gflops: 350.438

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=float -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.3s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 32 -k 32 -n 32 --n-aie-cols 8 --b-col-maj 0 --dev npu2 -M 4096 -K 512 -N 1024 --dtype_in bf16 --dtype_out f32 --emulate-bf16-mmul-with-bfp16 true --trace_size 0 > build/aie_4096x512x1024_32x32x32_8c.mlir
mkdir -p build
cd build && xchesscc_wrapper aie2p -I /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools/include  -Dbf16_f32_ONLY -DDIM_M=32 -DDIM_K=32 -DDIM_N=32 -DAIE_API_EMULATE_BFLOAT16_MMUL_WITH_BFP16 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_32x32x32.o
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_4096x512x1024_32x32x32_8c.xclbin \
			 \
			--aie-generate-npu-insts --npu-insts-name=insts_4096x512x1024_32x32x32_8c.txt ../build/aie_4096x512x1024_32x32x32_8c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_4096x512x1024_32x32x32_8c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_4096x512x1024_32x32x32_8c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_4096x512x1024_32x32x32_8c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_4096x512x1024_32x32x32_8c.xclbin -i build/insts_4096x512x1024_32x32x32_8c.txt -k MLIR_AIE -M 4096 -K 512 -N 1024 --iters 20 --warmup 10 --b_col_maj 0





















Avg NPU matmul time: 3067.7us.
Avg NPU gflops: 1400.06

Min NPU matmul time: 2210us.
Max NPU gflops: 1943.42

Max NPU matmul time: 3455us.
Min NPU gflops: 1243.12

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=float -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.3s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 32 -k 32 -n 32 --n-aie-cols 8 --b-col-maj 0 --dev npu2 -M 4096 -K 512 -N 2560 --dtype_in bf16 --dtype_out f32 --emulate-bf16-mmul-with-bfp16 true --trace_size 0 > build/aie_4096x512x2560_32x32x32_8c.mlir
mkdir -p build
cd build && xchesscc_wrapper aie2p -I /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools/include  -Dbf16_f32_ONLY -DDIM_M=32 -DDIM_K=32 -DDIM_N=32 -DAIE_API_EMULATE_BFLOAT16_MMUL_WITH_BFP16 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_32x32x32.o
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_4096x512x2560_32x32x32_8c.xclbin \
			 \
			--aie-generate-npu-insts --npu-insts-name=insts_4096x512x2560_32x32x32_8c.txt ../build/aie_4096x512x2560_32x32x32_8c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_4096x512x2560_32x32x32_8c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_4096x512x2560_32x32x32_8c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_4096x512x2560_32x32x32_8c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_4096x512x2560_32x32x32_8c.xclbin -i build/insts_4096x512x2560_32x32x32_8c.txt -k MLIR_AIE -M 4096 -K 512 -N 2560 --iters 20 --warmup 10 --b_col_maj 0





















Avg NPU matmul time: 6360.15us.
Avg NPU gflops: 1688.23

Min NPU matmul time: 5748us.
Max NPU gflops: 1868.03

Max NPU matmul time: 6705us.
Min NPU gflops: 1601.4

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=float -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.3s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 32 -k 32 -n 32 --n-aie-cols 8 --b-col-maj 0 --dev npu2 -M 4096 -K 512 -N 4096 --dtype_in bf16 --dtype_out f32 --emulate-bf16-mmul-with-bfp16 true --trace_size 0 > build/aie_4096x512x4096_32x32x32_8c.mlir
mkdir -p build
cd build && xchesscc_wrapper aie2p -I /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools/include  -Dbf16_f32_ONLY -DDIM_M=32 -DDIM_K=32 -DDIM_N=32 -DAIE_API_EMULATE_BFLOAT16_MMUL_WITH_BFP16 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_32x32x32.o
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_4096x512x4096_32x32x32_8c.xclbin \
			 \
			--aie-generate-npu-insts --npu-insts-name=insts_4096x512x4096_32x32x32_8c.txt ../build/aie_4096x512x4096_32x32x32_8c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_4096x512x4096_32x32x32_8c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_4096x512x4096_32x32x32_8c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_4096x512x4096_32x32x32_8c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_4096x512x4096_32x32x32_8c.xclbin -i build/insts_4096x512x4096_32x32x32_8c.txt -k MLIR_AIE -M 4096 -K 512 -N 4096 --iters 20 --warmup 10 --b_col_maj 0





















Avg NPU matmul time: 10706.8us.
Avg NPU gflops: 1604.58

Min NPU matmul time: 9783us.
Max NPU gflops: 1756.09

Max NPU matmul time: 13739us.
Min NPU gflops: 1250.45

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=float -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.3s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 32 -k 32 -n 32 --n-aie-cols 8 --b-col-maj 0 --dev npu2 -M 4096 -K 1024 -N 512 --dtype_in bf16 --dtype_out f32 --emulate-bf16-mmul-with-bfp16 true --trace_size 0 > build/aie_4096x1024x512_32x32x32_8c.mlir
mkdir -p build
cd build && xchesscc_wrapper aie2p -I /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools/include  -Dbf16_f32_ONLY -DDIM_M=32 -DDIM_K=32 -DDIM_N=32 -DAIE_API_EMULATE_BFLOAT16_MMUL_WITH_BFP16 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_32x32x32.o
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_4096x1024x512_32x32x32_8c.xclbin \
			 \
			--aie-generate-npu-insts --npu-insts-name=insts_4096x1024x512_32x32x32_8c.txt ../build/aie_4096x1024x512_32x32x32_8c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_4096x1024x512_32x32x32_8c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_4096x1024x512_32x32x32_8c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_4096x1024x512_32x32x32_8c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_4096x1024x512_32x32x32_8c.xclbin -i build/insts_4096x1024x512_32x32x32_8c.txt -k MLIR_AIE -M 4096 -K 1024 -N 512 --iters 20 --warmup 10 --b_col_maj 0





















Avg NPU matmul time: 2751.1us.
Avg NPU gflops: 1561.18

Min NPU matmul time: 2085us.
Max NPU gflops: 2059.94

Max NPU matmul time: 3258us.
Min NPU gflops: 1318.28

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=float -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.3s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 32 -k 32 -n 32 --n-aie-cols 8 --b-col-maj 0 --dev npu2 -M 4096 -K 1024 -N 1024 --dtype_in bf16 --dtype_out f32 --emulate-bf16-mmul-with-bfp16 true --trace_size 0 > build/aie_4096x1024x1024_32x32x32_8c.mlir
mkdir -p build
cd build && xchesscc_wrapper aie2p -I /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools/include  -Dbf16_f32_ONLY -DDIM_M=32 -DDIM_K=32 -DDIM_N=32 -DAIE_API_EMULATE_BFLOAT16_MMUL_WITH_BFP16 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_32x32x32.o
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_4096x1024x1024_32x32x32_8c.xclbin \
			 \
			--aie-generate-npu-insts --npu-insts-name=insts_4096x1024x1024_32x32x32_8c.txt ../build/aie_4096x1024x1024_32x32x32_8c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_4096x1024x1024_32x32x32_8c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_4096x1024x1024_32x32x32_8c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_4096x1024x1024_32x32x32_8c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_4096x1024x1024_32x32x32_8c.xclbin -i build/insts_4096x1024x1024_32x32x32_8c.txt -k MLIR_AIE -M 4096 -K 1024 -N 1024 --iters 20 --warmup 10 --b_col_maj 0





















Avg NPU matmul time: 4616.05us.
Avg NPU gflops: 1860.88

Min NPU matmul time: 4202us.
Max NPU gflops: 2044.25

Max NPU matmul time: 5120us.
Min NPU gflops: 1677.72

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=float -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.3s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 32 -k 32 -n 32 --n-aie-cols 8 --b-col-maj 0 --dev npu2 -M 4096 -K 1024 -N 2560 --dtype_in bf16 --dtype_out f32 --emulate-bf16-mmul-with-bfp16 true --trace_size 0 > build/aie_4096x1024x2560_32x32x32_8c.mlir
mkdir -p build
cd build && xchesscc_wrapper aie2p -I /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools/include  -Dbf16_f32_ONLY -DDIM_M=32 -DDIM_K=32 -DDIM_N=32 -DAIE_API_EMULATE_BFLOAT16_MMUL_WITH_BFP16 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_32x32x32.o
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_4096x1024x2560_32x32x32_8c.xclbin \
			 \
			--aie-generate-npu-insts --npu-insts-name=insts_4096x1024x2560_32x32x32_8c.txt ../build/aie_4096x1024x2560_32x32x32_8c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_4096x1024x2560_32x32x32_8c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_4096x1024x2560_32x32x32_8c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_4096x1024x2560_32x32x32_8c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_4096x1024x2560_32x32x32_8c.xclbin -i build/insts_4096x1024x2560_32x32x32_8c.txt -k MLIR_AIE -M 4096 -K 1024 -N 2560 --iters 20 --warmup 10 --b_col_maj 0





















Avg NPU matmul time: 11958.3us.
Avg NPU gflops: 1795.81

Min NPU matmul time: 11755us.
Max NPU gflops: 1826.87

Max NPU matmul time: 12222us.
Min NPU gflops: 1757.06

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=float -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.3s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 32 -k 32 -n 32 --n-aie-cols 8 --b-col-maj 0 --dev npu2 -M 4096 -K 1024 -N 4096 --dtype_in bf16 --dtype_out f32 --emulate-bf16-mmul-with-bfp16 true --trace_size 0 > build/aie_4096x1024x4096_32x32x32_8c.mlir
mkdir -p build
cd build && xchesscc_wrapper aie2p -I /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools/include  -Dbf16_f32_ONLY -DDIM_M=32 -DDIM_K=32 -DDIM_N=32 -DAIE_API_EMULATE_BFLOAT16_MMUL_WITH_BFP16 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_32x32x32.o
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_4096x1024x4096_32x32x32_8c.xclbin \
			 \
			--aie-generate-npu-insts --npu-insts-name=insts_4096x1024x4096_32x32x32_8c.txt ../build/aie_4096x1024x4096_32x32x32_8c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_4096x1024x4096_32x32x32_8c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_4096x1024x4096_32x32x32_8c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_4096x1024x4096_32x32x32_8c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_4096x1024x4096_32x32x32_8c.xclbin -i build/insts_4096x1024x4096_32x32x32_8c.txt -k MLIR_AIE -M 4096 -K 1024 -N 4096 --iters 20 --warmup 10 --b_col_maj 0





















Avg NPU matmul time: 21300.9us.
Avg NPU gflops: 1613.06

Min NPU matmul time: 19194us.
Max NPU gflops: 1790.13

Max NPU matmul time: 23907us.
Min NPU gflops: 1437.22

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=float -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.3s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 32 -k 32 -n 32 --n-aie-cols 8 --b-col-maj 0 --dev npu2 -M 4096 -K 2560 -N 512 --dtype_in bf16 --dtype_out f32 --emulate-bf16-mmul-with-bfp16 true --trace_size 0 > build/aie_4096x2560x512_32x32x32_8c.mlir
mkdir -p build
cd build && xchesscc_wrapper aie2p -I /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools/include  -Dbf16_f32_ONLY -DDIM_M=32 -DDIM_K=32 -DDIM_N=32 -DAIE_API_EMULATE_BFLOAT16_MMUL_WITH_BFP16 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_32x32x32.o
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_4096x2560x512_32x32x32_8c.xclbin \
			 \
			--aie-generate-npu-insts --npu-insts-name=insts_4096x2560x512_32x32x32_8c.txt ../build/aie_4096x2560x512_32x32x32_8c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_4096x2560x512_32x32x32_8c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_4096x2560x512_32x32x32_8c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_4096x2560x512_32x32x32_8c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_4096x2560x512_32x32x32_8c.xclbin -i build/insts_4096x2560x512_32x32x32_8c.txt -k MLIR_AIE -M 4096 -K 2560 -N 512 --iters 20 --warmup 10 --b_col_maj 0





















Avg NPU matmul time: 6175us.
Avg NPU gflops: 1738.85

Min NPU matmul time: 5476us.
Max NPU gflops: 1960.81

Max NPU matmul time: 9348us.
Min NPU gflops: 1148.63

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=float -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.3s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 32 -k 32 -n 32 --n-aie-cols 8 --b-col-maj 0 --dev npu2 -M 4096 -K 2560 -N 1024 --dtype_in bf16 --dtype_out f32 --emulate-bf16-mmul-with-bfp16 true --trace_size 0 > build/aie_4096x2560x1024_32x32x32_8c.mlir
mkdir -p build
cd build && xchesscc_wrapper aie2p -I /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools/include  -Dbf16_f32_ONLY -DDIM_M=32 -DDIM_K=32 -DDIM_N=32 -DAIE_API_EMULATE_BFLOAT16_MMUL_WITH_BFP16 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_32x32x32.o
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_4096x2560x1024_32x32x32_8c.xclbin \
			 \
			--aie-generate-npu-insts --npu-insts-name=insts_4096x2560x1024_32x32x32_8c.txt ../build/aie_4096x2560x1024_32x32x32_8c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_4096x2560x1024_32x32x32_8c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_4096x2560x1024_32x32x32_8c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_4096x2560x1024_32x32x32_8c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_4096x2560x1024_32x32x32_8c.xclbin -i build/insts_4096x2560x1024_32x32x32_8c.txt -k MLIR_AIE -M 4096 -K 2560 -N 1024 --iters 20 --warmup 10 --b_col_maj 0





















Avg NPU matmul time: 12194.8us.
Avg NPU gflops: 1760.99

Min NPU matmul time: 11183us.
Max NPU gflops: 1920.31

Max NPU matmul time: 15127us.
Min NPU gflops: 1419.64

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=float -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.3s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 32 -k 32 -n 32 --n-aie-cols 8 --b-col-maj 0 --dev npu2 -M 4096 -K 2560 -N 2560 --dtype_in bf16 --dtype_out f32 --emulate-bf16-mmul-with-bfp16 true --trace_size 0 > build/aie_4096x2560x2560_32x32x32_8c.mlir
mkdir -p build
cd build && xchesscc_wrapper aie2p -I /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools/include  -Dbf16_f32_ONLY -DDIM_M=32 -DDIM_K=32 -DDIM_N=32 -DAIE_API_EMULATE_BFLOAT16_MMUL_WITH_BFP16 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_32x32x32.o
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_4096x2560x2560_32x32x32_8c.xclbin \
			 \
			--aie-generate-npu-insts --npu-insts-name=insts_4096x2560x2560_32x32x32_8c.txt ../build/aie_4096x2560x2560_32x32x32_8c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_4096x2560x2560_32x32x32_8c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_4096x2560x2560_32x32x32_8c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_4096x2560x2560_32x32x32_8c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_4096x2560x2560_32x32x32_8c.xclbin -i build/insts_4096x2560x2560_32x32x32_8c.txt -k MLIR_AIE -M 4096 -K 2560 -N 2560 --iters 20 --warmup 10 --b_col_maj 0





















Avg NPU matmul time: 30345.3us.
Avg NPU gflops: 1769.2

Min NPU matmul time: 29194us.
Max NPU gflops: 1838.98

Max NPU matmul time: 33113us.
Min NPU gflops: 1621.33

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=float -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.3s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 32 -k 32 -n 32 --n-aie-cols 8 --b-col-maj 0 --dev npu2 -M 4096 -K 2560 -N 4096 --dtype_in bf16 --dtype_out f32 --emulate-bf16-mmul-with-bfp16 true --trace_size 0 > build/aie_4096x2560x4096_32x32x32_8c.mlir
mkdir -p build
cd build && xchesscc_wrapper aie2p -I /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools/include  -Dbf16_f32_ONLY -DDIM_M=32 -DDIM_K=32 -DDIM_N=32 -DAIE_API_EMULATE_BFLOAT16_MMUL_WITH_BFP16 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_32x32x32.o
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_4096x2560x4096_32x32x32_8c.xclbin \
			 \
			--aie-generate-npu-insts --npu-insts-name=insts_4096x2560x4096_32x32x32_8c.txt ../build/aie_4096x2560x4096_32x32x32_8c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_4096x2560x4096_32x32x32_8c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_4096x2560x4096_32x32x32_8c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_4096x2560x4096_32x32x32_8c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_4096x2560x4096_32x32x32_8c.xclbin -i build/insts_4096x2560x4096_32x32x32_8c.txt -k MLIR_AIE -M 4096 -K 2560 -N 4096 --iters 20 --warmup 10 --b_col_maj 0





















Avg NPU matmul time: 52052us.
Avg NPU gflops: 1650.26

Min NPU matmul time: 47545us.
Max NPU gflops: 1806.7

Max NPU matmul time: 53205us.
Min NPU gflops: 1614.5

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=float -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.3s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 32 -k 32 -n 32 --n-aie-cols 8 --b-col-maj 0 --dev npu2 -M 4096 -K 4096 -N 512 --dtype_in bf16 --dtype_out f32 --emulate-bf16-mmul-with-bfp16 true --trace_size 0 > build/aie_4096x4096x512_32x32x32_8c.mlir
mkdir -p build
cd build && xchesscc_wrapper aie2p -I /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools/include  -Dbf16_f32_ONLY -DDIM_M=32 -DDIM_K=32 -DDIM_N=32 -DAIE_API_EMULATE_BFLOAT16_MMUL_WITH_BFP16 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_32x32x32.o
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_4096x4096x512_32x32x32_8c.xclbin \
			 \
			--aie-generate-npu-insts --npu-insts-name=insts_4096x4096x512_32x32x32_8c.txt ../build/aie_4096x4096x512_32x32x32_8c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_4096x4096x512_32x32x32_8c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_4096x4096x512_32x32x32_8c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_4096x4096x512_32x32x32_8c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_4096x4096x512_32x32x32_8c.xclbin -i build/insts_4096x4096x512_32x32x32_8c.txt -k MLIR_AIE -M 4096 -K 4096 -N 512 --iters 20 --warmup 10 --b_col_maj 0





















Avg NPU matmul time: 12213.7us.
Avg NPU gflops: 1406.61

Min NPU matmul time: 9116us.
Max NPU gflops: 1884.58

Max NPU matmul time: 13701us.
Min NPU gflops: 1253.91

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=float -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.3s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 32 -k 32 -n 32 --n-aie-cols 8 --b-col-maj 0 --dev npu2 -M 4096 -K 4096 -N 1024 --dtype_in bf16 --dtype_out f32 --emulate-bf16-mmul-with-bfp16 true --trace_size 0 > build/aie_4096x4096x1024_32x32x32_8c.mlir
mkdir -p build
cd build && xchesscc_wrapper aie2p -I /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools/include  -Dbf16_f32_ONLY -DDIM_M=32 -DDIM_K=32 -DDIM_N=32 -DAIE_API_EMULATE_BFLOAT16_MMUL_WITH_BFP16 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_32x32x32.o
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_4096x4096x1024_32x32x32_8c.xclbin \
			 \
			--aie-generate-npu-insts --npu-insts-name=insts_4096x4096x1024_32x32x32_8c.txt ../build/aie_4096x4096x1024_32x32x32_8c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_4096x4096x1024_32x32x32_8c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_4096x4096x1024_32x32x32_8c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_4096x4096x1024_32x32x32_8c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_4096x4096x1024_32x32x32_8c.xclbin -i build/insts_4096x4096x1024_32x32x32_8c.txt -k MLIR_AIE -M 4096 -K 4096 -N 1024 --iters 20 --warmup 10 --b_col_maj 0





















Avg NPU matmul time: 21668.9us.
Avg NPU gflops: 1585.67

Min NPU matmul time: 17825us.
Max NPU gflops: 1927.62

Max NPU matmul time: 23104us.
Min NPU gflops: 1487.18

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=float -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.3s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 32 -k 32 -n 32 --n-aie-cols 8 --b-col-maj 0 --dev npu2 -M 4096 -K 4096 -N 2560 --dtype_in bf16 --dtype_out f32 --emulate-bf16-mmul-with-bfp16 true --trace_size 0 > build/aie_4096x4096x2560_32x32x32_8c.mlir
mkdir -p build
cd build && xchesscc_wrapper aie2p -I /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools/include  -Dbf16_f32_ONLY -DDIM_M=32 -DDIM_K=32 -DDIM_N=32 -DAIE_API_EMULATE_BFLOAT16_MMUL_WITH_BFP16 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_32x32x32.o
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_4096x4096x2560_32x32x32_8c.xclbin \
			 \
			--aie-generate-npu-insts --npu-insts-name=insts_4096x4096x2560_32x32x32_8c.txt ../build/aie_4096x4096x2560_32x32x32_8c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_4096x4096x2560_32x32x32_8c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_4096x4096x2560_32x32x32_8c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_4096x4096x2560_32x32x32_8c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_4096x4096x2560_32x32x32_8c.xclbin -i build/insts_4096x4096x2560_32x32x32_8c.txt -k MLIR_AIE -M 4096 -K 4096 -N 2560 --iters 20 --warmup 10 --b_col_maj 0





















Avg NPU matmul time: 49684.6us.
Avg NPU gflops: 1728.89

Min NPU matmul time: 45845us.
Max NPU gflops: 1873.69

Max NPU matmul time: 51747us.
Min NPU gflops: 1659.99

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=float -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.3s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 32 -k 32 -n 32 --n-aie-cols 8 --b-col-maj 0 --dev npu2 -M 4096 -K 4096 -N 4096 --dtype_in bf16 --dtype_out f32 --emulate-bf16-mmul-with-bfp16 true --trace_size 0 > build/aie_4096x4096x4096_32x32x32_8c.mlir
mkdir -p build
cd build && xchesscc_wrapper aie2p -I /proj/xbuilds/2024.2_INT_1113_1001/installs/all_platforms/Vitis/2024.2/aietools/include  -Dbf16_f32_ONLY -DDIM_M=32 -DDIM_K=32 -DDIM_N=32 -DAIE_API_EMULATE_BFLOAT16_MMUL_WITH_BFP16 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_32x32x32.o
WARNING: Default location for XILINX_VIVADO_IP_OVERRIDE not found: /build/xfndry/IP_2024.2_INTEGRATION_VERIFIED/customer/vivado/data/ip
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_4096x4096x4096_32x32x32_8c.xclbin \
			 \
			--aie-generate-npu-insts --npu-insts-name=insts_4096x4096x4096_32x32x32_8c.txt ../build/aie_4096x4096x4096_32x32x32_8c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_4096x4096x4096_32x32x32_8c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_4096x4096x4096_32x32x32_8c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_4096x4096x4096_32x32x32_8c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_4096x4096x4096_32x32x32_8c.xclbin -i build/insts_4096x4096x4096_32x32x32_8c.txt -k MLIR_AIE -M 4096 -K 4096 -N 4096 --iters 20 --warmup 10 --b_col_maj 0





















Avg NPU matmul time: 79190.4us.
Avg NPU gflops: 1735.55

Min NPU matmul time: 78302us.
Max NPU gflops: 1755.24

Max NPU matmul time: 82453us.
Min NPU gflops: 1666.88

PASS!

