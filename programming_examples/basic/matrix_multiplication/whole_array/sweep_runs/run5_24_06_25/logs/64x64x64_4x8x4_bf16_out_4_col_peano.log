XILINX_LOC=/proj/xbuilds/2024.2_INT_daily_latest/installs/lin64/Vitis/2024.2
SHELL=/bin/csh
MYXILINX_VER=2024.2
HISTCONTROL=ignoreboth:erasedups
TERM_PROGRAM_VERSION=3.4
GROUP=newhiredefaultgrp
MACHTYPE=x86_64
TMUX=/tmp/tmux-50093633/default,2597,0
AIETOOLS_ROOT=/proj/xbuilds/2024.2_INT_daily_latest/installs/lin64/Vitis/2024.2/aietools
XILINX_XRT=/opt/xilinx/xrt
n_aie_cols=4
PWD=/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array
LOGNAME=lromeror
NPU2=1
XDG_SESSION_TYPE=tty
MLIR_AIE_INSTALL_DIR=/scratch/luisr/mlir-aie/install
N=4096
M=4096
K=4096
n=64
m=64
k=64
HOME=/home/lromeror
LANG=en_US.UTF-8
PEANO_INSTALL_DIR=/scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie
VIRTUAL_ENV=/scratch/luisr/mlir-aie/ironenv
OSTYPE=linux
SSH_CONNECTION=172.21.39.59 55861 172.20.10.58 22
XDG_SESSION_CLASS=user
PYTHONPATH=/scratch/luisr/mlir-aie/install/python:/opt/xilinx/xrt/python
TERM=tmux-256color
HOST=xcoradaie213
USER=lromeror
use_chess=0
TMUX_PANE=%0
emulate_bfloat16_mmul_with_bfp16=0
SHLVL=3
XDG_SESSION_ID=2
VIRTUAL_ENV_PROMPT=(ironenv) 
LM_LICENSE_FILE=2100@aiengine
LD_LIBRARY_PATH=/scratch/luisr/mlir-aie/install/lib:/opt/xilinx/xrt/lib
XDG_RUNTIME_DIR=/run/user/50093633
MYXILINX_BASE=/proj/xbuilds/2024.2_INT_daily_latest
dtype_out=bf16
SSH_CLIENT=172.21.39.59 55861 22
NLSPATH=/usr/share/locale/%L/LC_MESSAGES/%N.cat:/usr/share/locale/%l/LC_MESSAGES/%N.cat
VENDOR=unknown
PATH=/scratch/luisr/mlir-aie/install/bin:/scratch/luisr/mlir-aie/ironenv/bin:/opt/xilinx/xrt/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin:/proj/xbuilds/2024.2_INT_daily_latest/installs/lin64/Vitis/2024.2/aietools/bin:/proj/xbuilds/2024.2_INT_daily_latest/installs/lin64/Vitis/2024.2/bin
dtype_in=bf16
DBUS_SESSION_BUS_ADDRESS=unix:path=/run/user/50093633/bus
SSH_TTY=/dev/pts/0
HOSTTYPE=x86_64-linux
REMOTEHOST=172.21.39.59
OLDPWD=/scratch/luisr/mlir-aie
runargs=--iters 20 --warmup 10
TERM_PROGRAM=tmux
_=/usr/bin/env
##===- Makefile -----------------------------------------------------------===##
# 
# This file licensed under the Apache License v2.0 with LLVM Exceptions.
# See https://llvm.org/LICENSE.txt for license information.
# SPDX-License-Identifier: Apache-2.0 WITH LLVM-exception
#
# Copyright (C) 2025, Advanced Micro Devices, Inc.
# 
##===----------------------------------------------------------------------===##
srcdir := $(shell dirname $(realpath $(firstword $(MAKEFILE_LIST))))
subdir=whole_array
targetname=whole_array


# M, K, N: final GEMM dimensions
M?=512
K?=512
N?=512

# m, k, n: single AIE core GEMM dimensions
m?=32
k?=32
n?=32

n_aie_cols?=4
b_col_maj?=0

kernels=mm_${m}x${k}x${n}
aieargs+=-m $m -k $k -n $n --n-aie-cols ${n_aie_cols} --b-col-maj ${b_col_maj}
runargs+=--b_col_maj ${b_col_maj}
target_suffix=${M}x${K}x${N}_${m}x${k}x${n}_${n_aie_cols}c
use_placed?=0
use_iron?=0

# set this flag to 1 for linear buffer allocation
# else, 0 for bank-aware
use_linear_buf_alloc?=1

ifeq (${use_linear_buf_alloc}, 1)
buffer_aloc_flag=basic-sequential
else
buffer_aloc_flag=bank-aware
endif

ifeq (${use_placed}, 1)
aie_py_src=${targetname}_placed.py
ifeq (${use_iron}, 1)
$(error Cannot specify both placed design and IRON)
endif
endif

ifeq (${use_iron}, 1)
aie_py_src=${targetname}_iron.py
endif

KERNEL_DEFINES=-D${dtype_in}_${dtype_out}_ONLY -DDIM_M=${m} -DDIM_K=${k} -DDIM_N=${n}
ifeq (${b_col_maj}, 1)
	KERNEL_DEFINES+=-DB_COL_MAJ
endif

include ${srcdir}/../makefile-common

build/mm_${m}x${k}x${n}.o: ${kernels_dir}/mm.cc
	mkdir -p ${@D}
	cd ${@D} && ${KERNEL_CC} ${KERNEL_CFLAGS} ${KERNEL_DEFINES} -c $< -o ${@F}
rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=std::bfloat16_t -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.3s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 64 -k 64 -n 64 --n-aie-cols 4 --b-col-maj 0 --dev npu2 -M 512 -K 512 -N 512 --dtype_in bf16 --dtype_out bf16 --trace_size 0 > build/aie_512x512x512_64x64x64_4c.mlir
mkdir -p build
cd build && /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie/bin/clang++ -O2 -std=c++20 --target=aie2p-none-unknown-elf -Wno-parentheses -Wno-attributes -Wno-macro-redefined -Wno-empty-body -DNDEBUG -I /scratch/luisr/mlir-aie/install/include  -Dbf16_bf16_ONLY -DDIM_M=64 -DDIM_K=64 -DDIM_N=64 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_64x64x64.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_512x512x512_64x64x64_4c.xclbin \
			--no-xchesscc --no-xbridge --peano /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie \
			--aie-generate-npu-insts --npu-insts-name=insts_512x512x512_64x64x64_4c.txt ../build/aie_512x512x512_64x64x64_4c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_512x512x512_64x64x64_4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_512x512x512_64x64x64_4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_512x512x512_64x64x64_4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_512x512x512_64x64x64_4c.xclbin -i build/insts_512x512x512_64x64x64_4c.txt -k MLIR_AIE -M 512 -K 512 -N 512 --iters 20 --warmup 10 --b_col_maj 0

Avg NPU matmul time: 1462us.
Avg NPU gflops: 183.608

Min NPU matmul time: 832us.
Max NPU gflops: 322.639

Max NPU matmul time: 3452us.
Min NPU gflops: 77.7623

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=std::bfloat16_t -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.3s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 64 -k 64 -n 64 --n-aie-cols 4 --b-col-maj 0 --dev npu2 -M 512 -K 512 -N 1024 --dtype_in bf16 --dtype_out bf16 --trace_size 0 > build/aie_512x512x1024_64x64x64_4c.mlir
mkdir -p build
cd build && /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie/bin/clang++ -O2 -std=c++20 --target=aie2p-none-unknown-elf -Wno-parentheses -Wno-attributes -Wno-macro-redefined -Wno-empty-body -DNDEBUG -I /scratch/luisr/mlir-aie/install/include  -Dbf16_bf16_ONLY -DDIM_M=64 -DDIM_K=64 -DDIM_N=64 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_64x64x64.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_512x512x1024_64x64x64_4c.xclbin \
			--no-xchesscc --no-xbridge --peano /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie \
			--aie-generate-npu-insts --npu-insts-name=insts_512x512x1024_64x64x64_4c.txt ../build/aie_512x512x1024_64x64x64_4c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_512x512x1024_64x64x64_4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_512x512x1024_64x64x64_4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_512x512x1024_64x64x64_4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_512x512x1024_64x64x64_4c.xclbin -i build/insts_512x512x1024_64x64x64_4c.txt -k MLIR_AIE -M 512 -K 512 -N 1024 --iters 20 --warmup 10 --b_col_maj 0

Avg NPU matmul time: 2758.45us.
Avg NPU gflops: 194.628

Min NPU matmul time: 1563us.
Max NPU gflops: 343.487

Max NPU matmul time: 4375us.
Min NPU gflops: 122.713

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=std::bfloat16_t -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.3s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 64 -k 64 -n 64 --n-aie-cols 4 --b-col-maj 0 --dev npu2 -M 512 -K 512 -N 2560 --dtype_in bf16 --dtype_out bf16 --trace_size 0 > build/aie_512x512x2560_64x64x64_4c.mlir
mkdir -p build
cd build && /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie/bin/clang++ -O2 -std=c++20 --target=aie2p-none-unknown-elf -Wno-parentheses -Wno-attributes -Wno-macro-redefined -Wno-empty-body -DNDEBUG -I /scratch/luisr/mlir-aie/install/include  -Dbf16_bf16_ONLY -DDIM_M=64 -DDIM_K=64 -DDIM_N=64 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_64x64x64.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_512x512x2560_64x64x64_4c.xclbin \
			--no-xchesscc --no-xbridge --peano /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie \
			--aie-generate-npu-insts --npu-insts-name=insts_512x512x2560_64x64x64_4c.txt ../build/aie_512x512x2560_64x64x64_4c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_512x512x2560_64x64x64_4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_512x512x2560_64x64x64_4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_512x512x2560_64x64x64_4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_512x512x2560_64x64x64_4c.xclbin -i build/insts_512x512x2560_64x64x64_4c.txt -k MLIR_AIE -M 512 -K 512 -N 2560 --iters 20 --warmup 10 --b_col_maj 0

Avg NPU matmul time: 5643.2us.
Avg NPU gflops: 237.84

Min NPU matmul time: 3854us.
Max NPU gflops: 348.256

Max NPU matmul time: 6503us.
Min NPU gflops: 206.394

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=std::bfloat16_t -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.2s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 64 -k 64 -n 64 --n-aie-cols 4 --b-col-maj 0 --dev npu2 -M 512 -K 512 -N 4096 --dtype_in bf16 --dtype_out bf16 --trace_size 0 > build/aie_512x512x4096_64x64x64_4c.mlir
mkdir -p build
cd build && /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie/bin/clang++ -O2 -std=c++20 --target=aie2p-none-unknown-elf -Wno-parentheses -Wno-attributes -Wno-macro-redefined -Wno-empty-body -DNDEBUG -I /scratch/luisr/mlir-aie/install/include  -Dbf16_bf16_ONLY -DDIM_M=64 -DDIM_K=64 -DDIM_N=64 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_64x64x64.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_512x512x4096_64x64x64_4c.xclbin \
			--no-xchesscc --no-xbridge --peano /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie \
			--aie-generate-npu-insts --npu-insts-name=insts_512x512x4096_64x64x64_4c.txt ../build/aie_512x512x4096_64x64x64_4c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_512x512x4096_64x64x64_4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_512x512x4096_64x64x64_4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_512x512x4096_64x64x64_4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_512x512x4096_64x64x64_4c.xclbin -i build/insts_512x512x4096_64x64x64_4c.txt -k MLIR_AIE -M 512 -K 512 -N 4096 --iters 20 --warmup 10 --b_col_maj 0

Avg NPU matmul time: 8261.95us.
Avg NPU gflops: 259.925

Min NPU matmul time: 6091us.
Max NPU gflops: 352.567

Max NPU matmul time: 9242us.
Min NPU gflops: 232.361

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=std::bfloat16_t -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.3s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 64 -k 64 -n 64 --n-aie-cols 4 --b-col-maj 0 --dev npu2 -M 512 -K 1024 -N 512 --dtype_in bf16 --dtype_out bf16 --trace_size 0 > build/aie_512x1024x512_64x64x64_4c.mlir
mkdir -p build
cd build && /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie/bin/clang++ -O2 -std=c++20 --target=aie2p-none-unknown-elf -Wno-parentheses -Wno-attributes -Wno-macro-redefined -Wno-empty-body -DNDEBUG -I /scratch/luisr/mlir-aie/install/include  -Dbf16_bf16_ONLY -DDIM_M=64 -DDIM_K=64 -DDIM_N=64 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_64x64x64.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_512x1024x512_64x64x64_4c.xclbin \
			--no-xchesscc --no-xbridge --peano /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie \
			--aie-generate-npu-insts --npu-insts-name=insts_512x1024x512_64x64x64_4c.txt ../build/aie_512x1024x512_64x64x64_4c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_512x1024x512_64x64x64_4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_512x1024x512_64x64x64_4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_512x1024x512_64x64x64_4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_512x1024x512_64x64x64_4c.xclbin -i build/insts_512x1024x512_64x64x64_4c.txt -k MLIR_AIE -M 512 -K 1024 -N 512 --iters 20 --warmup 10 --b_col_maj 0

Avg NPU matmul time: 2704.4us.
Avg NPU gflops: 198.518

Min NPU matmul time: 1942us.
Max NPU gflops: 276.453

Max NPU matmul time: 4021us.
Min NPU gflops: 133.517

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=std::bfloat16_t -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.3s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 64 -k 64 -n 64 --n-aie-cols 4 --b-col-maj 0 --dev npu2 -M 512 -K 1024 -N 1024 --dtype_in bf16 --dtype_out bf16 --trace_size 0 > build/aie_512x1024x1024_64x64x64_4c.mlir
mkdir -p build
cd build && /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie/bin/clang++ -O2 -std=c++20 --target=aie2p-none-unknown-elf -Wno-parentheses -Wno-attributes -Wno-macro-redefined -Wno-empty-body -DNDEBUG -I /scratch/luisr/mlir-aie/install/include  -Dbf16_bf16_ONLY -DDIM_M=64 -DDIM_K=64 -DDIM_N=64 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_64x64x64.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_512x1024x1024_64x64x64_4c.xclbin \
			--no-xchesscc --no-xbridge --peano /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie \
			--aie-generate-npu-insts --npu-insts-name=insts_512x1024x1024_64x64x64_4c.txt ../build/aie_512x1024x1024_64x64x64_4c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_512x1024x1024_64x64x64_4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_512x1024x1024_64x64x64_4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_512x1024x1024_64x64x64_4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_512x1024x1024_64x64x64_4c.xclbin -i build/insts_512x1024x1024_64x64x64_4c.txt -k MLIR_AIE -M 512 -K 1024 -N 1024 --iters 20 --warmup 10 --b_col_maj 0

Avg NPU matmul time: 4691.1us.
Avg NPU gflops: 228.889

Min NPU matmul time: 3082us.
Max NPU gflops: 348.391

Max NPU matmul time: 5670us.
Min NPU gflops: 189.372

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=std::bfloat16_t -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.3s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 64 -k 64 -n 64 --n-aie-cols 4 --b-col-maj 0 --dev npu2 -M 512 -K 1024 -N 2560 --dtype_in bf16 --dtype_out bf16 --trace_size 0 > build/aie_512x1024x2560_64x64x64_4c.mlir
mkdir -p build
cd build && /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie/bin/clang++ -O2 -std=c++20 --target=aie2p-none-unknown-elf -Wno-parentheses -Wno-attributes -Wno-macro-redefined -Wno-empty-body -DNDEBUG -I /scratch/luisr/mlir-aie/install/include  -Dbf16_bf16_ONLY -DDIM_M=64 -DDIM_K=64 -DDIM_N=64 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_64x64x64.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_512x1024x2560_64x64x64_4c.xclbin \
			--no-xchesscc --no-xbridge --peano /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie \
			--aie-generate-npu-insts --npu-insts-name=insts_512x1024x2560_64x64x64_4c.txt ../build/aie_512x1024x2560_64x64x64_4c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_512x1024x2560_64x64x64_4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_512x1024x2560_64x64x64_4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_512x1024x2560_64x64x64_4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_512x1024x2560_64x64x64_4c.xclbin -i build/insts_512x1024x2560_64x64x64_4c.txt -k MLIR_AIE -M 512 -K 1024 -N 2560 --iters 20 --warmup 10 --b_col_maj 0





















Avg NPU matmul time: 7801.2us.
Avg NPU gflops: 344.095

Min NPU matmul time: 7438us.
Max NPU gflops: 360.897

Max NPU matmul time: 8055us.
Min NPU gflops: 333.253

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=std::bfloat16_t -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.3s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 64 -k 64 -n 64 --n-aie-cols 4 --b-col-maj 0 --dev npu2 -M 512 -K 1024 -N 4096 --dtype_in bf16 --dtype_out bf16 --trace_size 0 > build/aie_512x1024x4096_64x64x64_4c.mlir
mkdir -p build
cd build && /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie/bin/clang++ -O2 -std=c++20 --target=aie2p-none-unknown-elf -Wno-parentheses -Wno-attributes -Wno-macro-redefined -Wno-empty-body -DNDEBUG -I /scratch/luisr/mlir-aie/install/include  -Dbf16_bf16_ONLY -DDIM_M=64 -DDIM_K=64 -DDIM_N=64 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_64x64x64.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_512x1024x4096_64x64x64_4c.xclbin \
			--no-xchesscc --no-xbridge --peano /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie \
			--aie-generate-npu-insts --npu-insts-name=insts_512x1024x4096_64x64x64_4c.txt ../build/aie_512x1024x4096_64x64x64_4c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_512x1024x4096_64x64x64_4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_512x1024x4096_64x64x64_4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_512x1024x4096_64x64x64_4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_512x1024x4096_64x64x64_4c.xclbin -i build/insts_512x1024x4096_64x64x64_4c.txt -k MLIR_AIE -M 512 -K 1024 -N 4096 --iters 20 --warmup 10 --b_col_maj 0





















Avg NPU matmul time: 12433.3us.
Avg NPU gflops: 345.439

Min NPU matmul time: 11902us.
Max NPU gflops: 360.861

Max NPU matmul time: 12730us.
Min NPU gflops: 337.389

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=std::bfloat16_t -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.3s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 64 -k 64 -n 64 --n-aie-cols 4 --b-col-maj 0 --dev npu2 -M 512 -K 2560 -N 512 --dtype_in bf16 --dtype_out bf16 --trace_size 0 > build/aie_512x2560x512_64x64x64_4c.mlir
mkdir -p build
cd build && /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie/bin/clang++ -O2 -std=c++20 --target=aie2p-none-unknown-elf -Wno-parentheses -Wno-attributes -Wno-macro-redefined -Wno-empty-body -DNDEBUG -I /scratch/luisr/mlir-aie/install/include  -Dbf16_bf16_ONLY -DDIM_M=64 -DDIM_K=64 -DDIM_N=64 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_64x64x64.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_512x2560x512_64x64x64_4c.xclbin \
			--no-xchesscc --no-xbridge --peano /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie \
			--aie-generate-npu-insts --npu-insts-name=insts_512x2560x512_64x64x64_4c.txt ../build/aie_512x2560x512_64x64x64_4c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_512x2560x512_64x64x64_4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_512x2560x512_64x64x64_4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_512x2560x512_64x64x64_4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_512x2560x512_64x64x64_4c.xclbin -i build/insts_512x2560x512_64x64x64_4c.txt -k MLIR_AIE -M 512 -K 2560 -N 512 --iters 20 --warmup 10 --b_col_maj 0

Avg NPU matmul time: 5741.95us.
Avg NPU gflops: 233.749

Min NPU matmul time: 3752us.
Max NPU gflops: 357.723

Max NPU matmul time: 6778us.
Min NPU gflops: 198.02

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=std::bfloat16_t -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.3s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 64 -k 64 -n 64 --n-aie-cols 4 --b-col-maj 0 --dev npu2 -M 512 -K 2560 -N 1024 --dtype_in bf16 --dtype_out bf16 --trace_size 0 > build/aie_512x2560x1024_64x64x64_4c.mlir
mkdir -p build
cd build && /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie/bin/clang++ -O2 -std=c++20 --target=aie2p-none-unknown-elf -Wno-parentheses -Wno-attributes -Wno-macro-redefined -Wno-empty-body -DNDEBUG -I /scratch/luisr/mlir-aie/install/include  -Dbf16_bf16_ONLY -DDIM_M=64 -DDIM_K=64 -DDIM_N=64 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_64x64x64.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_512x2560x1024_64x64x64_4c.xclbin \
			--no-xchesscc --no-xbridge --peano /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie \
			--aie-generate-npu-insts --npu-insts-name=insts_512x2560x1024_64x64x64_4c.txt ../build/aie_512x2560x1024_64x64x64_4c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_512x2560x1024_64x64x64_4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_512x2560x1024_64x64x64_4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_512x2560x1024_64x64x64_4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_512x2560x1024_64x64x64_4c.xclbin -i build/insts_512x2560x1024_64x64x64_4c.txt -k MLIR_AIE -M 512 -K 2560 -N 1024 --iters 20 --warmup 10 --b_col_maj 0





















Avg NPU matmul time: 8240.35us.
Avg NPU gflops: 325.757

Min NPU matmul time: 7559us.
Max NPU gflops: 355.12

Max NPU matmul time: 8777us.
Min NPU gflops: 305.84

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=std::bfloat16_t -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.2s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 64 -k 64 -n 64 --n-aie-cols 4 --b-col-maj 0 --dev npu2 -M 512 -K 2560 -N 2560 --dtype_in bf16 --dtype_out bf16 --trace_size 0 > build/aie_512x2560x2560_64x64x64_4c.mlir
mkdir -p build
cd build && /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie/bin/clang++ -O2 -std=c++20 --target=aie2p-none-unknown-elf -Wno-parentheses -Wno-attributes -Wno-macro-redefined -Wno-empty-body -DNDEBUG -I /scratch/luisr/mlir-aie/install/include  -Dbf16_bf16_ONLY -DDIM_M=64 -DDIM_K=64 -DDIM_N=64 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_64x64x64.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_512x2560x2560_64x64x64_4c.xclbin \
			--no-xchesscc --no-xbridge --peano /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie \
			--aie-generate-npu-insts --npu-insts-name=insts_512x2560x2560_64x64x64_4c.txt ../build/aie_512x2560x2560_64x64x64_4c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_512x2560x2560_64x64x64_4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_512x2560x2560_64x64x64_4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_512x2560x2560_64x64x64_4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_512x2560x2560_64x64x64_4c.xclbin -i build/insts_512x2560x2560_64x64x64_4c.txt -k MLIR_AIE -M 512 -K 2560 -N 2560 --iters 20 --warmup 10 --b_col_maj 0





















Avg NPU matmul time: 19740.7us.
Avg NPU gflops: 339.952

Min NPU matmul time: 18854us.
Max NPU gflops: 355.94

Max NPU matmul time: 22804us.
Min NPU gflops: 294.285

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=std::bfloat16_t -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.2s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 64 -k 64 -n 64 --n-aie-cols 4 --b-col-maj 0 --dev npu2 -M 512 -K 2560 -N 4096 --dtype_in bf16 --dtype_out bf16 --trace_size 0 > build/aie_512x2560x4096_64x64x64_4c.mlir
mkdir -p build
cd build && /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie/bin/clang++ -O2 -std=c++20 --target=aie2p-none-unknown-elf -Wno-parentheses -Wno-attributes -Wno-macro-redefined -Wno-empty-body -DNDEBUG -I /scratch/luisr/mlir-aie/install/include  -Dbf16_bf16_ONLY -DDIM_M=64 -DDIM_K=64 -DDIM_N=64 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_64x64x64.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_512x2560x4096_64x64x64_4c.xclbin \
			--no-xchesscc --no-xbridge --peano /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie \
			--aie-generate-npu-insts --npu-insts-name=insts_512x2560x4096_64x64x64_4c.txt ../build/aie_512x2560x4096_64x64x64_4c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_512x2560x4096_64x64x64_4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_512x2560x4096_64x64x64_4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_512x2560x4096_64x64x64_4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_512x2560x4096_64x64x64_4c.xclbin -i build/insts_512x2560x4096_64x64x64_4c.txt -k MLIR_AIE -M 512 -K 2560 -N 4096 --iters 20 --warmup 10 --b_col_maj 0





















Avg NPU matmul time: 30677.4us.
Avg NPU gflops: 350.011

Min NPU matmul time: 29590us.
Max NPU gflops: 362.873

Max NPU matmul time: 32745us.
Min NPU gflops: 327.91

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=std::bfloat16_t -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.3s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 64 -k 64 -n 64 --n-aie-cols 4 --b-col-maj 0 --dev npu2 -M 512 -K 4096 -N 512 --dtype_in bf16 --dtype_out bf16 --trace_size 0 > build/aie_512x4096x512_64x64x64_4c.mlir
mkdir -p build
cd build && /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie/bin/clang++ -O2 -std=c++20 --target=aie2p-none-unknown-elf -Wno-parentheses -Wno-attributes -Wno-macro-redefined -Wno-empty-body -DNDEBUG -I /scratch/luisr/mlir-aie/install/include  -Dbf16_bf16_ONLY -DDIM_M=64 -DDIM_K=64 -DDIM_N=64 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_64x64x64.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_512x4096x512_64x64x64_4c.xclbin \
			--no-xchesscc --no-xbridge --peano /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie \
			--aie-generate-npu-insts --npu-insts-name=insts_512x4096x512_64x64x64_4c.txt ../build/aie_512x4096x512_64x64x64_4c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_512x4096x512_64x64x64_4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_512x4096x512_64x64x64_4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_512x4096x512_64x64x64_4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_512x4096x512_64x64x64_4c.xclbin -i build/insts_512x4096x512_64x64x64_4c.txt -k MLIR_AIE -M 512 -K 4096 -N 512 --iters 20 --warmup 10 --b_col_maj 0

Avg NPU matmul time: 8286.5us.
Avg NPU gflops: 259.154

Min NPU matmul time: 6272us.
Max NPU gflops: 342.392

Max NPU matmul time: 8733us.
Min NPU gflops: 245.904

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=std::bfloat16_t -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.3s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 64 -k 64 -n 64 --n-aie-cols 4 --b-col-maj 0 --dev npu2 -M 512 -K 4096 -N 1024 --dtype_in bf16 --dtype_out bf16 --trace_size 0 > build/aie_512x4096x1024_64x64x64_4c.mlir
mkdir -p build
cd build && /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie/bin/clang++ -O2 -std=c++20 --target=aie2p-none-unknown-elf -Wno-parentheses -Wno-attributes -Wno-macro-redefined -Wno-empty-body -DNDEBUG -I /scratch/luisr/mlir-aie/install/include  -Dbf16_bf16_ONLY -DDIM_M=64 -DDIM_K=64 -DDIM_N=64 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_64x64x64.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_512x4096x1024_64x64x64_4c.xclbin \
			--no-xchesscc --no-xbridge --peano /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie \
			--aie-generate-npu-insts --npu-insts-name=insts_512x4096x1024_64x64x64_4c.txt ../build/aie_512x4096x1024_64x64x64_4c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_512x4096x1024_64x64x64_4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_512x4096x1024_64x64x64_4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_512x4096x1024_64x64x64_4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_512x4096x1024_64x64x64_4c.xclbin -i build/insts_512x4096x1024_64x64x64_4c.txt -k MLIR_AIE -M 512 -K 4096 -N 1024 --iters 20 --warmup 10 --b_col_maj 0





















Avg NPU matmul time: 12672us.
Avg NPU gflops: 338.932

Min NPU matmul time: 12138us.
Max NPU gflops: 353.845

Max NPU matmul time: 13972us.
Min NPU gflops: 307.398

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=std::bfloat16_t -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.3s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 64 -k 64 -n 64 --n-aie-cols 4 --b-col-maj 0 --dev npu2 -M 512 -K 4096 -N 2560 --dtype_in bf16 --dtype_out bf16 --trace_size 0 > build/aie_512x4096x2560_64x64x64_4c.mlir
mkdir -p build
cd build && /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie/bin/clang++ -O2 -std=c++20 --target=aie2p-none-unknown-elf -Wno-parentheses -Wno-attributes -Wno-macro-redefined -Wno-empty-body -DNDEBUG -I /scratch/luisr/mlir-aie/install/include  -Dbf16_bf16_ONLY -DDIM_M=64 -DDIM_K=64 -DDIM_N=64 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_64x64x64.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_512x4096x2560_64x64x64_4c.xclbin \
			--no-xchesscc --no-xbridge --peano /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie \
			--aie-generate-npu-insts --npu-insts-name=insts_512x4096x2560_64x64x64_4c.txt ../build/aie_512x4096x2560_64x64x64_4c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_512x4096x2560_64x64x64_4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_512x4096x2560_64x64x64_4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_512x4096x2560_64x64x64_4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_512x4096x2560_64x64x64_4c.xclbin -i build/insts_512x4096x2560_64x64x64_4c.txt -k MLIR_AIE -M 512 -K 4096 -N 2560 --iters 20 --warmup 10 --b_col_maj 0





















Avg NPU matmul time: 30772.8us.
Avg NPU gflops: 348.926

Min NPU matmul time: 29633us.
Max NPU gflops: 362.347

Max NPU matmul time: 32255us.
Min NPU gflops: 332.892

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=std::bfloat16_t -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.3s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 64 -k 64 -n 64 --n-aie-cols 4 --b-col-maj 0 --dev npu2 -M 512 -K 4096 -N 4096 --dtype_in bf16 --dtype_out bf16 --trace_size 0 > build/aie_512x4096x4096_64x64x64_4c.mlir
mkdir -p build
cd build && /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie/bin/clang++ -O2 -std=c++20 --target=aie2p-none-unknown-elf -Wno-parentheses -Wno-attributes -Wno-macro-redefined -Wno-empty-body -DNDEBUG -I /scratch/luisr/mlir-aie/install/include  -Dbf16_bf16_ONLY -DDIM_M=64 -DDIM_K=64 -DDIM_N=64 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_64x64x64.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_512x4096x4096_64x64x64_4c.xclbin \
			--no-xchesscc --no-xbridge --peano /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie \
			--aie-generate-npu-insts --npu-insts-name=insts_512x4096x4096_64x64x64_4c.txt ../build/aie_512x4096x4096_64x64x64_4c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_512x4096x4096_64x64x64_4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_512x4096x4096_64x64x64_4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_512x4096x4096_64x64x64_4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_512x4096x4096_64x64x64_4c.xclbin -i build/insts_512x4096x4096_64x64x64_4c.txt -k MLIR_AIE -M 512 -K 4096 -N 4096 --iters 20 --warmup 10 --b_col_maj 0





















Avg NPU matmul time: 49395.4us.
Avg NPU gflops: 347.803

Min NPU matmul time: 47205us.
Max NPU gflops: 363.942

Max NPU matmul time: 50118us.
Min NPU gflops: 342.788

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=std::bfloat16_t -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.3s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 64 -k 64 -n 64 --n-aie-cols 4 --b-col-maj 0 --dev npu2 -M 1024 -K 512 -N 512 --dtype_in bf16 --dtype_out bf16 --trace_size 0 > build/aie_1024x512x512_64x64x64_4c.mlir
mkdir -p build
cd build && /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie/bin/clang++ -O2 -std=c++20 --target=aie2p-none-unknown-elf -Wno-parentheses -Wno-attributes -Wno-macro-redefined -Wno-empty-body -DNDEBUG -I /scratch/luisr/mlir-aie/install/include  -Dbf16_bf16_ONLY -DDIM_M=64 -DDIM_K=64 -DDIM_N=64 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_64x64x64.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_1024x512x512_64x64x64_4c.xclbin \
			--no-xchesscc --no-xbridge --peano /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie \
			--aie-generate-npu-insts --npu-insts-name=insts_1024x512x512_64x64x64_4c.txt ../build/aie_1024x512x512_64x64x64_4c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_1024x512x512_64x64x64_4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_1024x512x512_64x64x64_4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_1024x512x512_64x64x64_4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_1024x512x512_64x64x64_4c.xclbin -i build/insts_1024x512x512_64x64x64_4c.txt -k MLIR_AIE -M 1024 -K 512 -N 512 --iters 20 --warmup 10 --b_col_maj 0

Avg NPU matmul time: 2876.9us.
Avg NPU gflops: 186.614

Min NPU matmul time: 1571us.
Max NPU gflops: 341.738

Max NPU matmul time: 4652us.
Min NPU gflops: 115.406

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=std::bfloat16_t -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.3s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 64 -k 64 -n 64 --n-aie-cols 4 --b-col-maj 0 --dev npu2 -M 1024 -K 512 -N 1024 --dtype_in bf16 --dtype_out bf16 --trace_size 0 > build/aie_1024x512x1024_64x64x64_4c.mlir
mkdir -p build
cd build && /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie/bin/clang++ -O2 -std=c++20 --target=aie2p-none-unknown-elf -Wno-parentheses -Wno-attributes -Wno-macro-redefined -Wno-empty-body -DNDEBUG -I /scratch/luisr/mlir-aie/install/include  -Dbf16_bf16_ONLY -DDIM_M=64 -DDIM_K=64 -DDIM_N=64 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_64x64x64.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_1024x512x1024_64x64x64_4c.xclbin \
			--no-xchesscc --no-xbridge --peano /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie \
			--aie-generate-npu-insts --npu-insts-name=insts_1024x512x1024_64x64x64_4c.txt ../build/aie_1024x512x1024_64x64x64_4c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_1024x512x1024_64x64x64_4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_1024x512x1024_64x64x64_4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_1024x512x1024_64x64x64_4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_1024x512x1024_64x64x64_4c.xclbin -i build/insts_1024x512x1024_64x64x64_4c.txt -k MLIR_AIE -M 1024 -K 512 -N 1024 --iters 20 --warmup 10 --b_col_maj 0

Avg NPU matmul time: 4558.3us.
Avg NPU gflops: 235.558

Min NPU matmul time: 3002us.
Max NPU gflops: 357.675

Max NPU matmul time: 6857us.
Min NPU gflops: 156.591

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=std::bfloat16_t -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.3s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 64 -k 64 -n 64 --n-aie-cols 4 --b-col-maj 0 --dev npu2 -M 1024 -K 512 -N 2560 --dtype_in bf16 --dtype_out bf16 --trace_size 0 > build/aie_1024x512x2560_64x64x64_4c.mlir
mkdir -p build
cd build && /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie/bin/clang++ -O2 -std=c++20 --target=aie2p-none-unknown-elf -Wno-parentheses -Wno-attributes -Wno-macro-redefined -Wno-empty-body -DNDEBUG -I /scratch/luisr/mlir-aie/install/include  -Dbf16_bf16_ONLY -DDIM_M=64 -DDIM_K=64 -DDIM_N=64 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_64x64x64.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_1024x512x2560_64x64x64_4c.xclbin \
			--no-xchesscc --no-xbridge --peano /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie \
			--aie-generate-npu-insts --npu-insts-name=insts_1024x512x2560_64x64x64_4c.txt ../build/aie_1024x512x2560_64x64x64_4c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_1024x512x2560_64x64x64_4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_1024x512x2560_64x64x64_4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_1024x512x2560_64x64x64_4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_1024x512x2560_64x64x64_4c.xclbin -i build/insts_1024x512x2560_64x64x64_4c.txt -k MLIR_AIE -M 1024 -K 512 -N 2560 --iters 20 --warmup 10 --b_col_maj 0





















Avg NPU matmul time: 8194.2us.
Avg NPU gflops: 327.592

Min NPU matmul time: 7446us.
Max NPU gflops: 360.51

Max NPU matmul time: 8681us.
Min NPU gflops: 309.222

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=std::bfloat16_t -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.2s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 64 -k 64 -n 64 --n-aie-cols 4 --b-col-maj 0 --dev npu2 -M 1024 -K 512 -N 4096 --dtype_in bf16 --dtype_out bf16 --trace_size 0 > build/aie_1024x512x4096_64x64x64_4c.mlir
mkdir -p build
cd build && /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie/bin/clang++ -O2 -std=c++20 --target=aie2p-none-unknown-elf -Wno-parentheses -Wno-attributes -Wno-macro-redefined -Wno-empty-body -DNDEBUG -I /scratch/luisr/mlir-aie/install/include  -Dbf16_bf16_ONLY -DDIM_M=64 -DDIM_K=64 -DDIM_N=64 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_64x64x64.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_1024x512x4096_64x64x64_4c.xclbin \
			--no-xchesscc --no-xbridge --peano /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie \
			--aie-generate-npu-insts --npu-insts-name=insts_1024x512x4096_64x64x64_4c.txt ../build/aie_1024x512x4096_64x64x64_4c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_1024x512x4096_64x64x64_4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_1024x512x4096_64x64x64_4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_1024x512x4096_64x64x64_4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_1024x512x4096_64x64x64_4c.xclbin -i build/insts_1024x512x4096_64x64x64_4c.txt -k MLIR_AIE -M 1024 -K 512 -N 4096 --iters 20 --warmup 10 --b_col_maj 0





















Avg NPU matmul time: 12220.2us.
Avg NPU gflops: 351.466

Min NPU matmul time: 11857us.
Max NPU gflops: 362.231

Max NPU matmul time: 12689us.
Min NPU gflops: 338.48

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=std::bfloat16_t -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.2s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 64 -k 64 -n 64 --n-aie-cols 4 --b-col-maj 0 --dev npu2 -M 1024 -K 1024 -N 512 --dtype_in bf16 --dtype_out bf16 --trace_size 0 > build/aie_1024x1024x512_64x64x64_4c.mlir
mkdir -p build
cd build && /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie/bin/clang++ -O2 -std=c++20 --target=aie2p-none-unknown-elf -Wno-parentheses -Wno-attributes -Wno-macro-redefined -Wno-empty-body -DNDEBUG -I /scratch/luisr/mlir-aie/install/include  -Dbf16_bf16_ONLY -DDIM_M=64 -DDIM_K=64 -DDIM_N=64 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_64x64x64.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_1024x1024x512_64x64x64_4c.xclbin \
			--no-xchesscc --no-xbridge --peano /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie \
			--aie-generate-npu-insts --npu-insts-name=insts_1024x1024x512_64x64x64_4c.txt ../build/aie_1024x1024x512_64x64x64_4c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_1024x1024x512_64x64x64_4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_1024x1024x512_64x64x64_4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_1024x1024x512_64x64x64_4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_1024x1024x512_64x64x64_4c.xclbin -i build/insts_1024x1024x512_64x64x64_4c.txt -k MLIR_AIE -M 1024 -K 1024 -N 512 --iters 20 --warmup 10 --b_col_maj 0

Avg NPU matmul time: 4448.25us.
Avg NPU gflops: 241.385

Min NPU matmul time: 3338us.
Max NPU gflops: 321.672

Max NPU matmul time: 6132us.
Min NPU gflops: 175.105

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=std::bfloat16_t -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.2s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 64 -k 64 -n 64 --n-aie-cols 4 --b-col-maj 0 --dev npu2 -M 1024 -K 1024 -N 1024 --dtype_in bf16 --dtype_out bf16 --trace_size 0 > build/aie_1024x1024x1024_64x64x64_4c.mlir
mkdir -p build
cd build && /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie/bin/clang++ -O2 -std=c++20 --target=aie2p-none-unknown-elf -Wno-parentheses -Wno-attributes -Wno-macro-redefined -Wno-empty-body -DNDEBUG -I /scratch/luisr/mlir-aie/install/include  -Dbf16_bf16_ONLY -DDIM_M=64 -DDIM_K=64 -DDIM_N=64 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_64x64x64.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_1024x1024x1024_64x64x64_4c.xclbin \
			--no-xchesscc --no-xbridge --peano /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie \
			--aie-generate-npu-insts --npu-insts-name=insts_1024x1024x1024_64x64x64_4c.txt ../build/aie_1024x1024x1024_64x64x64_4c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_1024x1024x1024_64x64x64_4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_1024x1024x1024_64x64x64_4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_1024x1024x1024_64x64x64_4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_1024x1024x1024_64x64x64_4c.xclbin -i build/insts_1024x1024x1024_64x64x64_4c.txt -k MLIR_AIE -M 1024 -K 1024 -N 1024 --iters 20 --warmup 10 --b_col_maj 0

Avg NPU matmul time: 8324us.
Avg NPU gflops: 257.987

Min NPU matmul time: 6261us.
Max NPU gflops: 342.994

Max NPU matmul time: 9109us.
Min NPU gflops: 235.754

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=std::bfloat16_t -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.3s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 64 -k 64 -n 64 --n-aie-cols 4 --b-col-maj 0 --dev npu2 -M 1024 -K 1024 -N 2560 --dtype_in bf16 --dtype_out bf16 --trace_size 0 > build/aie_1024x1024x2560_64x64x64_4c.mlir
mkdir -p build
cd build && /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie/bin/clang++ -O2 -std=c++20 --target=aie2p-none-unknown-elf -Wno-parentheses -Wno-attributes -Wno-macro-redefined -Wno-empty-body -DNDEBUG -I /scratch/luisr/mlir-aie/install/include  -Dbf16_bf16_ONLY -DDIM_M=64 -DDIM_K=64 -DDIM_N=64 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_64x64x64.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_1024x1024x2560_64x64x64_4c.xclbin \
			--no-xchesscc --no-xbridge --peano /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie \
			--aie-generate-npu-insts --npu-insts-name=insts_1024x1024x2560_64x64x64_4c.txt ../build/aie_1024x1024x2560_64x64x64_4c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_1024x1024x2560_64x64x64_4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_1024x1024x2560_64x64x64_4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_1024x1024x2560_64x64x64_4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_1024x1024x2560_64x64x64_4c.xclbin -i build/insts_1024x1024x2560_64x64x64_4c.txt -k MLIR_AIE -M 1024 -K 1024 -N 2560 --iters 20 --warmup 10 --b_col_maj 0





















Avg NPU matmul time: 15314.8us.
Avg NPU gflops: 350.558

Min NPU matmul time: 14747us.
Max NPU gflops: 364.054

Max NPU matmul time: 15850us.
Min NPU gflops: 338.72

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=std::bfloat16_t -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.2s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 64 -k 64 -n 64 --n-aie-cols 4 --b-col-maj 0 --dev npu2 -M 1024 -K 1024 -N 4096 --dtype_in bf16 --dtype_out bf16 --trace_size 0 > build/aie_1024x1024x4096_64x64x64_4c.mlir
mkdir -p build
cd build && /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie/bin/clang++ -O2 -std=c++20 --target=aie2p-none-unknown-elf -Wno-parentheses -Wno-attributes -Wno-macro-redefined -Wno-empty-body -DNDEBUG -I /scratch/luisr/mlir-aie/install/include  -Dbf16_bf16_ONLY -DDIM_M=64 -DDIM_K=64 -DDIM_N=64 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_64x64x64.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_1024x1024x4096_64x64x64_4c.xclbin \
			--no-xchesscc --no-xbridge --peano /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie \
			--aie-generate-npu-insts --npu-insts-name=insts_1024x1024x4096_64x64x64_4c.txt ../build/aie_1024x1024x4096_64x64x64_4c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_1024x1024x4096_64x64x64_4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_1024x1024x4096_64x64x64_4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_1024x1024x4096_64x64x64_4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_1024x1024x4096_64x64x64_4c.xclbin -i build/insts_1024x1024x4096_64x64x64_4c.txt -k MLIR_AIE -M 1024 -K 1024 -N 4096 --iters 20 --warmup 10 --b_col_maj 0





















Avg NPU matmul time: 24187.2us.
Avg NPU gflops: 355.143

Min NPU matmul time: 23469us.
Max NPU gflops: 366.012

Max NPU matmul time: 26252us.
Min NPU gflops: 327.211

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=std::bfloat16_t -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.2s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 64 -k 64 -n 64 --n-aie-cols 4 --b-col-maj 0 --dev npu2 -M 1024 -K 2560 -N 512 --dtype_in bf16 --dtype_out bf16 --trace_size 0 > build/aie_1024x2560x512_64x64x64_4c.mlir
mkdir -p build
cd build && /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie/bin/clang++ -O2 -std=c++20 --target=aie2p-none-unknown-elf -Wno-parentheses -Wno-attributes -Wno-macro-redefined -Wno-empty-body -DNDEBUG -I /scratch/luisr/mlir-aie/install/include  -Dbf16_bf16_ONLY -DDIM_M=64 -DDIM_K=64 -DDIM_N=64 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_64x64x64.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_1024x2560x512_64x64x64_4c.xclbin \
			--no-xchesscc --no-xbridge --peano /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie \
			--aie-generate-npu-insts --npu-insts-name=insts_1024x2560x512_64x64x64_4c.txt ../build/aie_1024x2560x512_64x64x64_4c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_1024x2560x512_64x64x64_4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_1024x2560x512_64x64x64_4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_1024x2560x512_64x64x64_4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_1024x2560x512_64x64x64_4c.xclbin -i build/insts_1024x2560x512_64x64x64_4c.txt -k MLIR_AIE -M 1024 -K 2560 -N 512 --iters 20 --warmup 10 --b_col_maj 0





















Avg NPU matmul time: 8349.2us.
Avg NPU gflops: 321.51

Min NPU matmul time: 7497us.
Max NPU gflops: 358.057

Max NPU matmul time: 8970us.
Min NPU gflops: 299.259

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=std::bfloat16_t -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.3s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 64 -k 64 -n 64 --n-aie-cols 4 --b-col-maj 0 --dev npu2 -M 1024 -K 2560 -N 1024 --dtype_in bf16 --dtype_out bf16 --trace_size 0 > build/aie_1024x2560x1024_64x64x64_4c.mlir
mkdir -p build
cd build && /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie/bin/clang++ -O2 -std=c++20 --target=aie2p-none-unknown-elf -Wno-parentheses -Wno-attributes -Wno-macro-redefined -Wno-empty-body -DNDEBUG -I /scratch/luisr/mlir-aie/install/include  -Dbf16_bf16_ONLY -DDIM_M=64 -DDIM_K=64 -DDIM_N=64 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_64x64x64.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_1024x2560x1024_64x64x64_4c.xclbin \
			--no-xchesscc --no-xbridge --peano /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie \
			--aie-generate-npu-insts --npu-insts-name=insts_1024x2560x1024_64x64x64_4c.txt ../build/aie_1024x2560x1024_64x64x64_4c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_1024x2560x1024_64x64x64_4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_1024x2560x1024_64x64x64_4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_1024x2560x1024_64x64x64_4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_1024x2560x1024_64x64x64_4c.xclbin -i build/insts_1024x2560x1024_64x64x64_4c.txt -k MLIR_AIE -M 1024 -K 2560 -N 1024 --iters 20 --warmup 10 --b_col_maj 0





















Avg NPU matmul time: 16059.7us.
Avg NPU gflops: 334.297

Min NPU matmul time: 15082us.
Max NPU gflops: 355.968

Max NPU matmul time: 17798us.
Min NPU gflops: 301.647

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=std::bfloat16_t -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.2s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 64 -k 64 -n 64 --n-aie-cols 4 --b-col-maj 0 --dev npu2 -M 1024 -K 2560 -N 2560 --dtype_in bf16 --dtype_out bf16 --trace_size 0 > build/aie_1024x2560x2560_64x64x64_4c.mlir
mkdir -p build
cd build && /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie/bin/clang++ -O2 -std=c++20 --target=aie2p-none-unknown-elf -Wno-parentheses -Wno-attributes -Wno-macro-redefined -Wno-empty-body -DNDEBUG -I /scratch/luisr/mlir-aie/install/include  -Dbf16_bf16_ONLY -DDIM_M=64 -DDIM_K=64 -DDIM_N=64 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_64x64x64.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_1024x2560x2560_64x64x64_4c.xclbin \
			--no-xchesscc --no-xbridge --peano /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie \
			--aie-generate-npu-insts --npu-insts-name=insts_1024x2560x2560_64x64x64_4c.txt ../build/aie_1024x2560x2560_64x64x64_4c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_1024x2560x2560_64x64x64_4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_1024x2560x2560_64x64x64_4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_1024x2560x2560_64x64x64_4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_1024x2560x2560_64x64x64_4c.xclbin -i build/insts_1024x2560x2560_64x64x64_4c.txt -k MLIR_AIE -M 1024 -K 2560 -N 2560 --iters 20 --warmup 10 --b_col_maj 0





















Avg NPU matmul time: 37940.9us.
Avg NPU gflops: 353.755

Min NPU matmul time: 36935us.
Max NPU gflops: 363.389

Max NPU matmul time: 40665us.
Min NPU gflops: 330.057

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=std::bfloat16_t -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.3s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 64 -k 64 -n 64 --n-aie-cols 4 --b-col-maj 0 --dev npu2 -M 1024 -K 2560 -N 4096 --dtype_in bf16 --dtype_out bf16 --trace_size 0 > build/aie_1024x2560x4096_64x64x64_4c.mlir
mkdir -p build
cd build && /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie/bin/clang++ -O2 -std=c++20 --target=aie2p-none-unknown-elf -Wno-parentheses -Wno-attributes -Wno-macro-redefined -Wno-empty-body -DNDEBUG -I /scratch/luisr/mlir-aie/install/include  -Dbf16_bf16_ONLY -DDIM_M=64 -DDIM_K=64 -DDIM_N=64 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_64x64x64.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_1024x2560x4096_64x64x64_4c.xclbin \
			--no-xchesscc --no-xbridge --peano /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie \
			--aie-generate-npu-insts --npu-insts-name=insts_1024x2560x4096_64x64x64_4c.txt ../build/aie_1024x2560x4096_64x64x64_4c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_1024x2560x4096_64x64x64_4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_1024x2560x4096_64x64x64_4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_1024x2560x4096_64x64x64_4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_1024x2560x4096_64x64x64_4c.xclbin -i build/insts_1024x2560x4096_64x64x64_4c.txt -k MLIR_AIE -M 1024 -K 2560 -N 4096 --iters 20 --warmup 10 --b_col_maj 0





















Avg NPU matmul time: 59798.9us.
Avg NPU gflops: 359.118

Min NPU matmul time: 59237us.
Max NPU gflops: 362.524

Max NPU matmul time: 61601us.
Min NPU gflops: 348.612

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=std::bfloat16_t -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.3s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 64 -k 64 -n 64 --n-aie-cols 4 --b-col-maj 0 --dev npu2 -M 1024 -K 4096 -N 512 --dtype_in bf16 --dtype_out bf16 --trace_size 0 > build/aie_1024x4096x512_64x64x64_4c.mlir
mkdir -p build
cd build && /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie/bin/clang++ -O2 -std=c++20 --target=aie2p-none-unknown-elf -Wno-parentheses -Wno-attributes -Wno-macro-redefined -Wno-empty-body -DNDEBUG -I /scratch/luisr/mlir-aie/install/include  -Dbf16_bf16_ONLY -DDIM_M=64 -DDIM_K=64 -DDIM_N=64 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_64x64x64.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_1024x4096x512_64x64x64_4c.xclbin \
			--no-xchesscc --no-xbridge --peano /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie \
			--aie-generate-npu-insts --npu-insts-name=insts_1024x4096x512_64x64x64_4c.txt ../build/aie_1024x4096x512_64x64x64_4c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_1024x4096x512_64x64x64_4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_1024x4096x512_64x64x64_4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_1024x4096x512_64x64x64_4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_1024x4096x512_64x64x64_4c.xclbin -i build/insts_1024x4096x512_64x64x64_4c.txt -k MLIR_AIE -M 1024 -K 4096 -N 512 --iters 20 --warmup 10 --b_col_maj 0





















Avg NPU matmul time: 12417.7us.
Avg NPU gflops: 345.875

Min NPU matmul time: 12087us.
Max NPU gflops: 355.338

Max NPU matmul time: 13041us.
Min NPU gflops: 329.343

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=std::bfloat16_t -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.3s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 64 -k 64 -n 64 --n-aie-cols 4 --b-col-maj 0 --dev npu2 -M 1024 -K 4096 -N 1024 --dtype_in bf16 --dtype_out bf16 --trace_size 0 > build/aie_1024x4096x1024_64x64x64_4c.mlir
mkdir -p build
cd build && /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie/bin/clang++ -O2 -std=c++20 --target=aie2p-none-unknown-elf -Wno-parentheses -Wno-attributes -Wno-macro-redefined -Wno-empty-body -DNDEBUG -I /scratch/luisr/mlir-aie/install/include  -Dbf16_bf16_ONLY -DDIM_M=64 -DDIM_K=64 -DDIM_N=64 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_64x64x64.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_1024x4096x1024_64x64x64_4c.xclbin \
			--no-xchesscc --no-xbridge --peano /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie \
			--aie-generate-npu-insts --npu-insts-name=insts_1024x4096x1024_64x64x64_4c.txt ../build/aie_1024x4096x1024_64x64x64_4c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_1024x4096x1024_64x64x64_4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_1024x4096x1024_64x64x64_4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_1024x4096x1024_64x64x64_4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_1024x4096x1024_64x64x64_4c.xclbin -i build/insts_1024x4096x1024_64x64x64_4c.txt -k MLIR_AIE -M 1024 -K 4096 -N 1024 --iters 20 --warmup 10 --b_col_maj 0





















Avg NPU matmul time: 25183.1us.
Avg NPU gflops: 341.099

Min NPU matmul time: 23743us.
Max NPU gflops: 361.788

Max NPU matmul time: 26623us.
Min NPU gflops: 322.651

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=std::bfloat16_t -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.3s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 64 -k 64 -n 64 --n-aie-cols 4 --b-col-maj 0 --dev npu2 -M 1024 -K 4096 -N 2560 --dtype_in bf16 --dtype_out bf16 --trace_size 0 > build/aie_1024x4096x2560_64x64x64_4c.mlir
mkdir -p build
cd build && /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie/bin/clang++ -O2 -std=c++20 --target=aie2p-none-unknown-elf -Wno-parentheses -Wno-attributes -Wno-macro-redefined -Wno-empty-body -DNDEBUG -I /scratch/luisr/mlir-aie/install/include  -Dbf16_bf16_ONLY -DDIM_M=64 -DDIM_K=64 -DDIM_N=64 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_64x64x64.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_1024x4096x2560_64x64x64_4c.xclbin \
			--no-xchesscc --no-xbridge --peano /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie \
			--aie-generate-npu-insts --npu-insts-name=insts_1024x4096x2560_64x64x64_4c.txt ../build/aie_1024x4096x2560_64x64x64_4c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_1024x4096x2560_64x64x64_4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_1024x4096x2560_64x64x64_4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_1024x4096x2560_64x64x64_4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_1024x4096x2560_64x64x64_4c.xclbin -i build/insts_1024x4096x2560_64x64x64_4c.txt -k MLIR_AIE -M 1024 -K 4096 -N 2560 --iters 20 --warmup 10 --b_col_maj 0





















Avg NPU matmul time: 59568.6us.
Avg NPU gflops: 360.506

Min NPU matmul time: 58625us.
Max NPU gflops: 366.309

Max NPU matmul time: 61627us.
Min NPU gflops: 348.465

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=std::bfloat16_t -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.3s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 64 -k 64 -n 64 --n-aie-cols 4 --b-col-maj 0 --dev npu2 -M 1024 -K 4096 -N 4096 --dtype_in bf16 --dtype_out bf16 --trace_size 0 > build/aie_1024x4096x4096_64x64x64_4c.mlir
mkdir -p build
cd build && /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie/bin/clang++ -O2 -std=c++20 --target=aie2p-none-unknown-elf -Wno-parentheses -Wno-attributes -Wno-macro-redefined -Wno-empty-body -DNDEBUG -I /scratch/luisr/mlir-aie/install/include  -Dbf16_bf16_ONLY -DDIM_M=64 -DDIM_K=64 -DDIM_N=64 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_64x64x64.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_1024x4096x4096_64x64x64_4c.xclbin \
			--no-xchesscc --no-xbridge --peano /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie \
			--aie-generate-npu-insts --npu-insts-name=insts_1024x4096x4096_64x64x64_4c.txt ../build/aie_1024x4096x4096_64x64x64_4c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_1024x4096x4096_64x64x64_4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_1024x4096x4096_64x64x64_4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_1024x4096x4096_64x64x64_4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_1024x4096x4096_64x64x64_4c.xclbin -i build/insts_1024x4096x4096_64x64x64_4c.txt -k MLIR_AIE -M 1024 -K 4096 -N 4096 --iters 20 --warmup 10 --b_col_maj 0





















Avg NPU matmul time: 96119.1us.
Avg NPU gflops: 357.47

Min NPU matmul time: 94262us.
Max NPU gflops: 364.513

Max NPU matmul time: 96493us.
Min NPU gflops: 356.085

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=std::bfloat16_t -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.3s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 64 -k 64 -n 64 --n-aie-cols 4 --b-col-maj 0 --dev npu2 -M 2560 -K 512 -N 512 --dtype_in bf16 --dtype_out bf16 --trace_size 0 > build/aie_2560x512x512_64x64x64_4c.mlir
mkdir -p build
cd build && /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie/bin/clang++ -O2 -std=c++20 --target=aie2p-none-unknown-elf -Wno-parentheses -Wno-attributes -Wno-macro-redefined -Wno-empty-body -DNDEBUG -I /scratch/luisr/mlir-aie/install/include  -Dbf16_bf16_ONLY -DDIM_M=64 -DDIM_K=64 -DDIM_N=64 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_64x64x64.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_2560x512x512_64x64x64_4c.xclbin \
			--no-xchesscc --no-xbridge --peano /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie \
			--aie-generate-npu-insts --npu-insts-name=insts_2560x512x512_64x64x64_4c.txt ../build/aie_2560x512x512_64x64x64_4c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_2560x512x512_64x64x64_4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_2560x512x512_64x64x64_4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_2560x512x512_64x64x64_4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_2560x512x512_64x64x64_4c.xclbin -i build/insts_2560x512x512_64x64x64_4c.txt -k MLIR_AIE -M 2560 -K 512 -N 512 --iters 20 --warmup 10 --b_col_maj 0

Avg NPU matmul time: 5789.1us.
Avg NPU gflops: 231.846

Min NPU matmul time: 3890us.
Max NPU gflops: 345.033

Max NPU matmul time: 6622us.
Min NPU gflops: 202.685

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=std::bfloat16_t -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.2s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 64 -k 64 -n 64 --n-aie-cols 4 --b-col-maj 0 --dev npu2 -M 2560 -K 512 -N 1024 --dtype_in bf16 --dtype_out bf16 --trace_size 0 > build/aie_2560x512x1024_64x64x64_4c.mlir
mkdir -p build
cd build && /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie/bin/clang++ -O2 -std=c++20 --target=aie2p-none-unknown-elf -Wno-parentheses -Wno-attributes -Wno-macro-redefined -Wno-empty-body -DNDEBUG -I /scratch/luisr/mlir-aie/install/include  -Dbf16_bf16_ONLY -DDIM_M=64 -DDIM_K=64 -DDIM_N=64 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_64x64x64.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_2560x512x1024_64x64x64_4c.xclbin \
			--no-xchesscc --no-xbridge --peano /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie \
			--aie-generate-npu-insts --npu-insts-name=insts_2560x512x1024_64x64x64_4c.txt ../build/aie_2560x512x1024_64x64x64_4c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_2560x512x1024_64x64x64_4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_2560x512x1024_64x64x64_4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_2560x512x1024_64x64x64_4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_2560x512x1024_64x64x64_4c.xclbin -i build/insts_2560x512x1024_64x64x64_4c.txt -k MLIR_AIE -M 2560 -K 512 -N 1024 --iters 20 --warmup 10 --b_col_maj 0





















Avg NPU matmul time: 8051us.
Avg NPU gflops: 333.419

Min NPU matmul time: 7470us.
Max NPU gflops: 359.351

Max NPU matmul time: 8367us.
Min NPU gflops: 320.826

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=std::bfloat16_t -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.2s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 64 -k 64 -n 64 --n-aie-cols 4 --b-col-maj 0 --dev npu2 -M 2560 -K 512 -N 2560 --dtype_in bf16 --dtype_out bf16 --trace_size 0 > build/aie_2560x512x2560_64x64x64_4c.mlir
mkdir -p build
cd build && /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie/bin/clang++ -O2 -std=c++20 --target=aie2p-none-unknown-elf -Wno-parentheses -Wno-attributes -Wno-macro-redefined -Wno-empty-body -DNDEBUG -I /scratch/luisr/mlir-aie/install/include  -Dbf16_bf16_ONLY -DDIM_M=64 -DDIM_K=64 -DDIM_N=64 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_64x64x64.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_2560x512x2560_64x64x64_4c.xclbin \
			--no-xchesscc --no-xbridge --peano /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie \
			--aie-generate-npu-insts --npu-insts-name=insts_2560x512x2560_64x64x64_4c.txt ../build/aie_2560x512x2560_64x64x64_4c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_2560x512x2560_64x64x64_4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_2560x512x2560_64x64x64_4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_2560x512x2560_64x64x64_4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_2560x512x2560_64x64x64_4c.xclbin -i build/insts_2560x512x2560_64x64x64_4c.txt -k MLIR_AIE -M 2560 -K 512 -N 2560 --iters 20 --warmup 10 --b_col_maj 0





















Avg NPU matmul time: 19420.9us.
Avg NPU gflops: 345.55

Min NPU matmul time: 18820us.
Max NPU gflops: 356.583

Max NPU matmul time: 20036us.
Min NPU gflops: 334.941

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=std::bfloat16_t -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.3s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 64 -k 64 -n 64 --n-aie-cols 4 --b-col-maj 0 --dev npu2 -M 2560 -K 512 -N 4096 --dtype_in bf16 --dtype_out bf16 --trace_size 0 > build/aie_2560x512x4096_64x64x64_4c.mlir
mkdir -p build
cd build && /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie/bin/clang++ -O2 -std=c++20 --target=aie2p-none-unknown-elf -Wno-parentheses -Wno-attributes -Wno-macro-redefined -Wno-empty-body -DNDEBUG -I /scratch/luisr/mlir-aie/install/include  -Dbf16_bf16_ONLY -DDIM_M=64 -DDIM_K=64 -DDIM_N=64 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_64x64x64.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_2560x512x4096_64x64x64_4c.xclbin \
			--no-xchesscc --no-xbridge --peano /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie \
			--aie-generate-npu-insts --npu-insts-name=insts_2560x512x4096_64x64x64_4c.txt ../build/aie_2560x512x4096_64x64x64_4c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_2560x512x4096_64x64x64_4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_2560x512x4096_64x64x64_4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_2560x512x4096_64x64x64_4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_2560x512x4096_64x64x64_4c.xclbin -i build/insts_2560x512x4096_64x64x64_4c.txt -k MLIR_AIE -M 2560 -K 512 -N 4096 --iters 20 --warmup 10 --b_col_maj 0





















Avg NPU matmul time: 30294.9us.
Avg NPU gflops: 354.429

Min NPU matmul time: 29445us.
Max NPU gflops: 364.66

Max NPU matmul time: 31012us.
Min NPU gflops: 346.234

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=std::bfloat16_t -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.2s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 64 -k 64 -n 64 --n-aie-cols 4 --b-col-maj 0 --dev npu2 -M 2560 -K 1024 -N 512 --dtype_in bf16 --dtype_out bf16 --trace_size 0 > build/aie_2560x1024x512_64x64x64_4c.mlir
mkdir -p build
cd build && /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie/bin/clang++ -O2 -std=c++20 --target=aie2p-none-unknown-elf -Wno-parentheses -Wno-attributes -Wno-macro-redefined -Wno-empty-body -DNDEBUG -I /scratch/luisr/mlir-aie/install/include  -Dbf16_bf16_ONLY -DDIM_M=64 -DDIM_K=64 -DDIM_N=64 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_64x64x64.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_2560x1024x512_64x64x64_4c.xclbin \
			--no-xchesscc --no-xbridge --peano /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie \
			--aie-generate-npu-insts --npu-insts-name=insts_2560x1024x512_64x64x64_4c.txt ../build/aie_2560x1024x512_64x64x64_4c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_2560x1024x512_64x64x64_4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_2560x1024x512_64x64x64_4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_2560x1024x512_64x64x64_4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_2560x1024x512_64x64x64_4c.xclbin -i build/insts_2560x1024x512_64x64x64_4c.txt -k MLIR_AIE -M 2560 -K 1024 -N 512 --iters 20 --warmup 10 --b_col_maj 0





















Avg NPU matmul time: 7902.05us.
Avg NPU gflops: 339.704

Min NPU matmul time: 7493us.
Max NPU gflops: 358.248

Max NPU matmul time: 8390us.
Min NPU gflops: 319.947

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=std::bfloat16_t -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.3s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 64 -k 64 -n 64 --n-aie-cols 4 --b-col-maj 0 --dev npu2 -M 2560 -K 1024 -N 1024 --dtype_in bf16 --dtype_out bf16 --trace_size 0 > build/aie_2560x1024x1024_64x64x64_4c.mlir
mkdir -p build
cd build && /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie/bin/clang++ -O2 -std=c++20 --target=aie2p-none-unknown-elf -Wno-parentheses -Wno-attributes -Wno-macro-redefined -Wno-empty-body -DNDEBUG -I /scratch/luisr/mlir-aie/install/include  -Dbf16_bf16_ONLY -DDIM_M=64 -DDIM_K=64 -DDIM_N=64 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_64x64x64.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_2560x1024x1024_64x64x64_4c.xclbin \
			--no-xchesscc --no-xbridge --peano /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie \
			--aie-generate-npu-insts --npu-insts-name=insts_2560x1024x1024_64x64x64_4c.txt ../build/aie_2560x1024x1024_64x64x64_4c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_2560x1024x1024_64x64x64_4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_2560x1024x1024_64x64x64_4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_2560x1024x1024_64x64x64_4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_2560x1024x1024_64x64x64_4c.xclbin -i build/insts_2560x1024x1024_64x64x64_4c.txt -k MLIR_AIE -M 2560 -K 1024 -N 1024 --iters 20 --warmup 10 --b_col_maj 0





















Avg NPU matmul time: 15603.1us.
Avg NPU gflops: 344.08

Min NPU matmul time: 14965us.
Max NPU gflops: 358.751

Max NPU matmul time: 15953us.
Min NPU gflops: 336.533

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=std::bfloat16_t -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.2s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 64 -k 64 -n 64 --n-aie-cols 4 --b-col-maj 0 --dev npu2 -M 2560 -K 1024 -N 2560 --dtype_in bf16 --dtype_out bf16 --trace_size 0 > build/aie_2560x1024x2560_64x64x64_4c.mlir
mkdir -p build
cd build && /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie/bin/clang++ -O2 -std=c++20 --target=aie2p-none-unknown-elf -Wno-parentheses -Wno-attributes -Wno-macro-redefined -Wno-empty-body -DNDEBUG -I /scratch/luisr/mlir-aie/install/include  -Dbf16_bf16_ONLY -DDIM_M=64 -DDIM_K=64 -DDIM_N=64 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_64x64x64.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_2560x1024x2560_64x64x64_4c.xclbin \
			--no-xchesscc --no-xbridge --peano /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie \
			--aie-generate-npu-insts --npu-insts-name=insts_2560x1024x2560_64x64x64_4c.txt ../build/aie_2560x1024x2560_64x64x64_4c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_2560x1024x2560_64x64x64_4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_2560x1024x2560_64x64x64_4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_2560x1024x2560_64x64x64_4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_2560x1024x2560_64x64x64_4c.xclbin -i build/insts_2560x1024x2560_64x64x64_4c.txt -k MLIR_AIE -M 2560 -K 1024 -N 2560 --iters 20 --warmup 10 --b_col_maj 0





















Avg NPU matmul time: 37451.3us.
Avg NPU gflops: 358.379

Min NPU matmul time: 36959us.
Max NPU gflops: 363.153

Max NPU matmul time: 37763us.
Min NPU gflops: 355.421

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=std::bfloat16_t -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.3s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 64 -k 64 -n 64 --n-aie-cols 4 --b-col-maj 0 --dev npu2 -M 2560 -K 1024 -N 4096 --dtype_in bf16 --dtype_out bf16 --trace_size 0 > build/aie_2560x1024x4096_64x64x64_4c.mlir
mkdir -p build
cd build && /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie/bin/clang++ -O2 -std=c++20 --target=aie2p-none-unknown-elf -Wno-parentheses -Wno-attributes -Wno-macro-redefined -Wno-empty-body -DNDEBUG -I /scratch/luisr/mlir-aie/install/include  -Dbf16_bf16_ONLY -DDIM_M=64 -DDIM_K=64 -DDIM_N=64 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_64x64x64.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_2560x1024x4096_64x64x64_4c.xclbin \
			--no-xchesscc --no-xbridge --peano /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie \
			--aie-generate-npu-insts --npu-insts-name=insts_2560x1024x4096_64x64x64_4c.txt ../build/aie_2560x1024x4096_64x64x64_4c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_2560x1024x4096_64x64x64_4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_2560x1024x4096_64x64x64_4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_2560x1024x4096_64x64x64_4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_2560x1024x4096_64x64x64_4c.xclbin -i build/insts_2560x1024x4096_64x64x64_4c.txt -k MLIR_AIE -M 2560 -K 1024 -N 4096 --iters 20 --warmup 10 --b_col_maj 0





















Avg NPU matmul time: 59399.7us.
Avg NPU gflops: 361.531

Min NPU matmul time: 58802us.
Max NPU gflops: 365.206

Max NPU matmul time: 61609us.
Min NPU gflops: 348.567

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=std::bfloat16_t -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.3s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 64 -k 64 -n 64 --n-aie-cols 4 --b-col-maj 0 --dev npu2 -M 2560 -K 2560 -N 512 --dtype_in bf16 --dtype_out bf16 --trace_size 0 > build/aie_2560x2560x512_64x64x64_4c.mlir
mkdir -p build
cd build && /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie/bin/clang++ -O2 -std=c++20 --target=aie2p-none-unknown-elf -Wno-parentheses -Wno-attributes -Wno-macro-redefined -Wno-empty-body -DNDEBUG -I /scratch/luisr/mlir-aie/install/include  -Dbf16_bf16_ONLY -DDIM_M=64 -DDIM_K=64 -DDIM_N=64 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_64x64x64.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_2560x2560x512_64x64x64_4c.xclbin \
			--no-xchesscc --no-xbridge --peano /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie \
			--aie-generate-npu-insts --npu-insts-name=insts_2560x2560x512_64x64x64_4c.txt ../build/aie_2560x2560x512_64x64x64_4c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_2560x2560x512_64x64x64_4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_2560x2560x512_64x64x64_4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_2560x2560x512_64x64x64_4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_2560x2560x512_64x64x64_4c.xclbin -i build/insts_2560x2560x512_64x64x64_4c.txt -k MLIR_AIE -M 2560 -K 2560 -N 512 --iters 20 --warmup 10 --b_col_maj 0





















Avg NPU matmul time: 19395.3us.
Avg NPU gflops: 346.006

Min NPU matmul time: 18731us.
Max NPU gflops: 358.277

Max NPU matmul time: 21574us.
Min NPU gflops: 311.064

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=std::bfloat16_t -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.2s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 64 -k 64 -n 64 --n-aie-cols 4 --b-col-maj 0 --dev npu2 -M 2560 -K 2560 -N 1024 --dtype_in bf16 --dtype_out bf16 --trace_size 0 > build/aie_2560x2560x1024_64x64x64_4c.mlir
mkdir -p build
cd build && /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie/bin/clang++ -O2 -std=c++20 --target=aie2p-none-unknown-elf -Wno-parentheses -Wno-attributes -Wno-macro-redefined -Wno-empty-body -DNDEBUG -I /scratch/luisr/mlir-aie/install/include  -Dbf16_bf16_ONLY -DDIM_M=64 -DDIM_K=64 -DDIM_N=64 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_64x64x64.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_2560x2560x1024_64x64x64_4c.xclbin \
			--no-xchesscc --no-xbridge --peano /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie \
			--aie-generate-npu-insts --npu-insts-name=insts_2560x2560x1024_64x64x64_4c.txt ../build/aie_2560x2560x1024_64x64x64_4c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_2560x2560x1024_64x64x64_4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_2560x2560x1024_64x64x64_4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_2560x2560x1024_64x64x64_4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_2560x2560x1024_64x64x64_4c.xclbin -i build/insts_2560x2560x1024_64x64x64_4c.txt -k MLIR_AIE -M 2560 -K 2560 -N 1024 --iters 20 --warmup 10 --b_col_maj 0





















Avg NPU matmul time: 37532.5us.
Avg NPU gflops: 357.604

Min NPU matmul time: 36735us.
Max NPU gflops: 365.367

Max NPU matmul time: 39955us.
Min NPU gflops: 335.922

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=std::bfloat16_t -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.3s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 64 -k 64 -n 64 --n-aie-cols 4 --b-col-maj 0 --dev npu2 -M 2560 -K 2560 -N 2560 --dtype_in bf16 --dtype_out bf16 --trace_size 0 > build/aie_2560x2560x2560_64x64x64_4c.mlir
mkdir -p build
cd build && /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie/bin/clang++ -O2 -std=c++20 --target=aie2p-none-unknown-elf -Wno-parentheses -Wno-attributes -Wno-macro-redefined -Wno-empty-body -DNDEBUG -I /scratch/luisr/mlir-aie/install/include  -Dbf16_bf16_ONLY -DDIM_M=64 -DDIM_K=64 -DDIM_N=64 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_64x64x64.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_2560x2560x2560_64x64x64_4c.xclbin \
			--no-xchesscc --no-xbridge --peano /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie \
			--aie-generate-npu-insts --npu-insts-name=insts_2560x2560x2560_64x64x64_4c.txt ../build/aie_2560x2560x2560_64x64x64_4c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_2560x2560x2560_64x64x64_4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_2560x2560x2560_64x64x64_4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_2560x2560x2560_64x64x64_4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_2560x2560x2560_64x64x64_4c.xclbin -i build/insts_2560x2560x2560_64x64x64_4c.txt -k MLIR_AIE -M 2560 -K 2560 -N 2560 --iters 20 --warmup 10 --b_col_maj 0





















Avg NPU matmul time: 93384.9us.
Avg NPU gflops: 359.313

Min NPU matmul time: 91844us.
Max NPU gflops: 365.342

Max NPU matmul time: 94354us.
Min NPU gflops: 355.623

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=std::bfloat16_t -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.3s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 64 -k 64 -n 64 --n-aie-cols 4 --b-col-maj 0 --dev npu2 -M 2560 -K 2560 -N 4096 --dtype_in bf16 --dtype_out bf16 --trace_size 0 > build/aie_2560x2560x4096_64x64x64_4c.mlir
mkdir -p build
cd build && /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie/bin/clang++ -O2 -std=c++20 --target=aie2p-none-unknown-elf -Wno-parentheses -Wno-attributes -Wno-macro-redefined -Wno-empty-body -DNDEBUG -I /scratch/luisr/mlir-aie/install/include  -Dbf16_bf16_ONLY -DDIM_M=64 -DDIM_K=64 -DDIM_N=64 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_64x64x64.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_2560x2560x4096_64x64x64_4c.xclbin \
			--no-xchesscc --no-xbridge --peano /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie \
			--aie-generate-npu-insts --npu-insts-name=insts_2560x2560x4096_64x64x64_4c.txt ../build/aie_2560x2560x4096_64x64x64_4c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_2560x2560x4096_64x64x64_4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_2560x2560x4096_64x64x64_4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_2560x2560x4096_64x64x64_4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_2560x2560x4096_64x64x64_4c.xclbin -i build/insts_2560x2560x4096_64x64x64_4c.txt -k MLIR_AIE -M 2560 -K 2560 -N 4096 --iters 20 --warmup 10 --b_col_maj 0





















Avg NPU matmul time: 147053us.
Avg NPU gflops: 365.087

Min NPU matmul time: 146021us.
Max NPU gflops: 367.667

Max NPU matmul time: 148998us.
Min NPU gflops: 360.321

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=std::bfloat16_t -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.3s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 64 -k 64 -n 64 --n-aie-cols 4 --b-col-maj 0 --dev npu2 -M 2560 -K 4096 -N 512 --dtype_in bf16 --dtype_out bf16 --trace_size 0 > build/aie_2560x4096x512_64x64x64_4c.mlir
mkdir -p build
cd build && /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie/bin/clang++ -O2 -std=c++20 --target=aie2p-none-unknown-elf -Wno-parentheses -Wno-attributes -Wno-macro-redefined -Wno-empty-body -DNDEBUG -I /scratch/luisr/mlir-aie/install/include  -Dbf16_bf16_ONLY -DDIM_M=64 -DDIM_K=64 -DDIM_N=64 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_64x64x64.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_2560x4096x512_64x64x64_4c.xclbin \
			--no-xchesscc --no-xbridge --peano /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie \
			--aie-generate-npu-insts --npu-insts-name=insts_2560x4096x512_64x64x64_4c.txt ../build/aie_2560x4096x512_64x64x64_4c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_2560x4096x512_64x64x64_4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_2560x4096x512_64x64x64_4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_2560x4096x512_64x64x64_4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_2560x4096x512_64x64x64_4c.xclbin -i build/insts_2560x4096x512_64x64x64_4c.txt -k MLIR_AIE -M 2560 -K 4096 -N 512 --iters 20 --warmup 10 --b_col_maj 0





















Avg NPU matmul time: 30597.7us.
Avg NPU gflops: 350.923

Min NPU matmul time: 29549us.
Max NPU gflops: 363.377

Max NPU matmul time: 33224us.
Min NPU gflops: 323.183

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=std::bfloat16_t -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.3s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 64 -k 64 -n 64 --n-aie-cols 4 --b-col-maj 0 --dev npu2 -M 2560 -K 4096 -N 1024 --dtype_in bf16 --dtype_out bf16 --trace_size 0 > build/aie_2560x4096x1024_64x64x64_4c.mlir
mkdir -p build
cd build && /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie/bin/clang++ -O2 -std=c++20 --target=aie2p-none-unknown-elf -Wno-parentheses -Wno-attributes -Wno-macro-redefined -Wno-empty-body -DNDEBUG -I /scratch/luisr/mlir-aie/install/include  -Dbf16_bf16_ONLY -DDIM_M=64 -DDIM_K=64 -DDIM_N=64 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_64x64x64.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_2560x4096x1024_64x64x64_4c.xclbin \
			--no-xchesscc --no-xbridge --peano /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie \
			--aie-generate-npu-insts --npu-insts-name=insts_2560x4096x1024_64x64x64_4c.txt ../build/aie_2560x4096x1024_64x64x64_4c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_2560x4096x1024_64x64x64_4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_2560x4096x1024_64x64x64_4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_2560x4096x1024_64x64x64_4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_2560x4096x1024_64x64x64_4c.xclbin -i build/insts_2560x4096x1024_64x64x64_4c.txt -k MLIR_AIE -M 2560 -K 4096 -N 1024 --iters 20 --warmup 10 --b_col_maj 0





















Avg NPU matmul time: 59853us.
Avg NPU gflops: 358.793

Min NPU matmul time: 59216us.
Max NPU gflops: 362.653

Max NPU matmul time: 61935us.
Min NPU gflops: 346.732

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=std::bfloat16_t -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.3s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 64 -k 64 -n 64 --n-aie-cols 4 --b-col-maj 0 --dev npu2 -M 2560 -K 4096 -N 2560 --dtype_in bf16 --dtype_out bf16 --trace_size 0 > build/aie_2560x4096x2560_64x64x64_4c.mlir
mkdir -p build
cd build && /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie/bin/clang++ -O2 -std=c++20 --target=aie2p-none-unknown-elf -Wno-parentheses -Wno-attributes -Wno-macro-redefined -Wno-empty-body -DNDEBUG -I /scratch/luisr/mlir-aie/install/include  -Dbf16_bf16_ONLY -DDIM_M=64 -DDIM_K=64 -DDIM_N=64 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_64x64x64.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_2560x4096x2560_64x64x64_4c.xclbin \
			--no-xchesscc --no-xbridge --peano /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie \
			--aie-generate-npu-insts --npu-insts-name=insts_2560x4096x2560_64x64x64_4c.txt ../build/aie_2560x4096x2560_64x64x64_4c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_2560x4096x2560_64x64x64_4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_2560x4096x2560_64x64x64_4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_2560x4096x2560_64x64x64_4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_2560x4096x2560_64x64x64_4c.xclbin -i build/insts_2560x4096x2560_64x64x64_4c.txt -k MLIR_AIE -M 2560 -K 4096 -N 2560 --iters 20 --warmup 10 --b_col_maj 0





















Avg NPU matmul time: 148496us.
Avg NPU gflops: 361.54

Min NPU matmul time: 146150us.
Max NPU gflops: 367.342

Max NPU matmul time: 149179us.
Min NPU gflops: 359.884

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=std::bfloat16_t -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.3s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 64 -k 64 -n 64 --n-aie-cols 4 --b-col-maj 0 --dev npu2 -M 2560 -K 4096 -N 4096 --dtype_in bf16 --dtype_out bf16 --trace_size 0 > build/aie_2560x4096x4096_64x64x64_4c.mlir
mkdir -p build
cd build && /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie/bin/clang++ -O2 -std=c++20 --target=aie2p-none-unknown-elf -Wno-parentheses -Wno-attributes -Wno-macro-redefined -Wno-empty-body -DNDEBUG -I /scratch/luisr/mlir-aie/install/include  -Dbf16_bf16_ONLY -DDIM_M=64 -DDIM_K=64 -DDIM_N=64 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_64x64x64.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_2560x4096x4096_64x64x64_4c.xclbin \
			--no-xchesscc --no-xbridge --peano /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie \
			--aie-generate-npu-insts --npu-insts-name=insts_2560x4096x4096_64x64x64_4c.txt ../build/aie_2560x4096x4096_64x64x64_4c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_2560x4096x4096_64x64x64_4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_2560x4096x4096_64x64x64_4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_2560x4096x4096_64x64x64_4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_2560x4096x4096_64x64x64_4c.xclbin -i build/insts_2560x4096x4096_64x64x64_4c.txt -k MLIR_AIE -M 2560 -K 4096 -N 4096 --iters 20 --warmup 10 --b_col_maj 0





















Avg NPU matmul time: 235792us.
Avg NPU gflops: 364.302

Min NPU matmul time: 233748us.
Max NPU gflops: 367.487

Max NPU matmul time: 236670us.
Min NPU gflops: 362.95

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=std::bfloat16_t -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.3s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 64 -k 64 -n 64 --n-aie-cols 4 --b-col-maj 0 --dev npu2 -M 4096 -K 512 -N 512 --dtype_in bf16 --dtype_out bf16 --trace_size 0 > build/aie_4096x512x512_64x64x64_4c.mlir
mkdir -p build
cd build && /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie/bin/clang++ -O2 -std=c++20 --target=aie2p-none-unknown-elf -Wno-parentheses -Wno-attributes -Wno-macro-redefined -Wno-empty-body -DNDEBUG -I /scratch/luisr/mlir-aie/install/include  -Dbf16_bf16_ONLY -DDIM_M=64 -DDIM_K=64 -DDIM_N=64 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_64x64x64.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_4096x512x512_64x64x64_4c.xclbin \
			--no-xchesscc --no-xbridge --peano /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie \
			--aie-generate-npu-insts --npu-insts-name=insts_4096x512x512_64x64x64_4c.txt ../build/aie_4096x512x512_64x64x64_4c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_4096x512x512_64x64x64_4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_4096x512x512_64x64x64_4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_4096x512x512_64x64x64_4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_4096x512x512_64x64x64_4c.xclbin -i build/insts_4096x512x512_64x64x64_4c.txt -k MLIR_AIE -M 4096 -K 512 -N 512 --iters 20 --warmup 10 --b_col_maj 0

Avg NPU matmul time: 8200us.
Avg NPU gflops: 261.888

Min NPU matmul time: 6404us.
Max NPU gflops: 335.335

Max NPU matmul time: 9158us.
Min NPU gflops: 234.493

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=std::bfloat16_t -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.3s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 64 -k 64 -n 64 --n-aie-cols 4 --b-col-maj 0 --dev npu2 -M 4096 -K 512 -N 1024 --dtype_in bf16 --dtype_out bf16 --trace_size 0 > build/aie_4096x512x1024_64x64x64_4c.mlir
mkdir -p build
cd build && /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie/bin/clang++ -O2 -std=c++20 --target=aie2p-none-unknown-elf -Wno-parentheses -Wno-attributes -Wno-macro-redefined -Wno-empty-body -DNDEBUG -I /scratch/luisr/mlir-aie/install/include  -Dbf16_bf16_ONLY -DDIM_M=64 -DDIM_K=64 -DDIM_N=64 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_64x64x64.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_4096x512x1024_64x64x64_4c.xclbin \
			--no-xchesscc --no-xbridge --peano /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie \
			--aie-generate-npu-insts --npu-insts-name=insts_4096x512x1024_64x64x64_4c.txt ../build/aie_4096x512x1024_64x64x64_4c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_4096x512x1024_64x64x64_4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_4096x512x1024_64x64x64_4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_4096x512x1024_64x64x64_4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_4096x512x1024_64x64x64_4c.xclbin -i build/insts_4096x512x1024_64x64x64_4c.txt -k MLIR_AIE -M 4096 -K 512 -N 1024 --iters 20 --warmup 10 --b_col_maj 0





















Avg NPU matmul time: 12257us.
Avg NPU gflops: 350.411

Min NPU matmul time: 12106us.
Max NPU gflops: 354.78

Max NPU matmul time: 12923us.
Min NPU gflops: 332.351

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=std::bfloat16_t -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.2s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 64 -k 64 -n 64 --n-aie-cols 4 --b-col-maj 0 --dev npu2 -M 4096 -K 512 -N 2560 --dtype_in bf16 --dtype_out bf16 --trace_size 0 > build/aie_4096x512x2560_64x64x64_4c.mlir
mkdir -p build
cd build && /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie/bin/clang++ -O2 -std=c++20 --target=aie2p-none-unknown-elf -Wno-parentheses -Wno-attributes -Wno-macro-redefined -Wno-empty-body -DNDEBUG -I /scratch/luisr/mlir-aie/install/include  -Dbf16_bf16_ONLY -DDIM_M=64 -DDIM_K=64 -DDIM_N=64 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_64x64x64.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_4096x512x2560_64x64x64_4c.xclbin \
			--no-xchesscc --no-xbridge --peano /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie \
			--aie-generate-npu-insts --npu-insts-name=insts_4096x512x2560_64x64x64_4c.txt ../build/aie_4096x512x2560_64x64x64_4c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_4096x512x2560_64x64x64_4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_4096x512x2560_64x64x64_4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_4096x512x2560_64x64x64_4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_4096x512x2560_64x64x64_4c.xclbin -i build/insts_4096x512x2560_64x64x64_4c.txt -k MLIR_AIE -M 4096 -K 512 -N 2560 --iters 20 --warmup 10 --b_col_maj 0





















Avg NPU matmul time: 30338.7us.
Avg NPU gflops: 353.919

Min NPU matmul time: 29658us.
Max NPU gflops: 362.041

Max NPU matmul time: 30907us.
Min NPU gflops: 347.411

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=std::bfloat16_t -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.3s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 64 -k 64 -n 64 --n-aie-cols 4 --b-col-maj 0 --dev npu2 -M 4096 -K 512 -N 4096 --dtype_in bf16 --dtype_out bf16 --trace_size 0 > build/aie_4096x512x4096_64x64x64_4c.mlir
mkdir -p build
cd build && /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie/bin/clang++ -O2 -std=c++20 --target=aie2p-none-unknown-elf -Wno-parentheses -Wno-attributes -Wno-macro-redefined -Wno-empty-body -DNDEBUG -I /scratch/luisr/mlir-aie/install/include  -Dbf16_bf16_ONLY -DDIM_M=64 -DDIM_K=64 -DDIM_N=64 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_64x64x64.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_4096x512x4096_64x64x64_4c.xclbin \
			--no-xchesscc --no-xbridge --peano /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie \
			--aie-generate-npu-insts --npu-insts-name=insts_4096x512x4096_64x64x64_4c.txt ../build/aie_4096x512x4096_64x64x64_4c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_4096x512x4096_64x64x64_4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_4096x512x4096_64x64x64_4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_4096x512x4096_64x64x64_4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_4096x512x4096_64x64x64_4c.xclbin -i build/insts_4096x512x4096_64x64x64_4c.txt -k MLIR_AIE -M 4096 -K 512 -N 4096 --iters 20 --warmup 10 --b_col_maj 0





















Avg NPU matmul time: 48070.5us.
Avg NPU gflops: 357.389

Min NPU matmul time: 47444us.
Max NPU gflops: 362.108

Max NPU matmul time: 49944us.
Min NPU gflops: 343.983

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=std::bfloat16_t -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.3s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 64 -k 64 -n 64 --n-aie-cols 4 --b-col-maj 0 --dev npu2 -M 4096 -K 1024 -N 512 --dtype_in bf16 --dtype_out bf16 --trace_size 0 > build/aie_4096x1024x512_64x64x64_4c.mlir
mkdir -p build
cd build && /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie/bin/clang++ -O2 -std=c++20 --target=aie2p-none-unknown-elf -Wno-parentheses -Wno-attributes -Wno-macro-redefined -Wno-empty-body -DNDEBUG -I /scratch/luisr/mlir-aie/install/include  -Dbf16_bf16_ONLY -DDIM_M=64 -DDIM_K=64 -DDIM_N=64 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_64x64x64.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_4096x1024x512_64x64x64_4c.xclbin \
			--no-xchesscc --no-xbridge --peano /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie \
			--aie-generate-npu-insts --npu-insts-name=insts_4096x1024x512_64x64x64_4c.txt ../build/aie_4096x1024x512_64x64x64_4c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_4096x1024x512_64x64x64_4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_4096x1024x512_64x64x64_4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_4096x1024x512_64x64x64_4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_4096x1024x512_64x64x64_4c.xclbin -i build/insts_4096x1024x512_64x64x64_4c.txt -k MLIR_AIE -M 4096 -K 1024 -N 512 --iters 20 --warmup 10 --b_col_maj 0





















Avg NPU matmul time: 12414.4us.
Avg NPU gflops: 345.967

Min NPU matmul time: 12005us.
Max NPU gflops: 357.765

Max NPU matmul time: 12929us.
Min NPU gflops: 332.196

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=std::bfloat16_t -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.3s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 64 -k 64 -n 64 --n-aie-cols 4 --b-col-maj 0 --dev npu2 -M 4096 -K 1024 -N 1024 --dtype_in bf16 --dtype_out bf16 --trace_size 0 > build/aie_4096x1024x1024_64x64x64_4c.mlir
mkdir -p build
cd build && /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie/bin/clang++ -O2 -std=c++20 --target=aie2p-none-unknown-elf -Wno-parentheses -Wno-attributes -Wno-macro-redefined -Wno-empty-body -DNDEBUG -I /scratch/luisr/mlir-aie/install/include  -Dbf16_bf16_ONLY -DDIM_M=64 -DDIM_K=64 -DDIM_N=64 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_64x64x64.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_4096x1024x1024_64x64x64_4c.xclbin \
			--no-xchesscc --no-xbridge --peano /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie \
			--aie-generate-npu-insts --npu-insts-name=insts_4096x1024x1024_64x64x64_4c.txt ../build/aie_4096x1024x1024_64x64x64_4c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_4096x1024x1024_64x64x64_4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_4096x1024x1024_64x64x64_4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_4096x1024x1024_64x64x64_4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_4096x1024x1024_64x64x64_4c.xclbin -i build/insts_4096x1024x1024_64x64x64_4c.txt -k MLIR_AIE -M 4096 -K 1024 -N 1024 --iters 20 --warmup 10 --b_col_maj 0





















Avg NPU matmul time: 24390.2us.
Avg NPU gflops: 352.189

Min NPU matmul time: 23760us.
Max NPU gflops: 361.529

Max NPU matmul time: 26218us.
Min NPU gflops: 327.635

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=std::bfloat16_t -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.3s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 64 -k 64 -n 64 --n-aie-cols 4 --b-col-maj 0 --dev npu2 -M 4096 -K 1024 -N 2560 --dtype_in bf16 --dtype_out bf16 --trace_size 0 > build/aie_4096x1024x2560_64x64x64_4c.mlir
mkdir -p build
cd build && /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie/bin/clang++ -O2 -std=c++20 --target=aie2p-none-unknown-elf -Wno-parentheses -Wno-attributes -Wno-macro-redefined -Wno-empty-body -DNDEBUG -I /scratch/luisr/mlir-aie/install/include  -Dbf16_bf16_ONLY -DDIM_M=64 -DDIM_K=64 -DDIM_N=64 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_64x64x64.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_4096x1024x2560_64x64x64_4c.xclbin \
			--no-xchesscc --no-xbridge --peano /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie \
			--aie-generate-npu-insts --npu-insts-name=insts_4096x1024x2560_64x64x64_4c.txt ../build/aie_4096x1024x2560_64x64x64_4c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_4096x1024x2560_64x64x64_4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_4096x1024x2560_64x64x64_4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_4096x1024x2560_64x64x64_4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_4096x1024x2560_64x64x64_4c.xclbin -i build/insts_4096x1024x2560_64x64x64_4c.txt -k MLIR_AIE -M 4096 -K 1024 -N 2560 --iters 20 --warmup 10 --b_col_maj 0





















Avg NPU matmul time: 59339.6us.
Avg NPU gflops: 361.898

Min NPU matmul time: 58570us.
Max NPU gflops: 366.652

Max NPU matmul time: 61362us.
Min NPU gflops: 349.97

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=std::bfloat16_t -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.3s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 64 -k 64 -n 64 --n-aie-cols 4 --b-col-maj 0 --dev npu2 -M 4096 -K 1024 -N 4096 --dtype_in bf16 --dtype_out bf16 --trace_size 0 > build/aie_4096x1024x4096_64x64x64_4c.mlir
mkdir -p build
cd build && /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie/bin/clang++ -O2 -std=c++20 --target=aie2p-none-unknown-elf -Wno-parentheses -Wno-attributes -Wno-macro-redefined -Wno-empty-body -DNDEBUG -I /scratch/luisr/mlir-aie/install/include  -Dbf16_bf16_ONLY -DDIM_M=64 -DDIM_K=64 -DDIM_N=64 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_64x64x64.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_4096x1024x4096_64x64x64_4c.xclbin \
			--no-xchesscc --no-xbridge --peano /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie \
			--aie-generate-npu-insts --npu-insts-name=insts_4096x1024x4096_64x64x64_4c.txt ../build/aie_4096x1024x4096_64x64x64_4c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_4096x1024x4096_64x64x64_4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_4096x1024x4096_64x64x64_4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_4096x1024x4096_64x64x64_4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_4096x1024x4096_64x64x64_4c.xclbin -i build/insts_4096x1024x4096_64x64x64_4c.txt -k MLIR_AIE -M 4096 -K 1024 -N 4096 --iters 20 --warmup 10 --b_col_maj 0





















Avg NPU matmul time: 95117.6us.
Avg NPU gflops: 361.234

Min NPU matmul time: 93783us.
Max NPU gflops: 366.375

Max NPU matmul time: 96852us.
Min NPU gflops: 354.765

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=std::bfloat16_t -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.2s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 64 -k 64 -n 64 --n-aie-cols 4 --b-col-maj 0 --dev npu2 -M 4096 -K 2560 -N 512 --dtype_in bf16 --dtype_out bf16 --trace_size 0 > build/aie_4096x2560x512_64x64x64_4c.mlir
mkdir -p build
cd build && /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie/bin/clang++ -O2 -std=c++20 --target=aie2p-none-unknown-elf -Wno-parentheses -Wno-attributes -Wno-macro-redefined -Wno-empty-body -DNDEBUG -I /scratch/luisr/mlir-aie/install/include  -Dbf16_bf16_ONLY -DDIM_M=64 -DDIM_K=64 -DDIM_N=64 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_64x64x64.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_4096x2560x512_64x64x64_4c.xclbin \
			--no-xchesscc --no-xbridge --peano /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie \
			--aie-generate-npu-insts --npu-insts-name=insts_4096x2560x512_64x64x64_4c.txt ../build/aie_4096x2560x512_64x64x64_4c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_4096x2560x512_64x64x64_4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_4096x2560x512_64x64x64_4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_4096x2560x512_64x64x64_4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_4096x2560x512_64x64x64_4c.xclbin -i build/insts_4096x2560x512_64x64x64_4c.txt -k MLIR_AIE -M 4096 -K 2560 -N 512 --iters 20 --warmup 10 --b_col_maj 0





















Avg NPU matmul time: 30692.6us.
Avg NPU gflops: 349.837

Min NPU matmul time: 30132us.
Max NPU gflops: 356.346

Max NPU matmul time: 33331us.
Min NPU gflops: 322.145

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=std::bfloat16_t -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.2s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 64 -k 64 -n 64 --n-aie-cols 4 --b-col-maj 0 --dev npu2 -M 4096 -K 2560 -N 1024 --dtype_in bf16 --dtype_out bf16 --trace_size 0 > build/aie_4096x2560x1024_64x64x64_4c.mlir
mkdir -p build
cd build && /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie/bin/clang++ -O2 -std=c++20 --target=aie2p-none-unknown-elf -Wno-parentheses -Wno-attributes -Wno-macro-redefined -Wno-empty-body -DNDEBUG -I /scratch/luisr/mlir-aie/install/include  -Dbf16_bf16_ONLY -DDIM_M=64 -DDIM_K=64 -DDIM_N=64 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_64x64x64.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_4096x2560x1024_64x64x64_4c.xclbin \
			--no-xchesscc --no-xbridge --peano /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie \
			--aie-generate-npu-insts --npu-insts-name=insts_4096x2560x1024_64x64x64_4c.txt ../build/aie_4096x2560x1024_64x64x64_4c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_4096x2560x1024_64x64x64_4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_4096x2560x1024_64x64x64_4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_4096x2560x1024_64x64x64_4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_4096x2560x1024_64x64x64_4c.xclbin -i build/insts_4096x2560x1024_64x64x64_4c.txt -k MLIR_AIE -M 4096 -K 2560 -N 1024 --iters 20 --warmup 10 --b_col_maj 0





















Avg NPU matmul time: 59617.9us.
Avg NPU gflops: 360.208

Min NPU matmul time: 58749us.
Max NPU gflops: 365.535

Max NPU matmul time: 61732us.
Min NPU gflops: 347.872

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=std::bfloat16_t -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.3s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 64 -k 64 -n 64 --n-aie-cols 4 --b-col-maj 0 --dev npu2 -M 4096 -K 2560 -N 2560 --dtype_in bf16 --dtype_out bf16 --trace_size 0 > build/aie_4096x2560x2560_64x64x64_4c.mlir
mkdir -p build
cd build && /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie/bin/clang++ -O2 -std=c++20 --target=aie2p-none-unknown-elf -Wno-parentheses -Wno-attributes -Wno-macro-redefined -Wno-empty-body -DNDEBUG -I /scratch/luisr/mlir-aie/install/include  -Dbf16_bf16_ONLY -DDIM_M=64 -DDIM_K=64 -DDIM_N=64 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_64x64x64.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_4096x2560x2560_64x64x64_4c.xclbin \
			--no-xchesscc --no-xbridge --peano /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie \
			--aie-generate-npu-insts --npu-insts-name=insts_4096x2560x2560_64x64x64_4c.txt ../build/aie_4096x2560x2560_64x64x64_4c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_4096x2560x2560_64x64x64_4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_4096x2560x2560_64x64x64_4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_4096x2560x2560_64x64x64_4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_4096x2560x2560_64x64x64_4c.xclbin -i build/insts_4096x2560x2560_64x64x64_4c.txt -k MLIR_AIE -M 4096 -K 2560 -N 2560 --iters 20 --warmup 10 --b_col_maj 0





















Avg NPU matmul time: 146947us.
Avg NPU gflops: 365.351

Min NPU matmul time: 146053us.
Max NPU gflops: 367.586

Max NPU matmul time: 148874us.
Min NPU gflops: 360.621

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=std::bfloat16_t -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.3s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 64 -k 64 -n 64 --n-aie-cols 4 --b-col-maj 0 --dev npu2 -M 4096 -K 2560 -N 4096 --dtype_in bf16 --dtype_out bf16 --trace_size 0 > build/aie_4096x2560x4096_64x64x64_4c.mlir
mkdir -p build
cd build && /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie/bin/clang++ -O2 -std=c++20 --target=aie2p-none-unknown-elf -Wno-parentheses -Wno-attributes -Wno-macro-redefined -Wno-empty-body -DNDEBUG -I /scratch/luisr/mlir-aie/install/include  -Dbf16_bf16_ONLY -DDIM_M=64 -DDIM_K=64 -DDIM_N=64 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_64x64x64.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_4096x2560x4096_64x64x64_4c.xclbin \
			--no-xchesscc --no-xbridge --peano /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie \
			--aie-generate-npu-insts --npu-insts-name=insts_4096x2560x4096_64x64x64_4c.txt ../build/aie_4096x2560x4096_64x64x64_4c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_4096x2560x4096_64x64x64_4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_4096x2560x4096_64x64x64_4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_4096x2560x4096_64x64x64_4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_4096x2560x4096_64x64x64_4c.xclbin -i build/insts_4096x2560x4096_64x64x64_4c.txt -k MLIR_AIE -M 4096 -K 2560 -N 4096 --iters 20 --warmup 10 --b_col_maj 0





















Avg NPU matmul time: 235771us.
Avg NPU gflops: 364.334

Min NPU matmul time: 233791us.
Max NPU gflops: 367.419

Max NPU matmul time: 236696us.
Min NPU gflops: 362.91

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=std::bfloat16_t -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.2s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 64 -k 64 -n 64 --n-aie-cols 4 --b-col-maj 0 --dev npu2 -M 4096 -K 4096 -N 512 --dtype_in bf16 --dtype_out bf16 --trace_size 0 > build/aie_4096x4096x512_64x64x64_4c.mlir
mkdir -p build
cd build && /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie/bin/clang++ -O2 -std=c++20 --target=aie2p-none-unknown-elf -Wno-parentheses -Wno-attributes -Wno-macro-redefined -Wno-empty-body -DNDEBUG -I /scratch/luisr/mlir-aie/install/include  -Dbf16_bf16_ONLY -DDIM_M=64 -DDIM_K=64 -DDIM_N=64 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_64x64x64.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_4096x4096x512_64x64x64_4c.xclbin \
			--no-xchesscc --no-xbridge --peano /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie \
			--aie-generate-npu-insts --npu-insts-name=insts_4096x4096x512_64x64x64_4c.txt ../build/aie_4096x4096x512_64x64x64_4c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_4096x4096x512_64x64x64_4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_4096x4096x512_64x64x64_4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_4096x4096x512_64x64x64_4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_4096x4096x512_64x64x64_4c.xclbin -i build/insts_4096x4096x512_64x64x64_4c.txt -k MLIR_AIE -M 4096 -K 4096 -N 512 --iters 20 --warmup 10 --b_col_maj 0





















Avg NPU matmul time: 49195.4us.
Avg NPU gflops: 349.217

Min NPU matmul time: 47596us.
Max NPU gflops: 360.952

Max NPU matmul time: 50217us.
Min NPU gflops: 342.113

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=std::bfloat16_t -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.3s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 64 -k 64 -n 64 --n-aie-cols 4 --b-col-maj 0 --dev npu2 -M 4096 -K 4096 -N 1024 --dtype_in bf16 --dtype_out bf16 --trace_size 0 > build/aie_4096x4096x1024_64x64x64_4c.mlir
mkdir -p build
cd build && /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie/bin/clang++ -O2 -std=c++20 --target=aie2p-none-unknown-elf -Wno-parentheses -Wno-attributes -Wno-macro-redefined -Wno-empty-body -DNDEBUG -I /scratch/luisr/mlir-aie/install/include  -Dbf16_bf16_ONLY -DDIM_M=64 -DDIM_K=64 -DDIM_N=64 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_64x64x64.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_4096x4096x1024_64x64x64_4c.xclbin \
			--no-xchesscc --no-xbridge --peano /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie \
			--aie-generate-npu-insts --npu-insts-name=insts_4096x4096x1024_64x64x64_4c.txt ../build/aie_4096x4096x1024_64x64x64_4c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_4096x4096x1024_64x64x64_4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_4096x4096x1024_64x64x64_4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_4096x4096x1024_64x64x64_4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_4096x4096x1024_64x64x64_4c.xclbin -i build/insts_4096x4096x1024_64x64x64_4c.txt -k MLIR_AIE -M 4096 -K 4096 -N 1024 --iters 20 --warmup 10 --b_col_maj 0





















Avg NPU matmul time: 96024us.
Avg NPU gflops: 357.825

Min NPU matmul time: 94183us.
Max NPU gflops: 364.819

Max NPU matmul time: 96724us.
Min NPU gflops: 355.235

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=std::bfloat16_t -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.2s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 64 -k 64 -n 64 --n-aie-cols 4 --b-col-maj 0 --dev npu2 -M 4096 -K 4096 -N 2560 --dtype_in bf16 --dtype_out bf16 --trace_size 0 > build/aie_4096x4096x2560_64x64x64_4c.mlir
mkdir -p build
cd build && /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie/bin/clang++ -O2 -std=c++20 --target=aie2p-none-unknown-elf -Wno-parentheses -Wno-attributes -Wno-macro-redefined -Wno-empty-body -DNDEBUG -I /scratch/luisr/mlir-aie/install/include  -Dbf16_bf16_ONLY -DDIM_M=64 -DDIM_K=64 -DDIM_N=64 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_64x64x64.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_4096x4096x2560_64x64x64_4c.xclbin \
			--no-xchesscc --no-xbridge --peano /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie \
			--aie-generate-npu-insts --npu-insts-name=insts_4096x4096x2560_64x64x64_4c.txt ../build/aie_4096x4096x2560_64x64x64_4c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_4096x4096x2560_64x64x64_4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_4096x4096x2560_64x64x64_4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_4096x4096x2560_64x64x64_4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_4096x4096x2560_64x64x64_4c.xclbin -i build/insts_4096x4096x2560_64x64x64_4c.txt -k MLIR_AIE -M 4096 -K 4096 -N 2560 --iters 20 --warmup 10 --b_col_maj 0





















Avg NPU matmul time: 235676us.
Avg NPU gflops: 364.481

Min NPU matmul time: 233776us.
Max NPU gflops: 367.443

Max NPU matmul time: 236486us.
Min NPU gflops: 363.232

PASS!

rm -rf tmpTrace parse*.json trace*json trace.txt
rm -rf build _build whole_array.exe
rm -rf _build
mkdir -p _build
cd _build &&  cmake -E env CXXFLAGS="-std=c++23 -ggdb -DDTYPE_IN=std::bfloat16_t -DDTYPE_OUT=std::bfloat16_t -DDTYPE_ACC=float" \
	cmake `echo /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/..` -D CMAKE_C_COMPILER=gcc-13 -D CMAKE_CXX_COMPILER=g++-13 -DTARGET_NAME=whole_array -Dsubdir=whole_array
-- The C compiler identification is GNU 13.3.0
-- The CXX compiler identification is GNU 13.3.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc-13 - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/g++-13 - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done (0.3s)
-- Generating done (0.0s)
-- Build files have been written to: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build
cd _build &&  cmake --build . --config Release
gmake[1]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[2]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[3]: Entering directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[ 33%] Building CXX object CMakeFiles/whole_array.dir/scratch/luisr/mlir-aie/runtime_lib/test_lib/test_utils.cpp.o
[ 66%] Building CXX object CMakeFiles/whole_array.dir/whole_array/test.cpp.o
[100%] Linking CXX executable whole_array
gmake[3]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
[100%] Built target whole_array
gmake[2]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
gmake[1]: Leaving directory '/scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/_build'
cp _build/whole_array whole_array.exe 
mkdir -p build
python3 /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/whole_array.py -m 64 -k 64 -n 64 --n-aie-cols 4 --b-col-maj 0 --dev npu2 -M 4096 -K 4096 -N 4096 --dtype_in bf16 --dtype_out bf16 --trace_size 0 > build/aie_4096x4096x4096_64x64x64_4c.mlir
mkdir -p build
cd build && /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie/bin/clang++ -O2 -std=c++20 --target=aie2p-none-unknown-elf -Wno-parentheses -Wno-attributes -Wno-macro-redefined -Wno-empty-body -DNDEBUG -I /scratch/luisr/mlir-aie/install/include  -Dbf16_bf16_ONLY -DDIM_M=64 -DDIM_K=64 -DDIM_N=64 -c /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/../../../../aie_kernels/aie2p/mm.cc -o mm_64x64x64.o
mkdir -p build
cd build && aiecc.py --alloc-scheme=basic-sequential --aie-generate-xclbin --no-compile-host --xclbin-name=final_4096x4096x4096_64x64x64_4c.xclbin \
			--no-xchesscc --no-xbridge --peano /scratch/luisr/mlir-aie/ironenv/lib/python3.12/site-packages/llvm-aie \
			--aie-generate-npu-insts --npu-insts-name=insts_4096x4096x4096_64x64x64_4c.txt ../build/aie_4096x4096x4096_64x64x64_4c.mlir

Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_4096x4096x4096_64x64x64_4c.mlir.prj/aie_cdo_elfs.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_4096x4096x4096_64x64x64_4c.mlir.prj/aie_cdo_init.bin
Generating: /scratch/luisr/mlir-aie/programming_examples/basic/matrix_multiplication/whole_array/build/aie_4096x4096x4096_64x64x64_4c.mlir.prj/aie_cdo_enable.bin
export XRT_HACK_UNSECURE_LOADING_XCLBIN=1 && \
 ./whole_array.exe -x build/final_4096x4096x4096_64x64x64_4c.xclbin -i build/insts_4096x4096x4096_64x64x64_4c.txt -k MLIR_AIE -M 4096 -K 4096 -N 4096 --iters 20 --warmup 10 --b_col_maj 0





















Avg NPU matmul time: 375233us.
Avg NPU gflops: 366.276

Min NPU matmul time: 372915us.
Max NPU gflops: 368.553

Max NPU matmul time: 375676us.
Min NPU gflops: 365.844

PASS!

